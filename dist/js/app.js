(()=>{var Ba=Object.create;var Jr=Object.defineProperty;var Va=Object.getOwnPropertyDescriptor;var za=Object.getOwnPropertyNames;var Ja=Object.getPrototypeOf,Wa=Object.prototype.hasOwnProperty;var qa=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Ga=(e,t,i,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of za(t))!Wa.call(e,s)&&s!==i&&Jr(e,s,{get:()=>t[s],enumerable:!(n=Va(t,s))||n.enumerable});return e};var Ka=(e,t,i)=>(i=e!=null?Ba(Ja(e)):{},Ga(t||!e||!e.__esModule?Jr(i,"default",{value:e,enumerable:!0}):i,e));var Kr=qa((Cs,Gr)=>{(function(e,t){typeof define=="function"&&define.amd?define(t):typeof Cs=="object"?Gr.exports=t():e.NProgress=t()})(Cs,function(){var e={};e.version="0.2.0";var t=e.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};e.configure=function(c){var y,S;for(y in c)S=c[y],S!==void 0&&c.hasOwnProperty(y)&&(t[y]=S);return this},e.status=null,e.set=function(c){var y=e.isStarted();c=i(c,t.minimum,1),e.status=c===1?null:c;var S=e.render(!y),k=S.querySelector(t.barSelector),L=t.speed,H=t.easing;return S.offsetWidth,r(function(M){t.positionUsing===""&&(t.positionUsing=e.getPositioningCSS()),l(k,s(c,L,H)),c===1?(l(S,{transition:"none",opacity:1}),S.offsetWidth,setTimeout(function(){l(S,{transition:"all "+L+"ms linear",opacity:0}),setTimeout(function(){e.remove(),M()},L)},L)):setTimeout(M,L)}),this},e.isStarted=function(){return typeof e.status=="number"},e.start=function(){e.status||e.set(0);var c=function(){setTimeout(function(){!e.status||(e.trickle(),c())},t.trickleSpeed)};return t.trickle&&c(),this},e.done=function(c){return!c&&!e.status?this:e.inc(.3+.5*Math.random()).set(1)},e.inc=function(c){var y=e.status;return y?(typeof c!="number"&&(c=(1-y)*i(Math.random()*y,.1,.95)),y=i(y+c,0,.994),e.set(y)):e.start()},e.trickle=function(){return e.inc(Math.random()*t.trickleRate)},function(){var c=0,y=0;e.promise=function(S){return!S||S.state()==="resolved"?this:(y===0&&e.start(),c++,y++,S.always(function(){y--,y===0?(c=0,e.done()):e.set((c-y)/c)}),this)}}(),e.render=function(c){if(e.isRendered())return document.getElementById("nprogress");u(document.documentElement,"nprogress-busy");var y=document.createElement("div");y.id="nprogress",y.innerHTML=t.template;var S=y.querySelector(t.barSelector),k=c?"-100":n(e.status||0),L=document.querySelector(t.parent),H;return l(S,{transition:"all 0 linear",transform:"translate3d("+k+"%,0,0)"}),t.showSpinner||(H=y.querySelector(t.spinnerSelector),H&&b(H)),L!=document.body&&u(L,"nprogress-custom-parent"),L.appendChild(y),y},e.remove=function(){p(document.documentElement,"nprogress-busy"),p(document.querySelector(t.parent),"nprogress-custom-parent");var c=document.getElementById("nprogress");c&&b(c)},e.isRendered=function(){return!!document.getElementById("nprogress")},e.getPositioningCSS=function(){var c=document.body.style,y="WebkitTransform"in c?"Webkit":"MozTransform"in c?"Moz":"msTransform"in c?"ms":"OTransform"in c?"O":"";return y+"Perspective"in c?"translate3d":y+"Transform"in c?"translate":"margin"};function i(c,y,S){return c<y?y:c>S?S:c}function n(c){return(-1+c)*100}function s(c,y,S){var k;return t.positionUsing==="translate3d"?k={transform:"translate3d("+n(c)+"%,0,0)"}:t.positionUsing==="translate"?k={transform:"translate("+n(c)+"%,0)"}:k={"margin-left":n(c)+"%"},k.transition="all "+y+"ms "+S,k}var r=function(){var c=[];function y(){var S=c.shift();S&&S(y)}return function(S){c.push(S),c.length==1&&y()}}(),l=function(){var c=["Webkit","O","Moz","ms"],y={};function S(M){return M.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(g,A){return A.toUpperCase()})}function k(M){var g=document.body.style;if(M in g)return M;for(var A=c.length,R=M.charAt(0).toUpperCase()+M.slice(1),F;A--;)if(F=c[A]+R,F in g)return F;return M}function L(M){return M=S(M),y[M]||(y[M]=k(M))}function H(M,g,A){g=L(g),M.style[g]=A}return function(M,g){var A=arguments,R,F;if(A.length==2)for(R in g)F=g[R],F!==void 0&&g.hasOwnProperty(R)&&H(M,R,F);else H(M,A[1],A[2])}}();function h(c,y){var S=typeof c=="string"?c:m(c);return S.indexOf(" "+y+" ")>=0}function u(c,y){var S=m(c),k=S+y;h(S,y)||(c.className=k.substring(1))}function p(c,y){var S=m(c),k;!h(c,y)||(k=S.replace(" "+y+" "," "),c.className=k.substring(1,k.length-1))}function m(c){return(" "+(c.className||"")+" ").replace(/\s+/gi," ")}function b(c){c&&c.parentNode&&c.parentNode.removeChild(c)}return e})});(function(){var e=t();function t(){if(typeof window.CustomEvent=="function")return window.CustomEvent;function s(r,l){l=l||{bubbles:!1,cancelable:!1,detail:void 0};var h=document.createEvent("CustomEvent");return h.initCustomEvent(r,l.bubbles,l.cancelable,l.detail),h}return s.prototype=window.Event.prototype,s}function i(s,r){var l=document.createElement("input");return l.type="hidden",l.name=s,l.value=r,l}function n(s,r){var l=s.getAttribute("data-to"),h=i("_method",s.getAttribute("data-method")),u=i("_csrf_token",s.getAttribute("data-csrf")),p=document.createElement("form"),m=s.getAttribute("target");p.method=s.getAttribute("data-method")==="get"?"get":"post",p.action=l,p.style.display="hidden",m?p.target=m:r&&(p.target="_blank"),p.appendChild(u),p.appendChild(h),document.body.appendChild(p),p.submit()}window.addEventListener("click",function(s){var r=s.target;if(!s.defaultPrevented)for(;r&&r.getAttribute;){var l=new e("phoenix.link.click",{bubbles:!0,cancelable:!0});if(!r.dispatchEvent(l))return s.preventDefault(),s.stopImmediatePropagation(),!1;if(r.getAttribute("data-method"))return n(r,s.metaKey||s.shiftKey),s.preventDefault(),!1;r=r.parentNode}},!1),window.addEventListener("phoenix.link.click",function(s){var r=s.target.getAttribute("data-confirm");r&&!window.confirm(r)&&s.preventDefault()},!1)})();var Hi=e=>typeof e=="function"?e:function(){return e},Ya=typeof self<"u"?self:null,Ni=typeof window<"u"?window:null,Fi=Ya||Ni||Fi,Xa="2.0.0",mt={connecting:0,open:1,closing:2,closed:3},Za=1e4,Qa=1e3,Qe={closed:"closed",errored:"errored",joined:"joined",joining:"joining",leaving:"leaving"},At={close:"phx_close",error:"phx_error",join:"phx_join",reply:"phx_reply",leave:"phx_leave"},As={longpoll:"longpoll",websocket:"websocket"},eh={complete:4},Sn=class{constructor(e,t,i,n){this.channel=e,this.event=t,this.payload=i||function(){return{}},this.receivedResp=null,this.timeout=n,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}resend(e){this.timeout=e,this.reset(),this.send()}send(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}receive(e,t){return this.hasReceived(e)&&t(this.receivedResp.response),this.recHooks.push({status:e,callback:t}),this}reset(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}matchReceive({status:e,response:t,_ref:i}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}cancelRefEvent(){!this.refEvent||this.channel.off(this.refEvent)}cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}startTimeout(){this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,e=>{this.cancelRefEvent(),this.cancelTimeout(),this.receivedResp=e,this.matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}trigger(e,t){this.channel.trigger(this.refEvent,{status:e,response:t})}},Wr=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=null,this.tries=0}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}},th=class{constructor(e,t,i){this.state=Qe.closed,this.topic=e,this.params=Hi(t||{}),this.socket=i,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new Sn(this,At.join,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new Wr(()=>{this.socket.isConnected()&&this.rejoin()},this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError(()=>this.rejoinTimer.reset())),this.stateChangeRefs.push(this.socket.onOpen(()=>{this.rejoinTimer.reset(),this.isErrored()&&this.rejoin()})),this.joinPush.receive("ok",()=>{this.state=Qe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this.joinPush.receive("error",()=>{this.state=Qe.errored,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.onClose(()=>{this.rejoinTimer.reset(),this.socket.hasLogger()&&this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=Qe.closed,this.socket.remove(this)}),this.onError(n=>{this.socket.hasLogger()&&this.socket.log("channel",`error ${this.topic}`,n),this.isJoining()&&this.joinPush.reset(),this.state=Qe.errored,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.joinPush.receive("timeout",()=>{this.socket.hasLogger()&&this.socket.log("channel",`timeout ${this.topic} (${this.joinRef()})`,this.joinPush.timeout),new Sn(this,At.leave,Hi({}),this.timeout).send(),this.state=Qe.errored,this.joinPush.reset(),this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.on(At.reply,(n,s)=>{this.trigger(this.replyEventName(s),n)})}join(e=this.timeout){if(this.joinedOnce)throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=e,this.joinedOnce=!0,this.rejoin(),this.joinPush}onClose(e){this.on(At.close,e)}onError(e){return this.on(At.error,t=>e(t))}on(e,t){let i=this.bindingRef++;return this.bindings.push({event:e,ref:i,callback:t}),i}off(e,t){this.bindings=this.bindings.filter(i=>!(i.event===e&&(typeof t>"u"||t===i.ref)))}canPush(){return this.socket.isConnected()&&this.isJoined()}push(e,t,i=this.timeout){if(t=t||{},!this.joinedOnce)throw new Error(`tried to push '${e}' to '${this.topic}' before joining. Use channel.join() before pushing events`);let n=new Sn(this,e,function(){return t},i);return this.canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}leave(e=this.timeout){this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=Qe.leaving;let t=()=>{this.socket.hasLogger()&&this.socket.log("channel",`leave ${this.topic}`),this.trigger(At.close,"leave")},i=new Sn(this,At.leave,Hi({}),e);return i.receive("ok",()=>t()).receive("timeout",()=>t()),i.send(),this.canPush()||i.trigger("ok",{}),i}onMessage(e,t,i){return t}isMember(e,t,i,n){return this.topic!==e?!1:n&&n!==this.joinRef()?(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:e,event:t,payload:i,joinRef:n}),!1):!0}joinRef(){return this.joinPush.ref}rejoin(e=this.timeout){this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=Qe.joining,this.joinPush.resend(e))}trigger(e,t,i,n){let s=this.onMessage(e,t,i,n);if(t&&!s)throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");let r=this.bindings.filter(l=>l.event===e);for(let l=0;l<r.length;l++)r[l].callback(s,i,n||this.joinRef())}replyEventName(e){return`chan_reply_${e}`}isClosed(){return this.state===Qe.closed}isErrored(){return this.state===Qe.errored}isJoined(){return this.state===Qe.joined}isJoining(){return this.state===Qe.joining}isLeaving(){return this.state===Qe.leaving}},_n=class{static request(e,t,i,n,s,r,l){if(Fi.XDomainRequest){let h=new Fi.XDomainRequest;return this.xdomainRequest(h,e,t,n,s,r,l)}else{let h=new Fi.XMLHttpRequest;return this.xhrRequest(h,e,t,i,n,s,r,l)}}static xdomainRequest(e,t,i,n,s,r,l){return e.timeout=s,e.open(t,i),e.onload=()=>{let h=this.parseJSON(e.responseText);l&&l(h)},r&&(e.ontimeout=r),e.onprogress=()=>{},e.send(n),e}static xhrRequest(e,t,i,n,s,r,l,h){return e.open(t,i,!0),e.timeout=r,e.setRequestHeader("Content-Type",n),e.onerror=()=>h&&h(null),e.onreadystatechange=()=>{if(e.readyState===eh.complete&&h){let u=this.parseJSON(e.responseText);h(u)}},l&&(e.ontimeout=l),e.send(s),e}static parseJSON(e){if(!e||e==="")return null;try{return JSON.parse(e)}catch{return console&&console.log("failed to parse JSON response",e),null}}static serialize(e,t){let i=[];for(var n in e){if(!Object.prototype.hasOwnProperty.call(e,n))continue;let s=t?`${t}[${n}]`:n,r=e[n];typeof r=="object"?i.push(this.serialize(r,s)):i.push(encodeURIComponent(s)+"="+encodeURIComponent(r))}return i.join("&")}static appendParams(e,t){if(Object.keys(t).length===0)return e;let i=e.match(/\?/)?"&":"?";return`${e}${i}${this.serialize(t)}`}},Ui=class{constructor(e){this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.reqs=new Set,this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(e),this.readyState=mt.connecting,this.poll()}normalizeEndpoint(e){return e.replace("ws://","http://").replace("wss://","https://").replace(new RegExp("(.*)/"+As.websocket),"$1/"+As.longpoll)}endpointURL(){return _n.appendParams(this.pollEndpoint,{token:this.token})}closeAndRetry(e,t,i){this.close(e,t,i),this.readyState=mt.connecting}ontimeout(){this.onerror("timeout"),this.closeAndRetry(1005,"timeout",!1)}isActive(){return this.readyState===mt.open||this.readyState===mt.connecting}poll(){this.ajax("GET",null,()=>this.ontimeout(),e=>{if(e){var{status:t,token:i,messages:n}=e;this.token=i}else t=0;switch(t){case 200:n.forEach(s=>{setTimeout(()=>this.onmessage({data:s}),0)}),this.poll();break;case 204:this.poll();break;case 410:this.readyState=mt.open,this.onopen({}),this.poll();break;case 403:this.onerror(403),this.close(1008,"forbidden",!1);break;case 0:case 500:this.onerror(500),this.closeAndRetry(1011,"internal server error",500);break;default:throw new Error(`unhandled poll status ${t}`)}})}send(e){this.ajax("POST",e,()=>this.onerror("timeout"),t=>{(!t||t.status!==200)&&(this.onerror(t&&t.status),this.closeAndRetry(1011,"internal server error",!1))})}close(e,t,i){for(let s of this.reqs)s.abort();this.readyState=mt.closed;let n=Object.assign({code:1e3,reason:void 0,wasClean:!0},{code:e,reason:t,wasClean:i});typeof CloseEvent<"u"?this.onclose(new CloseEvent("close",n)):this.onclose(n)}ajax(e,t,i,n){let s,r=()=>{this.reqs.delete(s),i()};s=_n.request(e,this.endpointURL(),"application/json",t,this.timeout,r,l=>{this.reqs.delete(s),this.isActive()&&n(l)}),this.reqs.add(s)}};var kn={HEADER_LENGTH:1,META_LENGTH:4,KINDS:{push:0,reply:1,broadcast:2},encode(e,t){if(e.payload.constructor===ArrayBuffer)return t(this.binaryEncode(e));{let i=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(i))}},decode(e,t){if(e.constructor===ArrayBuffer)return t(this.binaryDecode(e));{let[i,n,s,r,l]=JSON.parse(e);return t({join_ref:i,ref:n,topic:s,event:r,payload:l})}},binaryEncode(e){let{join_ref:t,ref:i,event:n,topic:s,payload:r}=e,l=this.META_LENGTH+t.length+i.length+s.length+n.length,h=new ArrayBuffer(this.HEADER_LENGTH+l),u=new DataView(h),p=0;u.setUint8(p++,this.KINDS.push),u.setUint8(p++,t.length),u.setUint8(p++,i.length),u.setUint8(p++,s.length),u.setUint8(p++,n.length),Array.from(t,b=>u.setUint8(p++,b.charCodeAt(0))),Array.from(i,b=>u.setUint8(p++,b.charCodeAt(0))),Array.from(s,b=>u.setUint8(p++,b.charCodeAt(0))),Array.from(n,b=>u.setUint8(p++,b.charCodeAt(0)));var m=new Uint8Array(h.byteLength+r.byteLength);return m.set(new Uint8Array(h),0),m.set(new Uint8Array(r),h.byteLength),m.buffer},binaryDecode(e){let t=new DataView(e),i=t.getUint8(0),n=new TextDecoder;switch(i){case this.KINDS.push:return this.decodePush(e,t,n);case this.KINDS.reply:return this.decodeReply(e,t,n);case this.KINDS.broadcast:return this.decodeBroadcast(e,t,n)}},decodePush(e,t,i){let n=t.getUint8(1),s=t.getUint8(2),r=t.getUint8(3),l=this.HEADER_LENGTH+this.META_LENGTH-1,h=i.decode(e.slice(l,l+n));l=l+n;let u=i.decode(e.slice(l,l+s));l=l+s;let p=i.decode(e.slice(l,l+r));l=l+r;let m=e.slice(l,e.byteLength);return{join_ref:h,ref:null,topic:u,event:p,payload:m}},decodeReply(e,t,i){let n=t.getUint8(1),s=t.getUint8(2),r=t.getUint8(3),l=t.getUint8(4),h=this.HEADER_LENGTH+this.META_LENGTH,u=i.decode(e.slice(h,h+n));h=h+n;let p=i.decode(e.slice(h,h+s));h=h+s;let m=i.decode(e.slice(h,h+r));h=h+r;let b=i.decode(e.slice(h,h+l));h=h+l;let c=e.slice(h,e.byteLength),y={status:b,response:c};return{join_ref:u,ref:p,topic:m,event:At.reply,payload:y}},decodeBroadcast(e,t,i){let n=t.getUint8(1),s=t.getUint8(2),r=this.HEADER_LENGTH+2,l=i.decode(e.slice(r,r+n));r=r+n;let h=i.decode(e.slice(r,r+s));r=r+s;let u=e.slice(r,e.byteLength);return{join_ref:null,ref:null,topic:l,event:h,payload:u}}},qr=class{constructor(e,t={}){this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=t.timeout||Za,this.transport=t.transport||Fi.WebSocket||Ui,this.establishedConnections=0,this.defaultEncoder=kn.encode.bind(kn),this.defaultDecoder=kn.decode.bind(kn),this.closeWasClean=!1,this.binaryType=t.binaryType||"arraybuffer",this.connectClock=1,this.transport!==Ui?(this.encode=t.encode||this.defaultEncoder,this.decode=t.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder);let i=null;Ni&&Ni.addEventListener&&(Ni.addEventListener("pagehide",n=>{this.conn&&(this.disconnect(),i=this.connectClock)}),Ni.addEventListener("pageshow",n=>{i===this.connectClock&&(i=null,this.connect())})),this.heartbeatIntervalMs=t.heartbeatIntervalMs||3e4,this.rejoinAfterMs=n=>t.rejoinAfterMs?t.rejoinAfterMs(n):[1e3,2e3,5e3][n-1]||1e4,this.reconnectAfterMs=n=>t.reconnectAfterMs?t.reconnectAfterMs(n):[10,50,100,150,200,250,500,1e3,2e3][n-1]||5e3,this.logger=t.logger||null,this.longpollerTimeout=t.longpollerTimeout||2e4,this.params=Hi(t.params||{}),this.endPoint=`${e}/${As.websocket}`,this.vsn=t.vsn||Xa,this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new Wr(()=>{this.teardown(()=>this.connect())},this.reconnectAfterMs)}getLongPollTransport(){return Ui}replaceTransport(e){this.connectClock++,this.closeWasClean=!0,this.reconnectTimer.reset(),this.sendBuffer=[],this.conn&&(this.conn.close(),this.conn=null),this.transport=e}protocol(){return location.protocol.match(/^https/)?"wss":"ws"}endPointURL(){let e=_n.appendParams(_n.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return e.charAt(0)!=="/"?e:e.charAt(1)==="/"?`${this.protocol()}:${e}`:`${this.protocol()}://${location.host}${e}`}disconnect(e,t,i){this.connectClock++,this.closeWasClean=!0,this.reconnectTimer.reset(),this.teardown(e,t,i)}connect(e){e&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=Hi(e)),!this.conn&&(this.connectClock++,this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=()=>this.onConnOpen(),this.conn.onerror=t=>this.onConnError(t),this.conn.onmessage=t=>this.onConnMessage(t),this.conn.onclose=t=>this.onConnClose(t))}log(e,t,i){this.logger(e,t,i)}hasLogger(){return this.logger!==null}onOpen(e){let t=this.makeRef();return this.stateChangeCallbacks.open.push([t,e]),t}onClose(e){let t=this.makeRef();return this.stateChangeCallbacks.close.push([t,e]),t}onError(e){let t=this.makeRef();return this.stateChangeCallbacks.error.push([t,e]),t}onMessage(e){let t=this.makeRef();return this.stateChangeCallbacks.message.push([t,e]),t}ping(e){if(!this.isConnected())return!1;let t=this.makeRef(),i=Date.now();this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:t});let n=this.onMessage(s=>{s.ref===t&&(this.off([n]),e(Date.now()-i))});return!0}onConnOpen(){this.hasLogger()&&this.log("transport",`connected to ${this.endPointURL()}`),this.closeWasClean=!1,this.establishedConnections++,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach(([,e])=>e())}heartbeatTimeout(){this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.abnormalClose("heartbeat timeout"))}resetHeartbeat(){this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,clearTimeout(this.heartbeatTimer),setTimeout(()=>this.sendHeartbeat(),this.heartbeatIntervalMs))}teardown(e,t,i){if(!this.conn)return e&&e();this.waitForBufferDone(()=>{this.conn&&(t?this.conn.close(t,i||""):this.conn.close()),this.waitForSocketClosed(()=>{this.conn&&(this.conn.onclose=function(){},this.conn=null),e&&e()})})}waitForBufferDone(e,t=1){if(t===5||!this.conn||!this.conn.bufferedAmount){e();return}setTimeout(()=>{this.waitForBufferDone(e,t+1)},150*t)}waitForSocketClosed(e,t=1){if(t===5||!this.conn||this.conn.readyState===mt.closed){e();return}setTimeout(()=>{this.waitForSocketClosed(e,t+1)},150*t)}onConnClose(e){let t=e&&e.code;this.hasLogger()&&this.log("transport","close",e),this.triggerChanError(),clearTimeout(this.heartbeatTimer),!this.closeWasClean&&t!==1e3&&this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(([,i])=>i(e))}onConnError(e){this.hasLogger()&&this.log("transport",e);let t=this.transport,i=this.establishedConnections;this.stateChangeCallbacks.error.forEach(([,n])=>{n(e,t,i)}),(t===this.transport||i>0)&&this.triggerChanError()}triggerChanError(){this.channels.forEach(e=>{e.isErrored()||e.isLeaving()||e.isClosed()||e.trigger(At.error)})}connectionState(){switch(this.conn&&this.conn.readyState){case mt.connecting:return"connecting";case mt.open:return"open";case mt.closing:return"closing";default:return"closed"}}isConnected(){return this.connectionState()==="open"}remove(e){this.off(e.stateChangeRefs),this.channels=this.channels.filter(t=>t.joinRef()!==e.joinRef())}off(e){for(let t in this.stateChangeCallbacks)this.stateChangeCallbacks[t]=this.stateChangeCallbacks[t].filter(([i])=>e.indexOf(i)===-1)}channel(e,t={}){let i=new th(e,t,this);return this.channels.push(i),i}push(e){if(this.hasLogger()){let{topic:t,event:i,payload:n,ref:s,join_ref:r}=e;this.log("push",`${t} ${i} (${r}, ${s})`,n)}this.isConnected()?this.encode(e,t=>this.conn.send(t)):this.sendBuffer.push(()=>this.encode(e,t=>this.conn.send(t)))}makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}sendHeartbeat(){this.pendingHeartbeatRef&&!this.isConnected()||(this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatTimer=setTimeout(()=>this.heartbeatTimeout(),this.heartbeatIntervalMs))}abnormalClose(e){this.closeWasClean=!1,this.isConnected()&&this.conn.close(Qa,e)}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}onConnMessage(e){this.decode(e.data,t=>{let{topic:i,event:n,payload:s,ref:r,join_ref:l}=t;r&&r===this.pendingHeartbeatRef&&(clearTimeout(this.heartbeatTimer),this.pendingHeartbeatRef=null,setTimeout(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)),this.hasLogger()&&this.log("receive",`${s.status||""} ${i} ${n} ${r&&"("+r+")"||""}`,s);for(let h=0;h<this.channels.length;h++){let u=this.channels[h];!u.isMember(i,n,s,l)||u.trigger(n,s,r,l)}for(let h=0;h<this.stateChangeCallbacks.message.length;h++){let[,u]=this.stateChangeCallbacks.message[h];u(t)}})}leaveOpenTopic(e){let t=this.channels.find(i=>i.topic===e&&(i.isJoined()||i.isJoining()));t&&(this.hasLogger()&&this.log("transport",`leaving duplicate topic "${e}"`),t.leave())}};var mr=Ka(Kr());var vl="consecutive-reloads",ih=10,nh=5e3,sh=1e4,rh=3e4,bl=["phx-click-loading","phx-change-loading","phx-submit-loading","phx-keydown-loading","phx-keyup-loading","phx-blur-loading","phx-focus-loading"],tt="data-phx-component",Ts="data-phx-link",lh="track-static",oh="data-phx-link-state",St="data-phx-ref",zt="data-phx-ref-src",wl="track-uploads",Jt="data-phx-upload-ref",$s="data-phx-preflighted-refs",ah="data-phx-done-refs",Yr="drop-target",Os="data-phx-active-refs",Mn="phx:live-file:updated",Ns="data-phx-skip",Xr="data-phx-prune",Zr="page-loading",Qr="phx-connected",xs="phx-loading",el="phx-no-feedback",tl="phx-error",ui="data-phx-parent-id",js="data-phx-main",qi="data-phx-root-id",hh="trigger-action",Hs="feedback-for",yl="phx-has-focused",uh=["text","textarea","number","email","password","search","tel","url","date","time","datetime-local","color","range"],Sl=["checkbox","radio"],kl="phx-has-submitted",Nt="data-phx-session",di=`[${Nt}]`,il="data-phx-sticky",Ji="data-phx-static",Ps="data-phx-readonly",En="data-phx-disabled",Fs="disable-with",An="data-phx-disable-with-restore",$i="hook",ch="debounce",dh="throttle",Us="update",fh="key",vt="phxPrivate",nl="auto-recover",Cn="phx:live-socket:debug",Ls="phx:live-socket:profiling",Rs="phx:live-socket:latency-sim",ph="progress",sl="mounted",gh=1,mh=200,vh="phx-",bh=3e4,ji="debounce-trigger",Tn="throttled",rl="debounce-prev-key",wh={debounce:300,throttle:300},ll="d",bt="s",et="c",ol="e",al="r",hl="t",yh="p",Sh=class{constructor(e,t,i){this.liveSocket=i,this.entry=e,this.offset=0,this.chunkSize=t,this.chunkTimer=null,this.uploadChannel=i.channel(`lvu:${e.ref}`,{token:e.metadata()})}error(e){clearTimeout(this.chunkTimer),this.uploadChannel.leave(),this.entry.error(e)}upload(){this.uploadChannel.onError(e=>this.error(e)),this.uploadChannel.join().receive("ok",e=>this.readNextChunk()).receive("error",e=>this.error(e))}isDone(){return this.offset>=this.entry.file.size}readNextChunk(){let e=new window.FileReader,t=this.entry.file.slice(this.offset,this.chunkSize+this.offset);e.onload=i=>{if(i.target.error===null)this.offset+=i.target.result.byteLength,this.pushChunk(i.target.result);else return $e("Read error: "+i.target.error)},e.readAsArrayBuffer(t)}pushChunk(e){!this.uploadChannel.isJoined()||this.uploadChannel.push("chunk",e).receive("ok",()=>{this.entry.progress(this.offset/this.entry.file.size*100),this.isDone()||(this.chunkTimer=setTimeout(()=>this.readNextChunk(),this.liveSocket.getLatencySim()||0))})}},$e=(e,t)=>console.error&&console.error(e,t),Ot=e=>{let t=typeof e;return t==="number"||t==="string"&&/^(0|[1-9]\d*)$/.test(e)};function kh(){let e=new Set,t=document.querySelectorAll("*[id]");for(let i=0,n=t.length;i<n;i++)e.has(t[i].id)?console.error(`Multiple IDs detected: ${t[i].id}. Ensure unique element ids.`):e.add(t[i].id)}var _h=(e,t,i,n)=>{e.liveSocket.isDebugEnabled()&&console.log(`${e.id} ${t}: ${i} - `,n)},Ds=e=>typeof e=="function"?e:function(){return e},In=e=>JSON.parse(JSON.stringify(e)),Wi=(e,t,i)=>{do{if(e.matches(`[${t}]`))return e;e=e.parentElement||e.parentNode}while(e!==null&&e.nodeType===1&&!(i&&i.isSameNode(e)||e.matches(di)));return null},Bi=e=>e!==null&&typeof e=="object"&&!(e instanceof Array),Eh=(e,t)=>JSON.stringify(e)===JSON.stringify(t),ul=e=>{for(let t in e)return!1;return!0},Ct=(e,t)=>e&&t(e),Ah=function(e,t,i,n){e.forEach(s=>{new Sh(s,i.config.chunk_size,n).upload()})},_l={canPushState(){return typeof history.pushState<"u"},dropLocal(e,t,i){return e.removeItem(this.localKey(t,i))},updateLocal(e,t,i,n,s){let r=this.getLocal(e,t,i),l=this.localKey(t,i),h=r===null?n:s(r);return e.setItem(l,JSON.stringify(h)),h},getLocal(e,t,i){return JSON.parse(e.getItem(this.localKey(t,i)))},updateCurrentState(e){!this.canPushState()||history.replaceState(e(history.state||{}),"",window.location.href)},pushState(e,t,i){if(this.canPushState()){if(i!==window.location.href){if(t.type=="redirect"&&t.scroll){let s=history.state||{};s.scroll=t.scroll,history.replaceState(s,"",window.location.href)}delete t.scroll,history[e+"State"](t,"",i||null);let n=this.getHashTargetEl(window.location.hash);n?n.scrollIntoView():t.type==="redirect"&&window.scroll(0,0)}}else this.redirect(i)},setCookie(e,t){document.cookie=`${e}=${t}`},getCookie(e){return document.cookie.replace(new RegExp(`(?:(?:^|.*;s*)${e}s*=s*([^;]*).*$)|^.*$`),"$1")},redirect(e,t){t&&_l.setCookie("__phoenix_flash__",t+"; max-age=60000; path=/"),window.location=e},localKey(e,t){return`${e}-${t}`},getHashTargetEl(e){let t=e.toString().substring(1);if(t!=="")return document.getElementById(t)||document.querySelector(`a[name="${t}"]`)}},wt=_l,ft={byId(e){return document.getElementById(e)||$e(`no id found for ${e}`)},removeClass(e,t){e.classList.remove(t),e.classList.length===0&&e.removeAttribute("class")},all(e,t,i){if(!e)return[];let n=Array.from(e.querySelectorAll(t));return i?n.forEach(i):n},childNodeLength(e){let t=document.createElement("template");return t.innerHTML=e,t.content.childElementCount},isUploadInput(e){return e.type==="file"&&e.getAttribute(Jt)!==null},findUploadInputs(e){return this.all(e,`input[type="file"][${Jt}]`)},findComponentNodeList(e,t){return this.filterWithinSameLiveView(this.all(e,`[${tt}="${t}"]`),e)},isPhxDestroyed(e){return!!(e.id&&ft.private(e,"destroyed"))},markPhxChildDestroyed(e){this.isPhxChild(e)&&e.setAttribute(Nt,""),this.putPrivate(e,"destroyed",!0)},findPhxChildrenInFragment(e,t){let i=document.createElement("template");return i.innerHTML=e,this.findPhxChildren(i.content,t)},isIgnored(e,t){return(e.getAttribute(t)||e.getAttribute("data-phx-update"))==="ignore"},isPhxUpdate(e,t,i){return e.getAttribute&&i.indexOf(e.getAttribute(t))>=0},findPhxSticky(e){return this.all(e,`[${il}]`)},findPhxChildren(e,t){return this.all(e,`${di}[${ui}="${t}"]`)},findParentCIDs(e,t){let i=new Set(t),n=t.reduce((s,r)=>{let l=`[${tt}="${r}"] [${tt}]`;return this.filterWithinSameLiveView(this.all(e,l),e).map(h=>parseInt(h.getAttribute(tt))).forEach(h=>s.delete(h)),s},i);return n.size===0?new Set(t):n},filterWithinSameLiveView(e,t){return t.querySelector(di)?e.filter(i=>this.withinSameLiveView(i,t)):e},withinSameLiveView(e,t){for(;e=e.parentNode;){if(e.isSameNode(t))return!0;if(e.getAttribute(Nt)!==null)return!1}},private(e,t){return e[vt]&&e[vt][t]},deletePrivate(e,t){e[vt]&&delete e[vt][t]},putPrivate(e,t,i){e[vt]||(e[vt]={}),e[vt][t]=i},updatePrivate(e,t,i,n){let s=this.private(e,t);s===void 0?this.putPrivate(e,t,n(i)):this.putPrivate(e,t,n(s))},copyPrivates(e,t){t[vt]&&(e[vt]=t[vt])},putTitle(e){let t=document.querySelector("title"),{prefix:i,suffix:n}=t.dataset;document.title=`${i||""}${e}${n||""}`},debounce(e,t,i,n,s,r,l,h){let u=e.getAttribute(i),p=e.getAttribute(s);u===""&&(u=n),p===""&&(p=r);let m=u||p;switch(m){case null:return h();case"blur":this.once(e,"debounce-blur")&&e.addEventListener("blur",()=>h());return;default:let b=parseInt(m),c=()=>p?this.deletePrivate(e,Tn):h(),y=this.incCycle(e,ji,c);if(isNaN(b))return $e(`invalid throttle/debounce value: ${m}`);if(p){let k=!1;if(t.type==="keydown"){let L=this.private(e,rl);this.putPrivate(e,rl,t.key),k=L!==t.key}if(!k&&this.private(e,Tn))return!1;h(),this.putPrivate(e,Tn,!0),setTimeout(()=>{l()&&this.triggerCycle(e,ji)},b)}else setTimeout(()=>{l()&&this.triggerCycle(e,ji,y)},b);let S=e.form;S&&this.once(S,"bind-debounce")&&S.addEventListener("submit",()=>{Array.from(new FormData(S).entries(),([k])=>{let L=S.querySelector(`[name="${k}"]`);this.incCycle(L,ji),this.deletePrivate(L,Tn)})}),this.once(e,"bind-debounce")&&e.addEventListener("blur",()=>this.triggerCycle(e,ji))}},triggerCycle(e,t,i){let[n,s]=this.private(e,t);i||(i=n),i===n&&(this.incCycle(e,t),s())},once(e,t){return this.private(e,t)===!0?!1:(this.putPrivate(e,t,!0),!0)},incCycle(e,t,i=function(){}){let[n]=this.private(e,t)||[0,i];return n++,this.putPrivate(e,t,[n,i]),n},discardError(e,t,i){let n=t.getAttribute&&t.getAttribute(i),s=n&&e.querySelector(`[id="${n}"], [name="${n}"], [name="${n}[]"]`);!s||this.private(s,yl)||this.private(s.form,kl)||t.classList.add(el)},showError(e,t){(e.id||e.name)&&this.all(e.form,`[${t}="${e.id}"], [${t}="${e.name}"]`,i=>{this.removeClass(i,el)})},isPhxChild(e){return e.getAttribute&&e.getAttribute(ui)},isPhxSticky(e){return e.getAttribute&&e.getAttribute(il)!==null},firstPhxChild(e){return this.isPhxChild(e)?e:this.all(e,`[${ui}]`)[0]},dispatchEvent(e,t,i={}){let s={bubbles:i.bubbles===void 0?!0:!!i.bubbles,cancelable:!0,detail:i.detail||{}},r=t==="click"?new MouseEvent("click",s):new CustomEvent(t,s);e.dispatchEvent(r)},cloneNode(e,t){if(typeof t>"u")return e.cloneNode(!0);{let i=e.cloneNode(!1);return i.innerHTML=t,i}},mergeAttrs(e,t,i={}){let n=i.exclude||[],s=i.isIgnored,r=t.attributes;for(let h=r.length-1;h>=0;h--){let u=r[h].name;n.indexOf(u)<0&&e.setAttribute(u,t.getAttribute(u))}let l=e.attributes;for(let h=l.length-1;h>=0;h--){let u=l[h].name;s?u.startsWith("data-")&&!t.hasAttribute(u)&&e.removeAttribute(u):t.hasAttribute(u)||e.removeAttribute(u)}},mergeFocusedInput(e,t){e instanceof HTMLSelectElement||ft.mergeAttrs(e,t,{exclude:["value"]}),t.readOnly?e.setAttribute("readonly",!0):e.removeAttribute("readonly")},hasSelectionRange(e){return e.setSelectionRange&&(e.type==="text"||e.type==="textarea")},restoreFocus(e,t,i){if(!ft.isTextualInput(e))return;let n=e.matches(":focus");e.readOnly&&e.blur(),n||e.focus(),this.hasSelectionRange(e)&&e.setSelectionRange(t,i)},isFormInput(e){return/^(?:input|select|textarea)$/i.test(e.tagName)&&e.type!=="button"},syncAttrsToProps(e){e instanceof HTMLInputElement&&Sl.indexOf(e.type.toLocaleLowerCase())>=0&&(e.checked=e.getAttribute("checked")!==null)},isTextualInput(e){return uh.indexOf(e.type)>=0},isNowTriggerFormExternal(e,t){return e.getAttribute&&e.getAttribute(t)!==null},syncPendingRef(e,t,i){let n=e.getAttribute(St);if(n===null)return!0;let s=e.getAttribute(zt);return ft.isFormInput(e)||e.getAttribute(i)!==null?(ft.isUploadInput(e)&&ft.mergeAttrs(e,t,{isIgnored:!0}),ft.putPrivate(e,St,t),!1):(bl.forEach(r=>{e.classList.contains(r)&&t.classList.add(r)}),t.setAttribute(St,n),t.setAttribute(zt,s),!0)},cleanChildNodes(e,t){if(ft.isPhxUpdate(e,t,["append","prepend"])){let i=[];e.childNodes.forEach(n=>{n.id||(n.nodeType===Node.TEXT_NODE&&n.nodeValue.trim()===""||$e(`only HTML element tags with an id are allowed inside containers with phx-update.

removing illegal node: "${(n.outerHTML||n.nodeValue).trim()}"

`),i.push(n))}),i.forEach(n=>n.remove())}},replaceRootContainer(e,t,i){let n=new Set(["id",Nt,Ji,js,qi]);if(e.tagName.toLowerCase()===t.toLowerCase())return Array.from(e.attributes).filter(s=>!n.has(s.name.toLowerCase())).forEach(s=>e.removeAttribute(s.name)),Object.keys(i).filter(s=>!n.has(s.toLowerCase())).forEach(s=>e.setAttribute(s,i[s])),e;{let s=document.createElement(t);return Object.keys(i).forEach(r=>s.setAttribute(r,i[r])),n.forEach(r=>s.setAttribute(r,e.getAttribute(r))),s.innerHTML=e.innerHTML,e.replaceWith(s),s}},getSticky(e,t,i){let n=(ft.private(e,"sticky")||[]).find(([s])=>t===s);if(n){let[s,r,l]=n;return l}else return typeof i=="function"?i():i},deleteSticky(e,t){this.updatePrivate(e,"sticky",[],i=>i.filter(([n,s])=>n!==t))},putSticky(e,t,i){let n=i(e);this.updatePrivate(e,"sticky",[],s=>{let r=s.findIndex(([l])=>t===l);return r>=0?s[r]=[t,i,n]:s.push([t,i,n]),s})},applyStickyOperations(e){let t=ft.private(e,"sticky");!t||t.forEach(([i,n,s])=>this.putSticky(e,i,n))}},_=ft,Ms=class{static isActive(e,t){let i=t._phxRef===void 0,s=e.getAttribute(Os).split(",").indexOf(Ue.genFileRef(t))>=0;return t.size>0&&(i||s)}static isPreflighted(e,t){return e.getAttribute($s).split(",").indexOf(Ue.genFileRef(t))>=0&&this.isActive(e,t)}constructor(e,t,i){this.ref=Ue.genFileRef(t),this.fileEl=e,this.file=t,this.view=i,this.meta=null,this._isCancelled=!1,this._isDone=!1,this._progress=0,this._lastProgressSent=-1,this._onDone=function(){},this._onElUpdated=this.onElUpdated.bind(this),this.fileEl.addEventListener(Mn,this._onElUpdated)}metadata(){return this.meta}progress(e){this._progress=Math.floor(e),this._progress>this._lastProgressSent&&(this._progress>=100?(this._progress=100,this._lastProgressSent=100,this._isDone=!0,this.view.pushFileProgress(this.fileEl,this.ref,100,()=>{Ue.untrackFile(this.fileEl,this.file),this._onDone()})):(this._lastProgressSent=this._progress,this.view.pushFileProgress(this.fileEl,this.ref,this._progress)))}cancel(){this._isCancelled=!0,this._isDone=!0,this._onDone()}isDone(){return this._isDone}error(e="failed"){this.fileEl.removeEventListener(Mn,this._onElUpdated),this.view.pushFileProgress(this.fileEl,this.ref,{error:e}),Ue.clearFiles(this.fileEl)}onDone(e){this._onDone=()=>{this.fileEl.removeEventListener(Mn,this._onElUpdated),e()}}onElUpdated(){this.fileEl.getAttribute(Os).split(",").indexOf(this.ref)===-1&&this.cancel()}toPreflightPayload(){return{last_modified:this.file.lastModified,name:this.file.name,relative_path:this.file.webkitRelativePath,size:this.file.size,type:this.file.type,ref:this.ref}}uploader(e){if(this.meta.uploader){let t=e[this.meta.uploader]||$e(`no uploader configured for ${this.meta.uploader}`);return{name:this.meta.uploader,callback:t}}else return{name:"channel",callback:Ah}}zipPostFlight(e){this.meta=e.entries[this.ref],this.meta||$e(`no preflight upload response returned with ref ${this.ref}`,{input:this.fileEl,response:e})}},Ch=0,Ue=class{static genFileRef(e){let t=e._phxRef;return t!==void 0?t:(e._phxRef=(Ch++).toString(),e._phxRef)}static getEntryDataURL(e,t,i){let n=this.activeFiles(e).find(s=>this.genFileRef(s)===t);i(URL.createObjectURL(n))}static hasUploadsInProgress(e){let t=0;return _.findUploadInputs(e).forEach(i=>{i.getAttribute($s)!==i.getAttribute(ah)&&t++}),t>0}static serializeUploads(e){let t=this.activeFiles(e),i={};return t.forEach(n=>{let s={path:e.name},r=e.getAttribute(Jt);i[r]=i[r]||[],s.ref=this.genFileRef(n),s.last_modified=n.lastModified,s.name=n.name||s.ref,s.relative_path=n.webkitRelativePath,s.type=n.type,s.size=n.size,i[r].push(s)}),i}static clearFiles(e){e.value=null,e.removeAttribute(Jt),_.putPrivate(e,"files",[])}static untrackFile(e,t){_.putPrivate(e,"files",_.private(e,"files").filter(i=>!Object.is(i,t)))}static trackFiles(e,t){if(e.getAttribute("multiple")!==null){let i=t.filter(n=>!this.activeFiles(e).find(s=>Object.is(s,n)));_.putPrivate(e,"files",this.activeFiles(e).concat(i)),e.value=null}else _.putPrivate(e,"files",t)}static activeFileInputs(e){let t=_.findUploadInputs(e);return Array.from(t).filter(i=>i.files&&this.activeFiles(i).length>0)}static activeFiles(e){return(_.private(e,"files")||[]).filter(t=>Ms.isActive(e,t))}static inputsAwaitingPreflight(e){let t=_.findUploadInputs(e);return Array.from(t).filter(i=>this.filesAwaitingPreflight(i).length>0)}static filesAwaitingPreflight(e){return this.activeFiles(e).filter(t=>!Ms.isPreflighted(e,t))}constructor(e,t,i){this.view=t,this.onComplete=i,this._entries=Array.from(Ue.filesAwaitingPreflight(e)||[]).map(n=>new Ms(e,n,t)),this.numEntriesInProgress=this._entries.length}entries(){return this._entries}initAdapterUpload(e,t,i){this._entries=this._entries.map(s=>(s.zipPostFlight(e),s.onDone(()=>{this.numEntriesInProgress--,this.numEntriesInProgress===0&&this.onComplete()}),s));let n=this._entries.reduce((s,r)=>{let{name:l,callback:h}=r.uploader(i.uploaders);return s[l]=s[l]||{callback:h,entries:[]},s[l].entries.push(r),s},{});for(let s in n){let{callback:r,entries:l}=n[s];r(l,t,e,i)}}},Th={focusMain(){let e=document.querySelector("main h1, main, h1");if(e){let t=e.tabIndex;e.tabIndex=-1,e.focus(),e.tabIndex=t}},anyOf(e,t){return t.find(i=>e instanceof i)},isFocusable(e,t){return e instanceof HTMLAnchorElement&&e.rel!=="ignore"||e instanceof HTMLAreaElement&&e.href!==void 0||!e.disabled&&this.anyOf(e,[HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement,HTMLButtonElement])||e instanceof HTMLIFrameElement||e.tabIndex>0||!t&&e.tabIndex===0&&e.getAttribute("tabindex")!==null&&e.getAttribute("aria-hidden")!=="true"},attemptFocus(e,t){if(this.isFocusable(e,t))try{e.focus()}catch{}return!!document.activeElement&&document.activeElement.isSameNode(e)},focusFirstInteractive(e){let t=e.firstElementChild;for(;t;){if(this.attemptFocus(t,!0)||this.focusFirstInteractive(t,!0))return!0;t=t.nextElementSibling}},focusFirst(e){let t=e.firstElementChild;for(;t;){if(this.attemptFocus(t)||this.focusFirst(t))return!0;t=t.nextElementSibling}},focusLast(e){let t=e.lastElementChild;for(;t;){if(this.attemptFocus(t)||this.focusLast(t))return!0;t=t.previousElementSibling}}},ci=Th,xh={LiveFileUpload:{activeRefs(){return this.el.getAttribute(Os)},preflightedRefs(){return this.el.getAttribute($s)},mounted(){this.preflightedWas=this.preflightedRefs()},updated(){let e=this.preflightedRefs();this.preflightedWas!==e&&(this.preflightedWas=e,e===""&&this.__view.cancelSubmit(this.el.form)),this.activeRefs()===""&&(this.el.value=null),this.el.dispatchEvent(new CustomEvent(Mn))}},LiveImgPreview:{mounted(){this.ref=this.el.getAttribute("data-phx-entry-ref"),this.inputEl=document.getElementById(this.el.getAttribute(Jt)),Ue.getEntryDataURL(this.inputEl,this.ref,e=>{this.url=e,this.el.src=e})},destroyed(){URL.revokeObjectURL(this.url)}},FocusWrap:{mounted(){this.focusStart=this.el.firstElementChild,this.focusEnd=this.el.lastElementChild,this.focusStart.addEventListener("focus",()=>ci.focusLast(this.el)),this.focusEnd.addEventListener("focus",()=>ci.focusFirst(this.el)),this.el.addEventListener("phx:show-end",()=>this.el.focus()),window.getComputedStyle(this.el).display!=="none"&&ci.focusFirst(this.el)}}},Ph=xh,Lh=class{constructor(e,t,i){let n=new Set,s=new Set([...t.children].map(l=>l.id)),r=[];Array.from(e.children).forEach(l=>{if(l.id&&(n.add(l.id),s.has(l.id))){let h=l.previousElementSibling&&l.previousElementSibling.id;r.push({elementId:l.id,previousElementId:h})}}),this.containerId=t.id,this.updateType=i,this.elementsToModify=r,this.elementIdsToAdd=[...s].filter(l=>!n.has(l))}perform(){let e=_.byId(this.containerId);this.elementsToModify.forEach(t=>{t.previousElementId?Ct(document.getElementById(t.previousElementId),i=>{Ct(document.getElementById(t.elementId),n=>{n.previousElementSibling&&n.previousElementSibling.id==i.id||i.insertAdjacentElement("afterend",n)})}):Ct(document.getElementById(t.elementId),i=>{i.previousElementSibling==null||e.insertAdjacentElement("afterbegin",i)})}),this.updateType=="prepend"&&this.elementIdsToAdd.reverse().forEach(t=>{Ct(document.getElementById(t),i=>e.insertAdjacentElement("afterbegin",i))})}},cl=11;function Rh(e,t){var i=t.attributes,n,s,r,l,h;if(!(t.nodeType===cl||e.nodeType===cl)){for(var u=i.length-1;u>=0;u--)n=i[u],s=n.name,r=n.namespaceURI,l=n.value,r?(s=n.localName||s,h=e.getAttributeNS(r,s),h!==l&&(n.prefix==="xmlns"&&(s=n.name),e.setAttributeNS(r,s,l))):(h=e.getAttribute(s),h!==l&&e.setAttribute(s,l));for(var p=e.attributes,m=p.length-1;m>=0;m--)n=p[m],s=n.name,r=n.namespaceURI,r?(s=n.localName||s,t.hasAttributeNS(r,s)||e.removeAttributeNS(r,s)):t.hasAttribute(s)||e.removeAttribute(s)}}var xn,Dh="http://www.w3.org/1999/xhtml",Ge=typeof document>"u"?void 0:document,Mh=!!Ge&&"content"in Ge.createElement("template"),Ih=!!Ge&&Ge.createRange&&"createContextualFragment"in Ge.createRange();function Oh(e){var t=Ge.createElement("template");return t.innerHTML=e,t.content.childNodes[0]}function Nh(e){xn||(xn=Ge.createRange(),xn.selectNode(Ge.body));var t=xn.createContextualFragment(e);return t.childNodes[0]}function Hh(e){var t=Ge.createElement("body");return t.innerHTML=e,t.childNodes[0]}function Fh(e){return e=e.trim(),Mh?Oh(e):Ih?Nh(e):Hh(e)}function Pn(e,t){var i=e.nodeName,n=t.nodeName,s,r;return i===n?!0:(s=i.charCodeAt(0),r=n.charCodeAt(0),s<=90&&r>=97?i===n.toUpperCase():r<=90&&s>=97?n===i.toUpperCase():!1)}function Uh(e,t){return!t||t===Dh?Ge.createElement(e):Ge.createElementNS(t,e)}function $h(e,t){for(var i=e.firstChild;i;){var n=i.nextSibling;t.appendChild(i),i=n}return t}function Is(e,t,i){e[i]!==t[i]&&(e[i]=t[i],e[i]?e.setAttribute(i,""):e.removeAttribute(i))}var dl={OPTION:function(e,t){var i=e.parentNode;if(i){var n=i.nodeName.toUpperCase();n==="OPTGROUP"&&(i=i.parentNode,n=i&&i.nodeName.toUpperCase()),n==="SELECT"&&!i.hasAttribute("multiple")&&(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),i.selectedIndex=-1)}Is(e,t,"selected")},INPUT:function(e,t){Is(e,t,"checked"),Is(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var i=t.value;e.value!==i&&(e.value=i);var n=e.firstChild;if(n){var s=n.nodeValue;if(s==i||!i&&s==e.placeholder)return;n.nodeValue=i}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var i=-1,n=0,s=e.firstChild,r,l;s;)if(l=s.nodeName&&s.nodeName.toUpperCase(),l==="OPTGROUP")r=s,s=r.firstChild;else{if(l==="OPTION"){if(s.hasAttribute("selected")){i=n;break}n++}s=s.nextSibling,!s&&r&&(s=r.nextSibling,r=null)}e.selectedIndex=i}}},Vi=1,jh=11,fl=3,pl=8;function Vt(){}function Bh(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}function Vh(e){return function(i,n,s){if(s||(s={}),typeof n=="string")if(i.nodeName==="#document"||i.nodeName==="HTML"||i.nodeName==="BODY"){var r=n;n=Ge.createElement("html"),n.innerHTML=r}else n=Fh(n);var l=s.getNodeKey||Bh,h=s.onBeforeNodeAdded||Vt,u=s.onNodeAdded||Vt,p=s.onBeforeElUpdated||Vt,m=s.onElUpdated||Vt,b=s.onBeforeNodeDiscarded||Vt,c=s.onNodeDiscarded||Vt,y=s.onBeforeElChildrenUpdated||Vt,S=s.childrenOnly===!0,k=Object.create(null),L=[];function H(C){L.push(C)}function M(C,D){if(C.nodeType===Vi)for(var T=C.firstChild;T;){var J=void 0;D&&(J=l(T))?H(J):(c(T),T.firstChild&&M(T,D)),T=T.nextSibling}}function g(C,D,T){b(C)!==!1&&(D&&D.removeChild(C),c(C),M(C,T))}function A(C){if(C.nodeType===Vi||C.nodeType===jh)for(var D=C.firstChild;D;){var T=l(D);T&&(k[T]=D),A(D),D=D.nextSibling}}A(i);function R(C){u(C);for(var D=C.firstChild;D;){var T=D.nextSibling,J=l(D);if(J){var he=k[J];he&&Pn(D,he)?(D.parentNode.replaceChild(he,D),O(he,D)):R(D)}else R(D);D=T}}function F(C,D,T){for(;D;){var J=D.nextSibling;(T=l(D))?H(T):g(D,C,!0),D=J}}function O(C,D,T){var J=l(D);J&&delete k[J],!(!T&&(p(C,D)===!1||(e(C,D),m(C),y(C,D)===!1)))&&(C.nodeName!=="TEXTAREA"?z(C,D):dl.TEXTAREA(C,D))}function z(C,D){var T=D.firstChild,J=C.firstChild,he,pe,B,V,ue;e:for(;T;){for(V=T.nextSibling,he=l(T);J;){if(B=J.nextSibling,T.isSameNode&&T.isSameNode(J)){T=V,J=B;continue e}pe=l(J);var ce=J.nodeType,we=void 0;if(ce===T.nodeType&&(ce===Vi?(he?he!==pe&&((ue=k[he])?B===ue?we=!1:(C.insertBefore(ue,J),pe?H(pe):g(J,C,!0),J=ue):we=!1):pe&&(we=!1),we=we!==!1&&Pn(J,T),we&&O(J,T)):(ce===fl||ce==pl)&&(we=!0,J.nodeValue!==T.nodeValue&&(J.nodeValue=T.nodeValue))),we){T=V,J=B;continue e}pe?H(pe):g(J,C,!0),J=B}if(he&&(ue=k[he])&&Pn(ue,T))C.appendChild(ue),O(ue,T);else{var Ve=h(T);Ve!==!1&&(Ve&&(T=Ve),T.actualize&&(T=T.actualize(C.ownerDocument||Ge)),C.appendChild(T),R(T))}T=V,J=B}F(C,J,pe);var ht=dl[C.nodeName];ht&&ht(C,D)}var U=i,W=U.nodeType,N=n.nodeType;if(!S){if(W===Vi)N===Vi?Pn(i,n)||(c(i),U=$h(i,Uh(n.nodeName,n.namespaceURI))):U=n;else if(W===fl||W===pl){if(N===W)return U.nodeValue!==n.nodeValue&&(U.nodeValue=n.nodeValue),U;U=n}}if(U===n)c(i);else{if(n.isSameNode&&n.isSameNode(U))return;if(O(U,n,S),L)for(var q=0,se=L.length;q<se;q++){var X=k[L[q]];X&&g(X,X.parentNode,!1)}}return!S&&U!==i&&i.parentNode&&(U.actualize&&(U=U.actualize(i.ownerDocument||Ge)),i.parentNode.replaceChild(U,i)),U}}var zh=Vh(Rh),gl=zh,Ln=class{static patchEl(e,t,i){gl(e,t,{childrenOnly:!1,onBeforeElUpdated:(n,s)=>{if(i&&i.isSameNode(n)&&_.isFormInput(n))return _.mergeFocusedInput(n,s),!1}})}constructor(e,t,i,n,s){this.view=e,this.liveSocket=e.liveSocket,this.container=t,this.id=i,this.rootID=e.root.id,this.html=n,this.targetCID=s,this.cidPatch=Ot(this.targetCID),this.callbacks={beforeadded:[],beforeupdated:[],beforephxChildAdded:[],afteradded:[],afterupdated:[],afterdiscarded:[],afterphxChildAdded:[],aftertransitionsDiscarded:[]}}before(e,t){this.callbacks[`before${e}`].push(t)}after(e,t){this.callbacks[`after${e}`].push(t)}trackBefore(e,...t){this.callbacks[`before${e}`].forEach(i=>i(...t))}trackAfter(e,...t){this.callbacks[`after${e}`].forEach(i=>i(...t))}markPrunableContentForRemoval(){_.all(this.container,"[phx-update=append] > *, [phx-update=prepend] > *",e=>{e.setAttribute(Xr,"")})}perform(){let{view:e,liveSocket:t,container:i,html:n}=this,s=this.isCIDPatch()?this.targetCIDContainer(n):i;if(this.isCIDPatch()&&!s)return;let r=t.getActiveElement(),{selectionStart:l,selectionEnd:h}=r&&_.hasSelectionRange(r)?r:{},u=t.binding(Us),p=t.binding(Hs),m=t.binding(Fs),b=t.binding(hh),c=t.binding("remove"),y=[],S=[],k=[],L=[],H=null,M=t.time("premorph container prep",()=>this.buildDiffHTML(i,n,u,s));return this.trackBefore("added",i),this.trackBefore("updated",i,i),t.time("morphdom",()=>{gl(s,M,{childrenOnly:s.getAttribute(tt)===null,getNodeKey:g=>_.isPhxDestroyed(g)?null:g.id,onBeforeNodeAdded:g=>(this.trackBefore("added",g),g),onNodeAdded:g=>{g instanceof HTMLImageElement&&g.srcset?g.srcset=g.srcset:g instanceof HTMLVideoElement&&g.autoplay&&g.play(),_.isNowTriggerFormExternal(g,b)&&(H=g),_.discardError(s,g,p),(_.isPhxChild(g)&&e.ownsElement(g)||_.isPhxSticky(g)&&e.ownsElement(g.parentNode))&&this.trackAfter("phxChildAdded",g),y.push(g)},onNodeDiscarded:g=>{(_.isPhxChild(g)||_.isPhxSticky(g))&&t.destroyViewByEl(g),this.trackAfter("discarded",g)},onBeforeNodeDiscarded:g=>g.getAttribute&&g.getAttribute(Xr)!==null?!0:g.parentNode!==null&&_.isPhxUpdate(g.parentNode,u,["append","prepend"])&&g.id?!1:g.getAttribute&&g.getAttribute(c)?(L.push(g),!1):!this.skipCIDSibling(g),onElUpdated:g=>{_.isNowTriggerFormExternal(g,b)&&(H=g),S.push(g)},onBeforeElUpdated:(g,A)=>{if(_.cleanChildNodes(A,u),this.skipCIDSibling(A)||_.isPhxSticky(g))return!1;if(_.isIgnored(g,u)||g.form&&g.form.isSameNode(H))return this.trackBefore("updated",g,A),_.mergeAttrs(g,A,{isIgnored:!0}),S.push(g),_.applyStickyOperations(g),!1;if(g.type==="number"&&g.validity&&g.validity.badInput)return!1;if(!_.syncPendingRef(g,A,m))return _.isUploadInput(g)&&(this.trackBefore("updated",g,A),S.push(g)),_.applyStickyOperations(g),!1;if(_.isPhxChild(A)){let F=g.getAttribute(Nt);return _.mergeAttrs(g,A,{exclude:[Ji]}),F!==""&&g.setAttribute(Nt,F),g.setAttribute(qi,this.rootID),_.applyStickyOperations(g),!1}return _.copyPrivates(A,g),_.discardError(s,A,p),r&&g.isSameNode(r)&&_.isFormInput(g)?(this.trackBefore("updated",g,A),_.mergeFocusedInput(g,A),_.syncAttrsToProps(g),S.push(g),_.applyStickyOperations(g),!1):(_.isPhxUpdate(A,u,["append","prepend"])&&k.push(new Lh(g,A,A.getAttribute(u))),_.syncAttrsToProps(A),_.applyStickyOperations(A),this.trackBefore("updated",g,A),!0)}})}),t.isDebugEnabled()&&kh(),k.length>0&&t.time("post-morph append/prepend restoration",()=>{k.forEach(g=>g.perform())}),t.silenceEvents(()=>_.restoreFocus(r,l,h)),_.dispatchEvent(document,"phx:update"),y.forEach(g=>this.trackAfter("added",g)),S.forEach(g=>this.trackAfter("updated",g)),L.length>0&&(t.transitionRemoves(L),t.requestDOMUpdate(()=>{L.forEach(g=>{let A=_.firstPhxChild(g);A&&t.destroyViewByEl(A),g.remove()}),this.trackAfter("transitionsDiscarded",L)})),H&&(t.disconnect(),H.submit()),!0}isCIDPatch(){return this.cidPatch}skipCIDSibling(e){return e.nodeType===Node.ELEMENT_NODE&&e.getAttribute(Ns)!==null}targetCIDContainer(e){if(!this.isCIDPatch())return;let[t,...i]=_.findComponentNodeList(this.container,this.targetCID);return i.length===0&&_.childNodeLength(e)===1?t:t&&t.parentNode}buildDiffHTML(e,t,i,n){let s=this.isCIDPatch(),r=s&&n.getAttribute(tt)===this.targetCID.toString();if(!s||r)return t;{let l=null,h=document.createElement("template");l=_.cloneNode(n);let[u,...p]=_.findComponentNodeList(l,this.targetCID);return h.innerHTML=t,p.forEach(m=>m.remove()),Array.from(l.childNodes).forEach(m=>{m.id&&m.nodeType===Node.ELEMENT_NODE&&m.getAttribute(tt)!==this.targetCID.toString()&&(m.setAttribute(Ns,""),m.innerHTML="")}),Array.from(h.content.childNodes).forEach(m=>l.insertBefore(m,u)),u.remove(),l.outerHTML}}},ml=class{static extract(e){let{[al]:t,[ol]:i,[hl]:n}=e;return delete e[al],delete e[ol],delete e[hl],{diff:e,title:n,reply:t||null,events:i||[]}}constructor(e,t){this.viewId=e,this.rendered={},this.mergeDiff(t)}parentViewId(){return this.viewId}toString(e){return this.recursiveToString(this.rendered,this.rendered[et],e)}recursiveToString(e,t=e[et],i){i=i?new Set(i):null;let n={buffer:"",components:t,onlyCids:i};return this.toOutputBuffer(e,null,n),n.buffer}componentCIDs(e){return Object.keys(e[et]||{}).map(t=>parseInt(t))}isComponentOnlyDiff(e){return e[et]?Object.keys(e).length===1:!1}getComponent(e,t){return e[et][t]}mergeDiff(e){let t=e[et],i={};if(delete e[et],this.rendered=this.mutableMerge(this.rendered,e),this.rendered[et]=this.rendered[et]||{},t){let n=this.rendered[et];for(let s in t)t[s]=this.cachedFindComponent(s,t[s],n,t,i);for(let s in t)n[s]=t[s];e[et]=t}}cachedFindComponent(e,t,i,n,s){if(s[e])return s[e];{let r,l,h=t[bt];if(Ot(h)){let u;h>0?u=this.cachedFindComponent(h,n[h],i,n,s):u=i[-h],l=u[bt],r=this.cloneMerge(u,t),r[bt]=l}else r=t[bt]!==void 0?t:this.cloneMerge(i[e]||{},t);return s[e]=r,r}}mutableMerge(e,t){return t[bt]!==void 0?t:(this.doMutableMerge(e,t),e)}doMutableMerge(e,t){for(let i in t){let n=t[i],s=e[i];Bi(n)&&n[bt]===void 0&&Bi(s)?this.doMutableMerge(s,n):e[i]=n}}cloneMerge(e,t){let i={...e,...t};for(let n in i){let s=t[n],r=e[n];Bi(s)&&s[bt]===void 0&&Bi(r)&&(i[n]=this.cloneMerge(r,s))}return i}componentToString(e){return this.recursiveCIDToString(this.rendered[et],e)}pruneCIDs(e){e.forEach(t=>delete this.rendered[et][t])}get(){return this.rendered}isNewFingerprint(e={}){return!!e[bt]}templateStatic(e,t){return typeof e=="number"?t[e]:e}toOutputBuffer(e,t,i){if(e[ll])return this.comprehensionToBuffer(e,t,i);let{[bt]:n}=e;n=this.templateStatic(n,t),i.buffer+=n[0];for(let s=1;s<n.length;s++)this.dynamicToBuffer(e[s-1],t,i),i.buffer+=n[s]}comprehensionToBuffer(e,t,i){let{[ll]:n,[bt]:s}=e;s=this.templateStatic(s,t);let r=t||e[yh];for(let l=0;l<n.length;l++){let h=n[l];i.buffer+=s[0];for(let u=1;u<s.length;u++)this.dynamicToBuffer(h[u-1],r,i),i.buffer+=s[u]}}dynamicToBuffer(e,t,i){typeof e=="number"?i.buffer+=this.recursiveCIDToString(i.components,e,i.onlyCids):Bi(e)?this.toOutputBuffer(e,t,i):i.buffer+=e}recursiveCIDToString(e,t,i){let n=e[t]||$e(`no component for CID ${t}`,e),s=document.createElement("template");s.innerHTML=this.recursiveToString(n,e,i);let r=s.content,l=i&&!i.has(t),[h,u]=Array.from(r.childNodes).reduce(([p,m],b,c)=>b.nodeType===Node.ELEMENT_NODE?b.getAttribute(tt)?[p,!0]:(b.setAttribute(tt,t),b.id||(b.id=`${this.parentViewId()}-${t}-${c}`),l&&(b.setAttribute(Ns,""),b.innerHTML=""),[!0,m]):b.nodeValue.trim()!==""?($e(`only HTML element tags are allowed at the root of components.

got: "${b.nodeValue.trim()}"

within:
`,s.innerHTML.trim()),b.replaceWith(this.createSpan(b.nodeValue,t)),[!0,m]):(b.remove(),[p,m]),[!1,!1]);return!h&&!u?($e(`expected at least one HTML element tag inside a component, but the component is empty:
`,s.innerHTML.trim()),this.createSpan("",t).outerHTML):(!h&&u&&$e("expected at least one HTML element tag directly inside a component, but only subcomponents were found. A component must render at least one HTML tag directly inside itself.",s.innerHTML.trim()),s.innerHTML)}createSpan(e,t){let i=document.createElement("span");return i.innerText=e,i.setAttribute(tt,t),i}},Jh=1,zi=class{static makeID(){return Jh++}static elementID(e){return e.phxHookId}constructor(e,t,i){this.__view=e,this.liveSocket=e.liveSocket,this.__callbacks=i,this.__listeners=new Set,this.__isDisconnected=!1,this.el=t,this.el.phxHookId=this.constructor.makeID();for(let n in this.__callbacks)this[n]=this.__callbacks[n]}__mounted(){this.mounted&&this.mounted()}__updated(){this.updated&&this.updated()}__beforeUpdate(){this.beforeUpdate&&this.beforeUpdate()}__destroyed(){this.destroyed&&this.destroyed()}__reconnected(){this.__isDisconnected&&(this.__isDisconnected=!1,this.reconnected&&this.reconnected())}__disconnected(){this.__isDisconnected=!0,this.disconnected&&this.disconnected()}pushEvent(e,t={},i=function(){}){return this.__view.pushHookEvent(null,e,t,i)}pushEventTo(e,t,i={},n=function(){}){return this.__view.withinTargets(e,(s,r)=>s.pushHookEvent(r,t,i,n))}handleEvent(e,t){let i=(n,s)=>s?e:t(n.detail);return window.addEventListener(`phx:${e}`,i),this.__listeners.add(i),i}removeHandleEvent(e){let t=e(null,!0);window.removeEventListener(`phx:${t}`,e),this.__listeners.delete(e)}upload(e,t){return this.__view.dispatchUploads(e,t)}uploadTo(e,t,i){return this.__view.withinTargets(e,n=>n.dispatchUploads(t,i))}__cleanup__(){this.__listeners.forEach(e=>this.removeHandleEvent(e))}},Rn=null,Wh={exec(e,t,i,n,s){let[r,l]=s||[null,{}];(t.charAt(0)==="["?JSON.parse(t):[[r,l]]).forEach(([u,p])=>{u===r&&l.data&&(p.data=Object.assign(p.data||{},l.data)),this.filterToEls(n,p).forEach(m=>{this[`exec_${u}`](e,t,i,n,m,p)})})},isVisible(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length>0)},exec_dispatch(e,t,i,n,s,{to:r,event:l,detail:h,bubbles:u}){h=h||{},h.dispatcher=n,_.dispatchEvent(s,l,{detail:h,bubbles:u})},exec_push(e,t,i,n,s,r){if(!i.isConnected())return;let{event:l,data:h,target:u,page_loading:p,loading:m,value:b,dispatcher:c}=r,y={loading:m,value:b,target:u,page_loading:!!p},S=e==="change"&&c?c:n,k=u||S.getAttribute(i.binding("target"))||S;i.withinTargets(k,(L,H)=>{if(e==="change"){let{newCid:M,_target:g,callback:A}=r;g=g||(n instanceof HTMLInputElement?n.name:void 0),g&&(y._target=g),L.pushInput(n,H,M,l||t,y,A)}else e==="submit"?L.submitForm(n,H,l||t,y):L.pushEvent(e,n,H,l||t,h,y)})},exec_navigate(e,t,i,n,s,{href:r,replace:l}){i.liveSocket.historyRedirect(r,l?"replace":"push")},exec_patch(e,t,i,n,s,{href:r,replace:l}){i.liveSocket.pushHistoryPatch(r,l?"replace":"push",n)},exec_focus(e,t,i,n,s){window.requestAnimationFrame(()=>ci.attemptFocus(s))},exec_focus_first(e,t,i,n,s){window.requestAnimationFrame(()=>ci.focusFirstInteractive(s)||ci.focusFirst(s))},exec_push_focus(e,t,i,n,s){window.requestAnimationFrame(()=>Rn=s||n)},exec_pop_focus(e,t,i,n,s){window.requestAnimationFrame(()=>{Rn&&Rn.focus(),Rn=null})},exec_add_class(e,t,i,n,s,{names:r,transition:l,time:h}){this.addOrRemoveClasses(s,r,[],l,h,i)},exec_remove_class(e,t,i,n,s,{names:r,transition:l,time:h}){this.addOrRemoveClasses(s,[],r,l,h,i)},exec_transition(e,t,i,n,s,{time:r,transition:l}){let[h,u,p]=l,m=()=>this.addOrRemoveClasses(s,h.concat(u),[]),b=()=>this.addOrRemoveClasses(s,p,h.concat(u));i.transition(r,m,b)},exec_toggle(e,t,i,n,s,{display:r,ins:l,outs:h,time:u}){this.toggle(e,i,s,r,l,h,u)},exec_show(e,t,i,n,s,{display:r,transition:l,time:h}){this.show(e,i,s,r,l,h)},exec_hide(e,t,i,n,s,{display:r,transition:l,time:h}){this.hide(e,i,s,r,l,h)},exec_set_attr(e,t,i,n,s,{attr:[r,l]}){this.setOrRemoveAttrs(s,[[r,l]],[])},exec_remove_attr(e,t,i,n,s,{attr:r}){this.setOrRemoveAttrs(s,[],[r])},show(e,t,i,n,s,r){this.isVisible(i)||this.toggle(e,t,i,n,s,null,r)},hide(e,t,i,n,s,r){this.isVisible(i)&&this.toggle(e,t,i,n,null,s,r)},toggle(e,t,i,n,s,r,l){let[h,u,p]=s||[[],[],[]],[m,b,c]=r||[[],[],[]];if(h.length>0||m.length>0)if(this.isVisible(i)){let y=()=>{this.addOrRemoveClasses(i,b,h.concat(u).concat(p)),window.requestAnimationFrame(()=>{this.addOrRemoveClasses(i,m,[]),window.requestAnimationFrame(()=>this.addOrRemoveClasses(i,c,b))})};i.dispatchEvent(new Event("phx:hide-start")),t.transition(l,y,()=>{this.addOrRemoveClasses(i,[],m.concat(c)),_.putSticky(i,"toggle",S=>S.style.display="none"),i.dispatchEvent(new Event("phx:hide-end"))})}else{if(e==="remove")return;let y=()=>{this.addOrRemoveClasses(i,u,m.concat(b).concat(c)),_.putSticky(i,"toggle",S=>S.style.display=n||"block"),window.requestAnimationFrame(()=>{this.addOrRemoveClasses(i,h,[]),window.requestAnimationFrame(()=>this.addOrRemoveClasses(i,p,u))})};i.dispatchEvent(new Event("phx:show-start")),t.transition(l,y,()=>{this.addOrRemoveClasses(i,[],h.concat(p)),i.dispatchEvent(new Event("phx:show-end"))})}else this.isVisible(i)?window.requestAnimationFrame(()=>{i.dispatchEvent(new Event("phx:hide-start")),_.putSticky(i,"toggle",y=>y.style.display="none"),i.dispatchEvent(new Event("phx:hide-end"))}):window.requestAnimationFrame(()=>{i.dispatchEvent(new Event("phx:show-start")),_.putSticky(i,"toggle",y=>y.style.display=n||"block"),i.dispatchEvent(new Event("phx:show-end"))})},addOrRemoveClasses(e,t,i,n,s,r){let[l,h,u]=n||[[],[],[]];if(l.length>0){let p=()=>this.addOrRemoveClasses(e,h.concat(l),[]),m=()=>this.addOrRemoveClasses(e,t.concat(u),i.concat(l).concat(h));return r.transition(s,p,m)}window.requestAnimationFrame(()=>{let[p,m]=_.getSticky(e,"classes",[[],[]]),b=t.filter(k=>p.indexOf(k)<0&&!e.classList.contains(k)),c=i.filter(k=>m.indexOf(k)<0&&e.classList.contains(k)),y=p.filter(k=>i.indexOf(k)<0).concat(b),S=m.filter(k=>t.indexOf(k)<0).concat(c);_.putSticky(e,"classes",k=>(k.classList.remove(...S),k.classList.add(...y),[y,S]))})},setOrRemoveAttrs(e,t,i){let[n,s]=_.getSticky(e,"attrs",[[],[]]),r=t.map(([u,p])=>u).concat(i),l=n.filter(([u,p])=>!r.includes(u)).concat(t),h=s.filter(u=>!r.includes(u)).concat(i);_.putSticky(e,"attrs",u=>(h.forEach(p=>u.removeAttribute(p)),l.forEach(([p,m])=>u.setAttribute(p,m)),[l,h]))},hasAllClasses(e,t){return t.every(i=>e.classList.contains(i))},isToggledOut(e,t){return!this.isVisible(e)||this.hasAllClasses(e,t)},filterToEls(e,{to:t}){return t?_.all(document,t):[e]}},yt=Wh,Dn=(e,t,i=[])=>{let n=new FormData(e),s=[];n.forEach((l,h,u)=>{l instanceof File&&s.push(h)}),s.forEach(l=>n.delete(l));let r=new URLSearchParams;for(let[l,h]of n.entries())(i.length===0||i.indexOf(l)>=0)&&r.append(l,h);for(let l in t)r.append(l,t[l]);return r.toString()},El=class{constructor(e,t,i,n,s){this.isDead=!1,this.liveSocket=t,this.flash=n,this.parent=i,this.root=i?i.root:this,this.el=e,this.id=this.el.id,this.ref=0,this.childJoins=0,this.loaderTimer=null,this.pendingDiffs=[],this.pruningCIDs=[],this.redirect=!1,this.href=null,this.joinCount=this.parent?this.parent.joinCount-1:0,this.joinPending=!0,this.destroyed=!1,this.joinCallback=function(r){r&&r()},this.stopCallback=function(){},this.pendingJoinOps=this.parent?null:[],this.viewHooks={},this.uploaders={},this.formSubmits=[],this.children=this.parent?null:{},this.root.children[this.id]={},this.channel=this.liveSocket.channel(`lv:${this.id}`,()=>({redirect:this.redirect?this.href:void 0,url:this.redirect?void 0:this.href||void 0,params:this.connectParams(s),session:this.getSession(),static:this.getStatic(),flash:this.flash})),this.showLoader(this.liveSocket.loaderTimeout),this.bindChannel()}setHref(e){this.href=e}setRedirect(e){this.redirect=!0,this.href=e}isMain(){return this.el.getAttribute(js)!==null}connectParams(e){let t=this.liveSocket.params(this.el),i=_.all(document,`[${this.binding(lh)}]`).map(n=>n.src||n.href).filter(n=>typeof n=="string");return i.length>0&&(t._track_static=i),t._mounts=this.joinCount,t._live_referer=e,t}isConnected(){return this.channel.canPush()}getSession(){return this.el.getAttribute(Nt)}getStatic(){let e=this.el.getAttribute(Ji);return e===""?null:e}destroy(e=function(){}){this.destroyAllChildren(),this.destroyed=!0,delete this.root.children[this.id],this.parent&&delete this.root.children[this.parent.id][this.id],clearTimeout(this.loaderTimer);let t=()=>{e();for(let i in this.viewHooks)this.destroyHook(this.viewHooks[i])};_.markPhxChildDestroyed(this.el),this.log("destroyed",()=>["the child has been removed from the parent"]),this.channel.leave().receive("ok",t).receive("error",t).receive("timeout",t)}setContainerClasses(...e){this.el.classList.remove(Qr,xs,tl),this.el.classList.add(...e)}showLoader(e){if(clearTimeout(this.loaderTimer),e)this.loaderTimer=setTimeout(()=>this.showLoader(),e);else{for(let t in this.viewHooks)this.viewHooks[t].__disconnected();this.setContainerClasses(xs)}}execAll(e){_.all(this.el,`[${e}]`,t=>this.liveSocket.execJS(t,t.getAttribute(e)))}hideLoader(){clearTimeout(this.loaderTimer),this.setContainerClasses(Qr),this.execAll(this.binding("connected"))}triggerReconnected(){for(let e in this.viewHooks)this.viewHooks[e].__reconnected()}log(e,t){this.liveSocket.log(this,e,t)}transition(e,t,i=function(){}){this.liveSocket.transition(e,t,i)}withinTargets(e,t){if(e instanceof HTMLElement||e instanceof SVGElement)return this.liveSocket.owner(e,i=>t(i,e));if(Ot(e))_.findComponentNodeList(this.el,e).length===0?$e(`no component found matching phx-target of ${e}`):t(this,parseInt(e));else{let i=Array.from(document.querySelectorAll(e));i.length===0&&$e(`nothing found matching the phx-target selector "${e}"`),i.forEach(n=>this.liveSocket.owner(n,s=>t(s,n)))}}applyDiff(e,t,i){this.log(e,()=>["",In(t)]);let{diff:n,reply:s,events:r,title:l}=ml.extract(t);l&&_.putTitle(l),i({diff:n,reply:s,events:r})}onJoin(e){let{rendered:t,container:i}=e;if(i){let[n,s]=i;this.el=_.replaceRootContainer(this.el,n,s)}this.childJoins=0,this.joinPending=!0,this.flash=null,wt.dropLocal(this.liveSocket.localStorage,window.location.pathname,vl),this.applyDiff("mount",t,({diff:n,events:s})=>{this.rendered=new ml(this.id,n);let r=this.renderContainer(null,"join");this.dropPendingRefs();let l=this.formsForRecovery(r);this.joinCount++,l.length>0?l.forEach(([h,u,p],m)=>{this.pushFormRecovery(h,p,b=>{m===l.length-1&&this.onJoinComplete(b,r,s)})}):this.onJoinComplete(e,r,s)})}dropPendingRefs(){_.all(document,`[${zt}="${this.id}"][${St}]`,e=>{e.removeAttribute(St),e.removeAttribute(zt)})}onJoinComplete({live_patch:e},t,i){if(this.joinCount>1||this.parent&&!this.parent.isJoinPending())return this.applyJoinPatch(e,t,i);_.findPhxChildrenInFragment(t,this.id).filter(s=>{let r=s.id&&this.el.querySelector(`[id="${s.id}"]`),l=r&&r.getAttribute(Ji);return l&&s.setAttribute(Ji,l),this.joinChild(s)}).length===0?this.parent?(this.root.pendingJoinOps.push([this,()=>this.applyJoinPatch(e,t,i)]),this.parent.ackJoin(this)):(this.onAllChildJoinsComplete(),this.applyJoinPatch(e,t,i)):this.root.pendingJoinOps.push([this,()=>this.applyJoinPatch(e,t,i)])}attachTrueDocEl(){this.el=_.byId(this.id),this.el.setAttribute(qi,this.root.id)}execNewMounted(){_.all(this.el,`[${this.binding($i)}], [data-phx-${$i}]`,e=>{this.maybeAddNewHook(e)}),_.all(this.el,`[${this.binding(sl)}]`,e=>this.maybeMounted(e))}applyJoinPatch(e,t,i){this.attachTrueDocEl();let n=new Ln(this,this.el,this.id,t,null);if(n.markPrunableContentForRemoval(),this.performPatch(n,!1),this.joinNewChildren(),this.execNewMounted(),this.joinPending=!1,this.liveSocket.dispatchEvents(i),this.applyPendingUpdates(),e){let{kind:s,to:r}=e;this.liveSocket.historyPatch(r,s)}this.hideLoader(),this.joinCount>1&&this.triggerReconnected(),this.stopCallback()}triggerBeforeUpdateHook(e,t){this.liveSocket.triggerDOM("onBeforeElUpdated",[e,t]);let i=this.getHook(e),n=i&&_.isIgnored(e,this.binding(Us));if(i&&!e.isEqualNode(t)&&!(n&&Eh(e.dataset,t.dataset)))return i.__beforeUpdate(),i}maybeMounted(e){let t=e.getAttribute(this.binding(sl)),i=t&&_.private(e,"mounted");t&&!i&&(this.liveSocket.execJS(e,t),_.putPrivate(e,"mounted",!0))}maybeAddNewHook(e,t){let i=this.addHook(e);i&&i.__mounted()}performPatch(e,t){let i=[],n=!1,s=new Set;return e.after("added",r=>{this.liveSocket.triggerDOM("onNodeAdded",[r]),this.maybeAddNewHook(r),r.getAttribute&&this.maybeMounted(r)}),e.after("phxChildAdded",r=>{_.isPhxSticky(r)?this.liveSocket.joinRootViews():n=!0}),e.before("updated",(r,l)=>{this.triggerBeforeUpdateHook(r,l)&&s.add(r.id)}),e.after("updated",r=>{s.has(r.id)&&this.getHook(r).__updated()}),e.after("discarded",r=>{r.nodeType===Node.ELEMENT_NODE&&i.push(r)}),e.after("transitionsDiscarded",r=>this.afterElementsRemoved(r,t)),e.perform(),this.afterElementsRemoved(i,t),n}afterElementsRemoved(e,t){let i=[];e.forEach(n=>{let s=_.all(n,`[${tt}]`),r=_.all(n,`[${this.binding($i)}]`);s.concat(n).forEach(l=>{let h=this.componentID(l);Ot(h)&&i.indexOf(h)===-1&&i.push(h)}),r.concat(n).forEach(l=>{let h=this.getHook(l);h&&this.destroyHook(h)})}),t&&this.maybePushComponentsDestroyed(i)}joinNewChildren(){_.findPhxChildren(this.el,this.id).forEach(e=>this.joinChild(e))}getChildById(e){return this.root.children[this.id][e]}getDescendentByEl(e){return e.id===this.id?this:this.children[e.getAttribute(ui)][e.id]}destroyDescendent(e){for(let t in this.root.children)for(let i in this.root.children[t])if(i===e)return this.root.children[t][i].destroy()}joinChild(e){if(!this.getChildById(e.id)){let i=new El(e,this.liveSocket,this);return this.root.children[this.id][i.id]=i,i.join(),this.childJoins++,!0}}isJoinPending(){return this.joinPending}ackJoin(e){this.childJoins--,this.childJoins===0&&(this.parent?this.parent.ackJoin(this):this.onAllChildJoinsComplete())}onAllChildJoinsComplete(){this.joinCallback(()=>{this.pendingJoinOps.forEach(([e,t])=>{e.isDestroyed()||t()}),this.pendingJoinOps=[]})}update(e,t){if(this.isJoinPending()||this.liveSocket.hasPendingLink()&&this.root.isMain())return this.pendingDiffs.push({diff:e,events:t});this.rendered.mergeDiff(e);let i=!1;this.rendered.isComponentOnlyDiff(e)?this.liveSocket.time("component patch complete",()=>{_.findParentCIDs(this.el,this.rendered.componentCIDs(e)).forEach(s=>{this.componentPatch(this.rendered.getComponent(e,s),s)&&(i=!0)})}):ul(e)||this.liveSocket.time("full patch complete",()=>{let n=this.renderContainer(e,"update"),s=new Ln(this,this.el,this.id,n,null);i=this.performPatch(s,!0)}),this.liveSocket.dispatchEvents(t),i&&this.joinNewChildren()}renderContainer(e,t){return this.liveSocket.time(`toString diff (${t})`,()=>{let i=this.el.tagName,n=e?this.rendered.componentCIDs(e).concat(this.pruningCIDs):null,s=this.rendered.toString(n);return`<${i}>${s}</${i}>`})}componentPatch(e,t){if(ul(e))return!1;let i=this.rendered.componentToString(t),n=new Ln(this,this.el,this.id,i,t);return this.performPatch(n,!0)}getHook(e){return this.viewHooks[zi.elementID(e)]}addHook(e){if(zi.elementID(e)||!e.getAttribute)return;let t=e.getAttribute(`data-phx-${$i}`)||e.getAttribute(this.binding($i));if(t&&!this.ownsElement(e))return;let i=this.liveSocket.getHookCallbacks(t);if(i){e.id||$e(`no DOM ID for hook "${t}". Hooks require a unique ID on each element.`,e);let n=new zi(this,e,i);return this.viewHooks[zi.elementID(n.el)]=n,n}else t!==null&&$e(`unknown hook found for "${t}"`,e)}destroyHook(e){e.__destroyed(),e.__cleanup__(),delete this.viewHooks[zi.elementID(e.el)]}applyPendingUpdates(){this.pendingDiffs.forEach(({diff:e,events:t})=>this.update(e,t)),this.pendingDiffs=[]}onChannel(e,t){this.liveSocket.onChannel(this.channel,e,i=>{this.isJoinPending()?this.root.pendingJoinOps.push([this,()=>t(i)]):this.liveSocket.requestDOMUpdate(()=>t(i))})}bindChannel(){this.liveSocket.onChannel(this.channel,"diff",e=>{this.liveSocket.requestDOMUpdate(()=>{this.applyDiff("update",e,({diff:t,events:i})=>this.update(t,i))})}),this.onChannel("redirect",({to:e,flash:t})=>this.onRedirect({to:e,flash:t})),this.onChannel("live_patch",e=>this.onLivePatch(e)),this.onChannel("live_redirect",e=>this.onLiveRedirect(e)),this.channel.onError(e=>this.onError(e)),this.channel.onClose(e=>this.onClose(e))}destroyAllChildren(){for(let e in this.root.children[this.id])this.getChildById(e).destroy()}onLiveRedirect(e){let{to:t,kind:i,flash:n}=e,s=this.expandURL(t);this.liveSocket.historyRedirect(s,i,n)}onLivePatch(e){let{to:t,kind:i}=e;this.href=this.expandURL(t),this.liveSocket.historyPatch(t,i)}expandURL(e){return e.startsWith("/")?`${window.location.protocol}//${window.location.host}${e}`:e}onRedirect({to:e,flash:t}){this.liveSocket.redirect(e,t)}isDestroyed(){return this.destroyed}joinDead(){this.isDead=!0}join(e){this.isMain()&&(this.stopCallback=this.liveSocket.withPageLoading({to:this.href,kind:"initial"})),this.joinCallback=t=>{t=t||function(){},e?e(this.joinCount,t):t()},this.liveSocket.wrapPush(this,{timeout:!1},()=>this.channel.join().receive("ok",t=>{this.isDestroyed()||this.liveSocket.requestDOMUpdate(()=>this.onJoin(t))}).receive("error",t=>!this.isDestroyed()&&this.onJoinError(t)).receive("timeout",()=>!this.isDestroyed()&&this.onJoinError({reason:"timeout"})))}onJoinError(e){if(e.reason==="unauthorized"||e.reason==="stale")return this.log("error",()=>["unauthorized live_redirect. Falling back to page request",e]),this.onRedirect({to:this.href});if((e.redirect||e.live_redirect)&&(this.joinPending=!1,this.channel.leave()),e.redirect)return this.onRedirect(e.redirect);if(e.live_redirect)return this.onLiveRedirect(e.live_redirect);this.log("error",()=>["unable to join",e]),this.liveSocket.isConnected()&&this.liveSocket.reloadWithJitter(this)}onClose(e){if(!this.isDestroyed()){if(this.liveSocket.hasPendingLink()&&e!=="leave")return this.liveSocket.reloadWithJitter(this);this.destroyAllChildren(),this.liveSocket.dropActiveElement(this),document.activeElement&&document.activeElement.blur(),this.liveSocket.isUnloaded()&&this.showLoader(mh)}}onError(e){this.onClose(e),this.liveSocket.isConnected()&&this.log("error",()=>["view crashed",e]),this.liveSocket.isUnloaded()||this.displayError()}displayError(){this.isMain()&&_.dispatchEvent(window,"phx:page-loading-start",{detail:{to:this.href,kind:"error"}}),this.showLoader(),this.setContainerClasses(xs,tl),this.execAll(this.binding("disconnected"))}pushWithReply(e,t,i,n=function(){}){if(!this.isConnected())return;let[s,[r],l]=e?e():[null,[],{}],h=function(){};return(l.page_loading||r&&r.getAttribute(this.binding(Zr))!==null)&&(h=this.liveSocket.withPageLoading({kind:"element",target:r})),typeof i.cid!="number"&&delete i.cid,this.liveSocket.wrapPush(this,{timeout:!0},()=>this.channel.push(t,i,bh).receive("ok",u=>{let p=m=>{u.redirect&&this.onRedirect(u.redirect),u.live_patch&&this.onLivePatch(u.live_patch),u.live_redirect&&this.onLiveRedirect(u.live_redirect),s!==null&&this.undoRefs(s),h(),n(u,m)};u.diff?this.liveSocket.requestDOMUpdate(()=>{this.applyDiff("update",u.diff,({diff:m,reply:b,events:c})=>{this.update(m,c),p(b)})}):p(null)}))}undoRefs(e){!this.isConnected()||_.all(document,`[${zt}="${this.id}"][${St}="${e}"]`,t=>{let i=t.getAttribute(En);t.removeAttribute(St),t.removeAttribute(zt),t.getAttribute(Ps)!==null&&(t.readOnly=!1,t.removeAttribute(Ps)),i!==null&&(t.disabled=i==="true",t.removeAttribute(En)),bl.forEach(r=>_.removeClass(t,r));let n=t.getAttribute(An);n!==null&&(t.innerText=n,t.removeAttribute(An));let s=_.private(t,St);if(s){let r=this.triggerBeforeUpdateHook(t,s);Ln.patchEl(t,s,this.liveSocket.getActiveElement()),r&&r.__updated(),_.deletePrivate(t,St)}})}putRef(e,t,i={}){let n=this.ref++,s=this.binding(Fs);return i.loading&&(e=e.concat(_.all(document,i.loading))),e.forEach(r=>{r.classList.add(`phx-${t}-loading`),r.setAttribute(St,n),r.setAttribute(zt,this.el.id);let l=r.getAttribute(s);l!==null&&(r.getAttribute(An)||r.setAttribute(An,r.innerText),l!==""&&(r.innerText=l),r.setAttribute("disabled",""))}),[n,e,i]}componentID(e){let t=e.getAttribute&&e.getAttribute(tt);return t?parseInt(t):null}targetComponentID(e,t,i={}){if(Ot(t))return t;let n=e.getAttribute(this.binding("target"));return Ot(n)?parseInt(n):t&&(n!==null||i.target)?this.closestComponentID(t):null}closestComponentID(e){return Ot(e)?e:e?Ct(e.closest(`[${tt}]`),t=>this.ownsElement(t)&&this.componentID(t)):null}pushHookEvent(e,t,i,n){if(!this.isConnected())return this.log("hook",()=>["unable to push hook event. LiveView not connected",t,i]),!1;let[s,r,l]=this.putRef([],"hook");return this.pushWithReply(()=>[s,r,l],"event",{type:"hook",event:t,value:i,cid:this.closestComponentID(e)},(h,u)=>n(u,s)),s}extractMeta(e,t,i){let n=this.binding("value-");for(let s=0;s<e.attributes.length;s++){t||(t={});let r=e.attributes[s].name;r.startsWith(n)&&(t[r.replace(n,"")]=e.getAttribute(r))}if(e.value!==void 0&&(t||(t={}),t.value=e.value,e.tagName==="INPUT"&&Sl.indexOf(e.type)>=0&&!e.checked&&delete t.value),i){t||(t={});for(let s in i)t[s]=i[s]}return t}pushEvent(e,t,i,n,s,r={}){this.pushWithReply(()=>this.putRef([t],e,r),"event",{type:e,event:n,value:this.extractMeta(t,s,r.value),cid:this.targetComponentID(t,i,r)})}pushFileProgress(e,t,i,n=function(){}){this.liveSocket.withinOwners(e.form,(s,r)=>{s.pushWithReply(null,"progress",{event:e.getAttribute(s.binding(ph)),ref:e.getAttribute(Jt),entry_ref:t,progress:i,cid:s.targetComponentID(e.form,r)},n)})}pushInput(e,t,i,n,s,r){let l,h=Ot(i)?i:this.targetComponentID(e.form,t),u=()=>this.putRef([e,e.form],"change",s),p;e.getAttribute(this.binding("change"))?p=Dn(e.form,{_target:s._target},[e.name]):p=Dn(e.form,{_target:s._target}),_.isUploadInput(e)&&e.files&&e.files.length>0&&Ue.trackFiles(e,Array.from(e.files)),l=Ue.serializeUploads(e);let m={type:"form",event:n,value:p,uploads:l,cid:h};this.pushWithReply(u,"event",m,b=>{if(_.showError(e,this.liveSocket.binding(Hs)),_.isUploadInput(e)&&e.getAttribute("data-phx-auto-upload")!==null){if(Ue.filesAwaitingPreflight(e).length>0){let[c,y]=u();this.uploadFiles(e.form,t,c,h,S=>{r&&r(b),this.triggerAwaitingSubmit(e.form)})}}else r&&r(b)})}triggerAwaitingSubmit(e){let t=this.getScheduledSubmit(e);if(t){let[i,n,s,r]=t;this.cancelSubmit(e),r()}}getScheduledSubmit(e){return this.formSubmits.find(([t,i,n,s])=>t.isSameNode(e))}scheduleSubmit(e,t,i,n){if(this.getScheduledSubmit(e))return!0;this.formSubmits.push([e,t,i,n])}cancelSubmit(e){this.formSubmits=this.formSubmits.filter(([t,i,n])=>t.isSameNode(e)?(this.undoRefs(i),!1):!0)}disableForm(e,t={}){let i=m=>!(Wi(m,`${this.binding(Us)}=ignore`,m.form)||Wi(m,"data-phx-update=ignore",m.form)),n=m=>m.hasAttribute(this.binding(Fs)),s=m=>m.tagName=="BUTTON",r=m=>["INPUT","TEXTAREA","SELECT"].includes(m.tagName),l=Array.from(e.elements),h=l.filter(n),u=l.filter(s).filter(i),p=l.filter(r).filter(i);return u.forEach(m=>{m.setAttribute(En,m.disabled),m.disabled=!0}),p.forEach(m=>{m.setAttribute(Ps,m.readOnly),m.readOnly=!0,m.files&&(m.setAttribute(En,m.disabled),m.disabled=!0)}),e.setAttribute(this.binding(Zr),""),this.putRef([e].concat(h).concat(u).concat(p),"submit",t)}pushFormSubmit(e,t,i,n,s){let r=()=>this.disableForm(e,n),l=this.targetComponentID(e,t);if(Ue.hasUploadsInProgress(e)){let[h,u]=r(),p=()=>this.pushFormSubmit(e,t,i,n,s);return this.scheduleSubmit(e,h,n,p)}else if(Ue.inputsAwaitingPreflight(e).length>0){let[h,u]=r(),p=()=>[h,u,n];this.uploadFiles(e,t,h,l,m=>{let b=Dn(e,{});this.pushWithReply(p,"event",{type:"form",event:i,value:b,cid:l},s)})}else{let h=Dn(e,{});this.pushWithReply(r,"event",{type:"form",event:i,value:h,cid:l},s)}}uploadFiles(e,t,i,n,s){let r=this.joinCount,l=Ue.activeFileInputs(e),h=l.length;l.forEach(u=>{let p=new Ue(u,this,()=>{h--,h===0&&s()});this.uploaders[u]=p;let m=p.entries().map(c=>c.toPreflightPayload()),b={ref:u.getAttribute(Jt),entries:m,cid:this.targetComponentID(u.form,t)};this.log("upload",()=>["sending preflight request",b]),this.pushWithReply(null,"allow_upload",b,c=>{if(this.log("upload",()=>["got preflight response",c]),c.error){this.undoRefs(i);let[y,S]=c.error;this.log("upload",()=>[`error for entry ${y}`,S])}else{let y=S=>{this.channel.onError(()=>{this.joinCount===r&&S()})};p.initAdapterUpload(c,y,this.liveSocket)}})})}dispatchUploads(e,t){let i=_.findUploadInputs(this.el).filter(n=>n.name===e);i.length===0?$e(`no live file inputs found matching the name "${e}"`):i.length>1?$e(`duplicate live file inputs found matching the name "${e}"`):_.dispatchEvent(i[0],wl,{detail:{files:t}})}pushFormRecovery(e,t,i){this.liveSocket.withinOwners(e,(n,s)=>{let r=e.elements[0],l=e.getAttribute(this.binding(nl))||e.getAttribute(this.binding("change"));yt.exec("change",l,n,r,["push",{_target:r.name,newCid:t,callback:i}])})}pushLinkPatch(e,t,i){let n=this.liveSocket.setPendingLink(e),s=t?()=>this.putRef([t],"click"):null,r=()=>this.liveSocket.redirect(window.location.href),l=this.pushWithReply(s,"live_patch",{url:e},h=>{this.liveSocket.requestDOMUpdate(()=>{h.link_redirect?this.liveSocket.replaceMain(e,null,i,n):(this.liveSocket.commitPendingLink(n)&&(this.href=e),this.applyPendingUpdates(),i&&i(n))})});l?l.receive("timeout",r):r()}formsForRecovery(e){if(this.joinCount===0)return[];let t=this.binding("change"),i=document.createElement("template");return i.innerHTML=e,_.all(this.el,`form[${t}]`).filter(n=>n.id&&this.ownsElement(n)).filter(n=>n.elements.length>0).filter(n=>n.getAttribute(this.binding(nl))!=="ignore").map(n=>{let s=i.content.querySelector(`form[id="${n.id}"][${t}="${n.getAttribute(t)}"]`);return s?[n,s,this.targetComponentID(s)]:[n,null,null]}).filter(([n,s,r])=>s)}maybePushComponentsDestroyed(e){let t=e.filter(i=>_.findComponentNodeList(this.el,i).length===0);t.length>0&&(this.pruningCIDs.push(...t),this.pushWithReply(null,"cids_will_destroy",{cids:t},()=>{this.pruningCIDs=this.pruningCIDs.filter(n=>t.indexOf(n)!==-1);let i=t.filter(n=>_.findComponentNodeList(this.el,n).length===0);i.length>0&&this.pushWithReply(null,"cids_destroyed",{cids:i},n=>{this.rendered.pruneCIDs(n.cids)})}))}ownsElement(e){return this.isDead||e.getAttribute(ui)===this.id||Ct(e.closest(di),t=>t.id)===this.id}submitForm(e,t,i,n={}){_.putPrivate(e,kl,!0);let s=this.liveSocket.binding(Hs),r=Array.from(e.elements);this.liveSocket.blurActiveElement(this),this.pushFormSubmit(e,t,i,n,()=>{r.forEach(l=>_.showError(l,s)),this.liveSocket.restorePreviouslyActiveFocus()})}binding(e){return this.liveSocket.binding(e)}},Al=class{constructor(e,t,i={}){if(this.unloaded=!1,!t||t.constructor.name==="Object")throw new Error(`
      a phoenix Socket must be provided as the second argument to the LiveSocket constructor. For example:

          import {Socket} from "phoenix"
          import {LiveSocket} from "phoenix_live_view"
          let liveSocket = new LiveSocket("/live", Socket, {...})
      `);this.socket=new t(e,i),this.bindingPrefix=i.bindingPrefix||vh,this.opts=i,this.params=Ds(i.params||{}),this.viewLogger=i.viewLogger,this.metadataCallbacks=i.metadata||{},this.defaults=Object.assign(In(wh),i.defaults||{}),this.activeElement=null,this.prevActive=null,this.silenced=!1,this.main=null,this.outgoingMainEl=null,this.clickStartedAtTarget=null,this.linkRef=1,this.roots={},this.href=window.location.href,this.pendingLink=null,this.currentLocation=In(window.location),this.hooks=i.hooks||{},this.uploaders=i.uploaders||{},this.loaderTimeout=i.loaderTimeout||gh,this.reloadWithJitterTimer=null,this.maxReloads=i.maxReloads||ih,this.reloadJitterMin=i.reloadJitterMin||nh,this.reloadJitterMax=i.reloadJitterMax||sh,this.failsafeJitter=i.failsafeJitter||rh,this.localStorage=i.localStorage||window.localStorage,this.sessionStorage=i.sessionStorage||window.sessionStorage,this.boundTopLevelEvents=!1,this.domCallbacks=Object.assign({onNodeAdded:Ds(),onBeforeElUpdated:Ds()},i.dom||{}),this.transitions=new qh,window.addEventListener("pagehide",n=>{this.unloaded=!0}),this.socket.onOpen(()=>{this.isUnloaded()&&window.location.reload()})}isProfileEnabled(){return this.sessionStorage.getItem(Ls)==="true"}isDebugEnabled(){return this.sessionStorage.getItem(Cn)==="true"}isDebugDisabled(){return this.sessionStorage.getItem(Cn)==="false"}enableDebug(){this.sessionStorage.setItem(Cn,"true")}enableProfiling(){this.sessionStorage.setItem(Ls,"true")}disableDebug(){this.sessionStorage.setItem(Cn,"false")}disableProfiling(){this.sessionStorage.removeItem(Ls)}enableLatencySim(e){this.enableDebug(),console.log("latency simulator enabled for the duration of this browser session. Call disableLatencySim() to disable"),this.sessionStorage.setItem(Rs,e)}disableLatencySim(){this.sessionStorage.removeItem(Rs)}getLatencySim(){let e=this.sessionStorage.getItem(Rs);return e?parseInt(e):null}getSocket(){return this.socket}connect(){window.location.hostname==="localhost"&&!this.isDebugDisabled()&&this.enableDebug();let e=()=>{this.joinRootViews()?(this.bindTopLevelEvents(),this.socket.connect()):this.main?this.socket.connect():this.joinDeadView()};["complete","loaded","interactive"].indexOf(document.readyState)>=0?e():document.addEventListener("DOMContentLoaded",()=>e())}disconnect(e){clearTimeout(this.reloadWithJitterTimer),this.socket.disconnect(e)}replaceTransport(e){clearTimeout(this.reloadWithJitterTimer),this.socket.replaceTransport(e),this.connect()}execJS(e,t,i=null){this.owner(e,n=>yt.exec(i,t,n,e))}triggerDOM(e,t){this.domCallbacks[e](...t)}time(e,t){if(!this.isProfileEnabled()||!console.time)return t();console.time(e);let i=t();return console.timeEnd(e),i}log(e,t,i){if(this.viewLogger){let[n,s]=i();this.viewLogger(e,t,n,s)}else if(this.isDebugEnabled()){let[n,s]=i();_h(e,t,n,s)}}requestDOMUpdate(e){this.transitions.after(e)}transition(e,t,i=function(){}){this.transitions.addTransition(e,t,i)}onChannel(e,t,i){e.on(t,n=>{let s=this.getLatencySim();s?setTimeout(()=>i(n),s):i(n)})}wrapPush(e,t,i){let n=this.getLatencySim(),s=e.joinCount;if(!n)return this.isConnected()&&t.timeout?i().receive("timeout",()=>{e.joinCount===s&&!e.isDestroyed()&&this.reloadWithJitter(e,()=>{this.log(e,"timeout",()=>["received timeout while communicating with server. Falling back to hard refresh for recovery"])})}):i();let r={receives:[],receive(l,h){this.receives.push([l,h])}};return setTimeout(()=>{e.isDestroyed()||r.receives.reduce((l,[h,u])=>l.receive(h,u),i())},n),r}reloadWithJitter(e,t){clearTimeout(this.reloadWithJitterTimer),this.disconnect();let i=this.reloadJitterMin,n=this.reloadJitterMax,s=Math.floor(Math.random()*(n-i+1))+i,r=wt.updateLocal(this.localStorage,window.location.pathname,vl,0,l=>l+1);r>this.maxReloads&&(s=this.failsafeJitter),this.reloadWithJitterTimer=setTimeout(()=>{e.isDestroyed()||e.isConnected()||(e.destroy(),t?t():this.log(e,"join",()=>[`encountered ${r} consecutive reloads`]),r>this.maxReloads&&this.log(e,"join",()=>[`exceeded ${this.maxReloads} consecutive reloads. Entering failsafe mode`]),this.hasPendingLink()?window.location=this.pendingLink:window.location.reload())},s)}getHookCallbacks(e){return e&&e.startsWith("Phoenix.")?Ph[e.split(".")[1]]:this.hooks[e]}isUnloaded(){return this.unloaded}isConnected(){return this.socket.isConnected()}getBindingPrefix(){return this.bindingPrefix}binding(e){return`${this.getBindingPrefix()}${e}`}channel(e,t){return this.socket.channel(e,t)}joinDeadView(){this.bindTopLevelEvents({dead:!0});let e=this.newRootView(document.body);e.setHref(this.getHref()),e.joinDead(),this.main=e,window.requestAnimationFrame(()=>e.execNewMounted())}joinRootViews(){let e=!1;return _.all(document,`${di}:not([${ui}])`,t=>{if(!this.getRootById(t.id)){let i=this.newRootView(t);i.setHref(this.getHref()),i.join(),t.getAttribute(js)&&(this.main=i)}e=!0}),e}redirect(e,t){this.disconnect(),wt.redirect(e,t)}replaceMain(e,t,i=null,n=this.setPendingLink(e)){let s=this.currentLocation.href;this.outgoingMainEl=this.outgoingMainEl||this.main.el;let r=_.cloneNode(this.outgoingMainEl,"");this.main.showLoader(this.loaderTimeout),this.main.destroy(),this.main=this.newRootView(r,t,s),this.main.setRedirect(e),this.transitionRemoves(),this.main.join((l,h)=>{l===1&&this.commitPendingLink(n)&&this.requestDOMUpdate(()=>{_.findPhxSticky(document).forEach(u=>r.appendChild(u)),this.outgoingMainEl.replaceWith(r),this.outgoingMainEl=null,i&&requestAnimationFrame(i),h()})})}transitionRemoves(e){let t=this.binding("remove");e=e||_.all(document,`[${t}]`),e.forEach(i=>{document.body.contains(i)&&this.execJS(i,i.getAttribute(t),"remove")})}isPhxView(e){return e.getAttribute&&e.getAttribute(Nt)!==null}newRootView(e,t,i){let n=new El(e,this,null,t,i);return this.roots[n.id]=n,n}owner(e,t){let i=Ct(e.closest(di),n=>this.getViewByEl(n))||this.main;i&&t(i)}withinOwners(e,t){this.owner(e,i=>t(i,e))}getViewByEl(e){let t=e.getAttribute(qi);return Ct(this.getRootById(t),i=>i.getDescendentByEl(e))}getRootById(e){return this.roots[e]}destroyAllViews(){for(let e in this.roots)this.roots[e].destroy(),delete this.roots[e];this.main=null}destroyViewByEl(e){let t=this.getRootById(e.getAttribute(qi));t&&t.id===e.id?(t.destroy(),delete this.roots[t.id]):t&&t.destroyDescendent(e.id)}setActiveElement(e){if(this.activeElement===e)return;this.activeElement=e;let t=()=>{e===this.activeElement&&(this.activeElement=null),e.removeEventListener("mouseup",this),e.removeEventListener("touchend",this)};e.addEventListener("mouseup",t),e.addEventListener("touchend",t)}getActiveElement(){return document.activeElement===document.body?this.activeElement||document.activeElement:document.activeElement||document.body}dropActiveElement(e){this.prevActive&&e.ownsElement(this.prevActive)&&(this.prevActive=null)}restorePreviouslyActiveFocus(){this.prevActive&&this.prevActive!==document.body&&this.prevActive.focus()}blurActiveElement(){this.prevActive=this.getActiveElement(),this.prevActive!==document.body&&this.prevActive.blur()}bindTopLevelEvents({dead:e}={}){this.boundTopLevelEvents||(this.boundTopLevelEvents=!0,this.socket.onClose(t=>{t&&t.code===1e3&&this.main&&this.reloadWithJitter(this.main)}),document.body.addEventListener("click",function(){}),window.addEventListener("pageshow",t=>{t.persisted&&(this.getSocket().disconnect(),this.withPageLoading({to:window.location.href,kind:"redirect"}),window.location.reload())},!0),e||this.bindNav(),this.bindClicks(),e||this.bindForms(),this.bind({keyup:"keyup",keydown:"keydown"},(t,i,n,s,r,l)=>{let h=s.getAttribute(this.binding(fh)),u=t.key&&t.key.toLowerCase();if(h&&h.toLowerCase()!==u)return;let p={key:t.key,...this.eventMeta(i,t,s)};yt.exec(i,r,n,s,["push",{data:p}])}),this.bind({blur:"focusout",focus:"focusin"},(t,i,n,s,r,l)=>{if(!l){let h={key:t.key,...this.eventMeta(i,t,s)};yt.exec(i,r,n,s,["push",{data:h}])}}),this.bind({blur:"blur",focus:"focus"},(t,i,n,s,r,l,h)=>{if(h==="window"){let u=this.eventMeta(i,t,s);yt.exec(i,l,n,s,["push",{data:u}])}}),window.addEventListener("dragover",t=>t.preventDefault()),window.addEventListener("drop",t=>{t.preventDefault();let i=Ct(Wi(t.target,this.binding(Yr)),r=>r.getAttribute(this.binding(Yr))),n=i&&document.getElementById(i),s=Array.from(t.dataTransfer.files||[]);!n||n.disabled||s.length===0||!(n.files instanceof FileList)||(Ue.trackFiles(n,s),n.dispatchEvent(new Event("input",{bubbles:!0})))}),this.on(wl,t=>{let i=t.target;if(!_.isUploadInput(i))return;let n=Array.from(t.detail.files||[]).filter(s=>s instanceof File||s instanceof Blob);Ue.trackFiles(i,n),i.dispatchEvent(new Event("input",{bubbles:!0}))}))}eventMeta(e,t,i){let n=this.metadataCallbacks[e];return n?n(t,i):{}}setPendingLink(e){return this.linkRef++,this.pendingLink=e,this.linkRef}commitPendingLink(e){return this.linkRef!==e?!1:(this.href=this.pendingLink,this.pendingLink=null,!0)}getHref(){return this.href}hasPendingLink(){return!!this.pendingLink}bind(e,t){for(let i in e){let n=e[i];this.on(n,s=>{let r=this.binding(i),l=this.binding(`window-${i}`),h=s.target.getAttribute&&s.target.getAttribute(r);h?this.debounce(s.target,s,n,()=>{this.withinOwners(s.target,u=>{t(s,i,u,s.target,h,null)})}):_.all(document,`[${l}]`,u=>{let p=u.getAttribute(l);this.debounce(u,s,n,()=>{this.withinOwners(u,m=>{t(s,i,m,u,p,"window")})})})})}}bindClicks(){window.addEventListener("mousedown",e=>this.clickStartedAtTarget=e.target),this.bindClick("click","click",!1),this.bindClick("mousedown","capture-click",!0)}bindClick(e,t,i){let n=this.binding(t);window.addEventListener(e,s=>{let r=null;if(i)r=s.target.matches(`[${n}]`)?s.target:s.target.querySelector(`[${n}]`);else{let h=this.clickStartedAtTarget||s.target;r=Wi(h,n),this.dispatchClickAway(s,h),this.clickStartedAtTarget=null}let l=r&&r.getAttribute(n);!l||(r.getAttribute("href")==="#"&&s.preventDefault(),this.debounce(r,s,"click",()=>{this.withinOwners(r,h=>{yt.exec("click",l,h,r,["push",{data:this.eventMeta("click",s,r)}])})}))},i)}dispatchClickAway(e,t){let i=this.binding("click-away");_.all(document,`[${i}]`,n=>{n.isSameNode(t)||n.contains(t)||this.withinOwners(e.target,s=>{let r=n.getAttribute(i);yt.isVisible(n)&&yt.exec("click",r,s,n,["push",{data:this.eventMeta("click",e,e.target)}])})})}bindNav(){if(!wt.canPushState())return;history.scrollRestoration&&(history.scrollRestoration="manual");let e=null;window.addEventListener("scroll",t=>{clearTimeout(e),e=setTimeout(()=>{wt.updateCurrentState(i=>Object.assign(i,{scroll:window.scrollY}))},100)}),window.addEventListener("popstate",t=>{if(!this.registerNewLocation(window.location))return;let{type:i,id:n,root:s,scroll:r}=t.state||{},l=window.location.href;this.requestDOMUpdate(()=>{this.main.isConnected()&&i==="patch"&&n===this.main.id?this.main.pushLinkPatch(l,null):this.replaceMain(l,null,()=>{s&&this.replaceRootHistory(),typeof r=="number"&&setTimeout(()=>{window.scrollTo(0,r)},0)})})},!1),window.addEventListener("click",t=>{let i=Wi(t.target,Ts),n=i&&i.getAttribute(Ts),s=t.metaKey||t.ctrlKey||t.button===1;if(!n||!this.isConnected()||!this.main||s)return;let r=i.href,l=i.getAttribute(oh);t.preventDefault(),t.stopImmediatePropagation(),this.pendingLink!==r&&this.requestDOMUpdate(()=>{if(n==="patch")this.pushHistoryPatch(r,l,i);else if(n==="redirect")this.historyRedirect(r,l);else throw new Error(`expected ${Ts} to be "patch" or "redirect", got: ${n}`);let h=i.getAttribute(this.binding("click"));h&&this.requestDOMUpdate(()=>this.execJS(i,h,"click"))})},!1)}dispatchEvent(e,t={}){_.dispatchEvent(window,`phx:${e}`,{detail:t})}dispatchEvents(e){e.forEach(([t,i])=>this.dispatchEvent(t,i))}withPageLoading(e,t){_.dispatchEvent(window,"phx:page-loading-start",{detail:e});let i=()=>_.dispatchEvent(window,"phx:page-loading-stop",{detail:e});return t?t(i):i}pushHistoryPatch(e,t,i){if(!this.isConnected())return wt.redirect(e);this.withPageLoading({to:e,kind:"patch"},n=>{this.main.pushLinkPatch(e,i,s=>{this.historyPatch(e,t,s),n()})})}historyPatch(e,t,i=this.setPendingLink(e)){!this.commitPendingLink(i)||(wt.pushState(t,{type:"patch",id:this.main.id},e),this.registerNewLocation(window.location))}historyRedirect(e,t,i){if(!this.isConnected())return wt.redirect(e,i);if(/^\/[^\/]+.*$/.test(e)){let{protocol:s,host:r}=window.location;e=`${s}//${r}${e}`}let n=window.scrollY;this.withPageLoading({to:e,kind:"redirect"},s=>{this.replaceMain(e,i,()=>{wt.pushState(t,{type:"redirect",id:this.main.id,scroll:n},e),this.registerNewLocation(window.location),s()})})}replaceRootHistory(){wt.pushState("replace",{root:!0,type:"patch",id:this.main.id})}registerNewLocation(e){let{pathname:t,search:i}=this.currentLocation;return t+i===e.pathname+e.search?!1:(this.currentLocation=In(e),!0)}bindForms(){let e=0,t=!1;this.on("submit",i=>{let n=i.target.getAttribute(this.binding("submit")),s=i.target.getAttribute(this.binding("change"));!t&&s&&!n&&(t=!0,i.preventDefault(),this.withinOwners(i.target,r=>{r.disableForm(i.target),window.requestAnimationFrame(()=>i.target.submit())}))},!0),this.on("submit",i=>{let n=i.target.getAttribute(this.binding("submit"));!n||(i.preventDefault(),i.target.disabled=!0,this.withinOwners(i.target,s=>{yt.exec("submit",n,s,i.target,["push",{}])}))},!1);for(let i of["change","input"])this.on(i,n=>{let s=this.binding("change"),r=n.target,l=r.getAttribute(s),h=r.form&&r.form.getAttribute(s),u=l||h;if(!u||r.type==="number"&&r.validity&&r.validity.badInput)return;let p=l?r:r.form,m=e;e++;let{at:b,type:c}=_.private(r,"prev-iteration")||{};b===m-1&&i!==c||(_.putPrivate(r,"prev-iteration",{at:m,type:i}),this.debounce(r,n,i,()=>{this.withinOwners(p,y=>{_.putPrivate(r,yl,!0),_.isTextualInput(r)||this.setActiveElement(r),yt.exec("change",u,y,r,["push",{_target:n.target.name,dispatcher:p}])})}))},!1)}debounce(e,t,i,n){if(i==="blur"||i==="focusout")return n();let s=this.binding(ch),r=this.binding(dh),l=this.defaults.debounce.toString(),h=this.defaults.throttle.toString();this.withinOwners(e,u=>{let p=()=>!u.isDestroyed()&&document.body.contains(e);_.debounce(e,t,s,l,r,h,p,()=>{n()})})}silenceEvents(e){this.silenced=!0,e(),this.silenced=!1}on(e,t){window.addEventListener(e,i=>{this.silenced||t(i)})}},qh=class{constructor(){this.transitions=new Set,this.pendingOps=[],this.reset()}reset(){this.transitions.forEach(e=>{clearTimeout(e),this.transitions.delete(e)}),this.flushPendingOps()}after(e){this.size()===0?e():this.pushPendingOp(e)}addTransition(e,t,i){t();let n=setTimeout(()=>{this.transitions.delete(n),i(),this.size()===0&&this.flushPendingOps()},e);this.transitions.add(n)}pushPendingOp(e){this.pendingOps.push(e)}size(){return this.transitions.size}flushPendingOps(){this.pendingOps.forEach(e=>e()),this.pendingOps=[]}};var Tl={phoenix:[242,110,64],elixir:[75,68,115],red:[255,99,132],orange:[255,159,64],yellow:[255,205,86],green:[75,192,192],blue:[54,162,253],purple:[153,102,255],grey:[201,203,207]},Cl=Object.keys(Tl),xl={at:e=>{let[t,i,n]=xl.rgb(e);return`rgb(${t}, ${i}, ${n})`},rgb:e=>Tl[Cl[e%Cl.length]]},On={at:e=>{let[t,i,n]=xl.rgb(e);return{stroke:`rgb(${t}, ${i}, ${n})`,fill:`rgb(${t}, ${i}, ${n}, 0.1)`}}};var Ae="u-",Gh="uplot",Kh=Ae+"hz",Yh=Ae+"vt",Xh=Ae+"title",Zh=Ae+"wrap",Qh=Ae+"under",eu=Ae+"over",tu=Ae+"axis",qt=Ae+"off",iu=Ae+"select",nu=Ae+"cursor-x",su=Ae+"cursor-y",ru=Ae+"cursor-pt",lu=Ae+"legend",ou=Ae+"live",au=Ae+"inline",hu=Ae+"thead",uu=Ae+"series",cu=Ae+"marker",Pl=Ae+"label",du=Ae+"value",Yi="width",Xi="height",Gi="top",Ll="bottom",fi="left",Bs="right",tr="#000",Rl=tr+"0",Dl="mousemove",Ml="mousedown",Vs="mouseup",Il="mouseenter",Ol="mouseleave",Nl="dblclick",fu="resize",pu="scroll",Hl="change",$n="dppxchange",wi=typeof window<"u",Ks=wi?document:null,mi=wi?window:null,gu=wi?navigator:null,ne,Nn;function Ys(){let e=devicePixelRatio;ne!=e&&(ne=e,Nn&&Zs(Hl,Nn,Ys),Nn=matchMedia(`(min-resolution: ${ne-.001}dppx) and (max-resolution: ${ne+.001}dppx)`),Kt(Hl,Nn,Ys),mi.dispatchEvent(new CustomEvent($n)))}function it(e,t){if(t!=null){let i=e.classList;!i.contains(t)&&i.add(t)}}function Xs(e,t){let i=e.classList;i.contains(t)&&i.remove(t)}function me(e,t,i){e.style[t]=i+"px"}function Tt(e,t,i,n){let s=Ks.createElement(e);return t!=null&&it(s,t),i?.insertBefore(s,n),s}function at(e,t){return Tt("div",e,t)}var Fl=new WeakMap;function pi(e,t,i,n,s){let r="translate("+t+"px,"+i+"px)",l=Fl.get(e);r!=l&&(e.style.transform=r,Fl.set(e,r),t<0||i<0||t>n||i>s?it(e,qt):Xs(e,qt))}var Ul=new WeakMap;function mu(e,t,i){let n=t+i,s=Ul.get(e);n!=s&&(Ul.set(e,n),e.style.background=t,e.style.borderColor=i)}var $l=new WeakMap;function vu(e,t,i,n){let s=t+""+i,r=$l.get(e);s!=r&&($l.set(e,s),e.style.height=i+"px",e.style.width=t+"px",e.style.marginLeft=n?-t/2+"px":0,e.style.marginTop=n?-i/2+"px":0)}var ir={passive:!0},po={...ir,capture:!0};function Kt(e,t,i,n){t.addEventListener(e,i,n?po:ir)}function Zs(e,t,i,n){t.removeEventListener(e,i,n?po:ir)}wi&&Ys();function Ht(e,t,i,n){let s;i=i||0,n=n||t.length-1;let r=n<=2147483647;for(;n-i>1;)s=r?i+n>>1:nt((i+n)/2),t[s]<e?i=s:n=s;return e-t[i]<=t[n]-e?i:n}function vi(e,t,i,n){for(let s=n==1?t:i;s>=t&&s<=i;s+=n)if(e[s]!=null)return s;return-1}function bu(e,t,i,n){let s=te,r=-te;if(n==1)s=e[t],r=e[i];else if(n==-1)s=e[i],r=e[t];else for(let l=t;l<=i;l++)e[l]!=null&&(s=Ye(s,e[l]),r=Ne(r,e[l]));return[s,r]}function wu(e,t,i){let n=te,s=-te;for(let r=t;r<=i;r++)e[r]>0&&(n=Ye(n,e[r]),s=Ne(s,e[r]));return[n==te?1:n,s==-te?10:s]}var zs=[0,0];function jl(e,t,i,n){return zs[0]=i<0?de(e,-i):e,zs[1]=n<0?de(t,-n):t,zs}function zn(e,t,i,n){let s=_u(e),r=i==10?Yt:go;e==t&&(s==-1?(e*=i,t/=i):(e/=i,t*=i));let l,h,u;return n?(l=nt(r(e)),h=lr(r(t)),u=jl(Ft(i,l),Ft(i,h),l,h),e=u[0],t=u[1]):(l=nt(r(Ke(e))),h=nt(r(Ke(t))),u=jl(Ft(i,l),Ft(i,h),l,h),e=vo(e,u[0]),t=Xt(t,u[1])),[e,t]}function nr(e,t,i,n){let s=zn(e,t,i,n);return e==0&&(s[0]=0),t==0&&(s[1]=0),s}var sr=.1,Bl={mode:3,pad:sr},Qi={pad:0,soft:null,mode:0},yu={min:Qi,max:Qi};function jn(e,t,i,n){return Wn(i)?Vl(e,t,i):(Qi.pad=i,Qi.soft=n?0:null,Qi.mode=n?3:0,Vl(e,t,yu))}function re(e,t){return e??t}function Su(e,t,i){for(t=re(t,0),i=re(i,e.length-1);t<=i;){if(e[t]!=null)return!0;t++}return!1}function Vl(e,t,i){let n=i.min,s=i.max,r=re(n.pad,0),l=re(s.pad,0),h=re(n.hard,-te),u=re(s.hard,te),p=re(n.soft,te),m=re(s.soft,-te),b=re(n.mode,0),c=re(s.mode,0),y=t-e;y<1e-9&&(y=0,(e==0||t==0)&&(y=1e-9,b==2&&p!=te&&(r=0),c==2&&m!=-te&&(l=0)));let S=y||Ke(t)||1e3,k=Yt(S),L=Ft(10,nt(k)),H=S*(y==0?e==0?.1:1:r),M=de(vo(e-H,L/10),9),g=e>=p&&(b==1||b==3&&M<=p||b==2&&M>=p)?p:te,A=Ne(h,M<g&&e>=g?g:Ye(g,M)),R=S*(y==0?t==0?.1:1:l),F=de(Xt(t+R,L/10),9),O=t<=m&&(c==1||c==3&&F>=m||c==2&&F<=m)?m:-te,z=Ye(u,F>O&&t<=O?O:Ne(O,F));return A==z&&A==0&&(z=100),[A,z]}var ku=new Intl.NumberFormat(wi?gu.language:"en-US"),rr=e=>ku.format(e),st=Math,Un=st.PI,Ke=st.abs,nt=st.floor,Re=st.round,lr=st.ceil,Ye=st.min,Ne=st.max,Ft=st.pow,_u=st.sign,Yt=st.log10,go=st.log2,Eu=(e,t=1)=>st.sinh(e)*t,Js=(e,t=1)=>st.asinh(e/t),te=1/0;function zl(e){return(Yt((e^e>>31)-(e>>31))|0)+1}function Wt(e,t){return Re(e/t)*t}function Jl(e,t,i){return Ye(Ne(e,t),i)}function ie(e){return typeof e=="function"?e:()=>e}var Au=e=>e,mo=(e,t)=>t,Cu=e=>null,Wl=e=>!0,ql=(e,t)=>e==t;function Xt(e,t){return lr(e/t)*t}function vo(e,t){return nt(e/t)*t}function de(e,t){return Re(e*(t=10**t))/t}var Jn=new Map;function Tu(e){return((""+e).split(".")[1]||"").length}function tn(e,t,i,n){let s=[],r=n.map(Tu);for(let l=t;l<i;l++){let h=Ke(l),u=de(Ft(e,l),h);for(let p=0;p<n.length;p++){let m=n[p]*u,b=(m>=0&&l>=0?0:h)+(l>=r[p]?0:r[p]),c=de(m,b);s.push(c),Jn.set(c,b)}}return s}var en={},bo=[],bi=[null,null],Gt=Array.isArray;function Gl(e){return typeof e=="string"}function Wn(e){let t=!1;if(e!=null){let i=e.constructor;t=i==null||i==Object}return t}function Kl(e){return e!=null&&typeof e=="object"}var xu=Object.getPrototypeOf(Uint8Array);function Zt(e,t=Wn){let i;if(Gt(e)){let n=e.find(s=>s!=null);if(Gt(n)||t(n)){i=Array(e.length);for(let s=0;s<e.length;s++)i[s]=Zt(e[s],t)}else i=e.slice()}else if(e instanceof xu)i=e.slice();else if(t(e)){i={};for(let n in e)i[n]=Zt(e[n],t)}else i=e;return i}function _e(e){let t=arguments;for(let i=1;i<t.length;i++){let n=t[i];for(let s in n)Wn(e[s])?_e(e[s],Zt(n[s])):e[s]=Zt(n[s])}return e}var Pu=0,Lu=1,Ru=2;function Du(e,t,i){for(let n=0,s,r=-1;n<t.length;n++){let l=t[n];if(l>r){for(s=l-1;s>=0&&e[s]==null;)e[s--]=null;for(s=l+1;s<i&&e[s]==null;)e[r=s++]=null}}}function Mu(e,t){let i=new Set;for(let l=0;l<e.length;l++){let u=e[l][0],p=u.length;for(let m=0;m<p;m++)i.add(u[m])}let n=[Array.from(i).sort((l,h)=>l-h)],s=n[0].length,r=new Map;for(let l=0;l<s;l++)r.set(n[0][l],l);for(let l=0;l<e.length;l++){let h=e[l],u=h[0];for(let p=1;p<h.length;p++){let m=h[p],b=Array(s).fill(void 0),c=t?t[l][p]:Lu,y=[];for(let S=0;S<m.length;S++){let k=m[S],L=r.get(u[S]);k===null?c!=Pu&&(b[L]=k,c==Ru&&y.push(L)):b[L]=k}Du(b,y,s),n.push(b)}}return n}var Iu=typeof queueMicrotask>"u"?e=>Promise.resolve().then(e):queueMicrotask,wo=["January","February","March","April","May","June","July","August","September","October","November","December"],yo=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function So(e){return e.slice(0,3)}var Ou=yo.map(So),Nu=wo.map(So),Hu={MMMM:wo,MMM:Nu,WWWW:yo,WWW:Ou};function Ki(e){return(e<10?"0":"")+e}function Fu(e){return(e<10?"00":e<100?"0":"")+e}var Uu={YYYY:e=>e.getFullYear(),YY:e=>(e.getFullYear()+"").slice(2),MMMM:(e,t)=>t.MMMM[e.getMonth()],MMM:(e,t)=>t.MMM[e.getMonth()],MM:e=>Ki(e.getMonth()+1),M:e=>e.getMonth()+1,DD:e=>Ki(e.getDate()),D:e=>e.getDate(),WWWW:(e,t)=>t.WWWW[e.getDay()],WWW:(e,t)=>t.WWW[e.getDay()],HH:e=>Ki(e.getHours()),H:e=>e.getHours(),h:e=>{let t=e.getHours();return t==0?12:t>12?t-12:t},AA:e=>e.getHours()>=12?"PM":"AM",aa:e=>e.getHours()>=12?"pm":"am",a:e=>e.getHours()>=12?"p":"a",mm:e=>Ki(e.getMinutes()),m:e=>e.getMinutes(),ss:e=>Ki(e.getSeconds()),s:e=>e.getSeconds(),fff:e=>Fu(e.getMilliseconds())};function or(e,t){t=t||Hu;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,s;for(;s=n.exec(e);)i.push(s[0][0]=="{"?Uu[s[1]]:s[0]);return r=>{let l="";for(let h=0;h<i.length;h++)l+=typeof i[h]=="string"?i[h]:i[h](r,t);return l}}var $u=new Intl.DateTimeFormat().resolvedOptions().timeZone;function ju(e,t){let i;return t=="UTC"||t=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):t==$u?i=e:(i=new Date(e.toLocaleString("en-US",{timeZone:t})),i.setMilliseconds(e.getMilliseconds())),i}var ko=e=>e%1==0,Bn=[1,2,2.5,5],Bu=tn(10,-16,0,Bn),_o=tn(10,0,16,Bn),Vu=_o.filter(ko),zu=Bu.concat(_o),ar=`
`,Eo="{YYYY}",Yl=ar+Eo,Ao="{M}/{D}",Zi=ar+Ao,Hn=Zi+"/{YY}",Co="{aa}",Ju="{h}:{mm}",gi=Ju+Co,Xl=ar+gi,Zl=":{ss}",ae=null;function To(e){let t=e*1e3,i=t*60,n=i*60,s=n*24,r=s*30,l=s*365,u=(e==1?tn(10,0,3,Bn).filter(ko):tn(10,-3,0,Bn)).concat([t,t*5,t*10,t*15,t*30,i,i*5,i*10,i*15,i*30,n,n*2,n*3,n*4,n*6,n*8,n*12,s,s*2,s*3,s*4,s*5,s*6,s*7,s*8,s*9,s*10,s*15,r,r*2,r*3,r*4,r*6,l,l*2,l*5,l*10,l*25,l*50,l*100]),p=[[l,Eo,ae,ae,ae,ae,ae,ae,1],[s*28,"{MMM}",Yl,ae,ae,ae,ae,ae,1],[s,Ao,Yl,ae,ae,ae,ae,ae,1],[n,"{h}"+Co,Hn,ae,Zi,ae,ae,ae,1],[i,gi,Hn,ae,Zi,ae,ae,ae,1],[t,Zl,Hn+" "+gi,ae,Zi+" "+gi,ae,Xl,ae,1],[e,Zl+".{fff}",Hn+" "+gi,ae,Zi+" "+gi,ae,Xl,ae,1]];function m(b){return(c,y,S,k,L,H)=>{let M=[],g=L>=l,A=L>=r&&L<l,R=b(S),F=de(R*e,3),O=Ws(R.getFullYear(),g?0:R.getMonth(),A||g?1:R.getDate()),z=de(O*e,3);if(A||g){let U=A?L/r:0,W=g?L/l:0,N=F==z?F:de(Ws(O.getFullYear()+W,O.getMonth()+U,1)*e,3),q=new Date(Re(N/e)),se=q.getFullYear(),X=q.getMonth();for(let C=0;N<=k;C++){let D=Ws(se+W*C,X+U*C,1),T=D-b(de(D*e,3));N=de((+D+T)*e,3),N<=k&&M.push(N)}}else{let U=L>=s?s:L,W=nt(S)-nt(F),N=z+W+Xt(F-z,U);M.push(N);let q=b(N),se=q.getHours()+q.getMinutes()/i+q.getSeconds()/n,X=L/n,C=c.axes[y]._space,D=H/C;for(;N=de(N+L,e==1?0:3),!(N>k);)if(X>1){let T=nt(de(se+X,6))%24,pe=b(N).getHours()-T;pe>1&&(pe=-1),N-=pe*n,se=(se+X)%24;let B=M[M.length-1];de((N-B)/L,3)*D>=.7&&M.push(N)}else M.push(N)}return M}}return[u,p,m]}var[Wu,qu,Gu]=To(1),[Ku,Yu,Xu]=To(.001);tn(2,-53,53,[1]);function Ql(e,t){return e.map(i=>i.map((n,s)=>s==0||s==8||n==null?n:t(s==1||i[8]==0?n:i[1]+n)))}function eo(e,t){return(i,n,s,r,l)=>{let h=t.find(S=>l>=S[0])||t[t.length-1],u,p,m,b,c,y;return n.map(S=>{let k=e(S),L=k.getFullYear(),H=k.getMonth(),M=k.getDate(),g=k.getHours(),A=k.getMinutes(),R=k.getSeconds(),F=L!=u&&h[2]||H!=p&&h[3]||M!=m&&h[4]||g!=b&&h[5]||A!=c&&h[6]||R!=y&&h[7]||h[1];return u=L,p=H,m=M,b=g,c=A,y=R,F(k)})}}function Zu(e,t){let i=or(t);return(n,s,r,l,h)=>s.map(u=>i(e(u)))}function Ws(e,t,i){return new Date(e,t,i)}function to(e,t){return t(e)}var Qu="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function io(e,t){return(i,n)=>t(e(n))}function ec(e,t){let i=e.series[t];return i.width?i.stroke(e,t):i.points.width?i.points.stroke(e,t):null}function tc(e,t){return e.series[t].fill(e,t)}var ic={show:!0,live:!0,isolate:!1,markers:{show:!0,width:2,stroke:ec,fill:tc,dash:"solid"},idx:null,idxs:null,values:[]};function nc(e,t){let i=e.cursor.points,n=at(),s=i.size(e,t);me(n,Yi,s),me(n,Xi,s);let r=s/-2;me(n,"marginLeft",r),me(n,"marginTop",r);let l=i.width(e,t,s);return l&&me(n,"borderWidth",l),n}function sc(e,t){let i=e.series[t].points;return i._fill||i._stroke}function rc(e,t){let i=e.series[t].points;return i._stroke||i._fill}function lc(e,t){let i=e.series[t].points;return Do(i.width,1)}function oc(e,t,i){return i}var qs=[0,0];function ac(e,t,i){return qs[0]=t,qs[1]=i,qs}function Fn(e,t,i){return n=>{n.button==0&&i(n)}}function Gs(e,t,i){return i}var hc={show:!0,x:!0,y:!0,lock:!1,move:ac,points:{show:nc,size:lc,width:0,stroke:rc,fill:sc},bind:{mousedown:Fn,mouseup:Fn,click:Fn,dblclick:Fn,mousemove:Gs,mouseleave:Gs,mouseenter:Gs},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,_x:!1,_y:!1},focus:{prox:-1},left:-10,top:-10,idx:null,dataIdx:oc,idxs:null},xo={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},hr=_e({},xo,{filter:mo}),Po=_e({},hr,{size:10}),Lo=_e({},xo,{show:!1}),ur='12px system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Ro="bold "+ur,uc=1.5,no={show:!0,scale:"x",stroke:tr,space:50,gap:5,size:50,labelGap:0,labelSize:30,labelFont:Ro,side:2,grid:hr,ticks:Po,border:Lo,font:ur,rotate:0},cc="Value",dc="Time",so={show:!0,scale:"x",auto:!1,sorted:1,min:te,max:-te,idxs:[]};function fc(e,t,i,n,s){return t.map(r=>r==null?"":rr(r))}function pc(e,t,i,n,s,r,l){let h=[],u=Jn.get(s)||0;i=l?i:de(Xt(i,s),u);for(let p=i;p<=n;p=de(p+s,u))h.push(Object.is(p,-0)?0:p);return h}function Qs(e,t,i,n,s,r,l){let h=[],u=e.scales[e.axes[t].scale].log,p=u==10?Yt:go,m=nt(p(i));s=Ft(u,m),m<0&&(s=de(s,-m));let b=i;do h.push(b),b=de(b+s,Jn.get(s)),b>=s*u&&(s=b);while(b<=n);return h}function gc(e,t,i,n,s,r,l){let u=e.scales[e.axes[t].scale].asinh,p=n>u?Qs(e,t,Ne(u,i),n,s):[u],m=n>=0&&i<=0?[0]:[];return(i<-u?Qs(e,t,Ne(u,-n),-i,s):[u]).reverse().map(c=>-c).concat(m,p)}var mc=/./,vc=/[12357]/,bc=/[125]/,wc=/1/;function yc(e,t,i,n,s){let r=e.axes[i],l=r.scale,h=e.scales[l];if(h.distr==3&&h.log==2)return t;let u=e.valToPos,p=r._space,m=u(10,l),b=u(9,l)-m>=p?mc:u(7,l)-m>=p?vc:u(5,l)-m>=p?bc:wc;return t.map(c=>h.distr==4&&c==0||b.test(c)?c:null)}function Sc(e,t){return t==null?"":rr(t)}var ro={show:!0,scale:"y",stroke:tr,space:30,gap:5,size:50,labelGap:0,labelSize:30,labelFont:Ro,side:3,grid:hr,ticks:Po,border:Lo,font:ur,rotate:0};function Do(e,t){let i=3+(e||1)*2;return de(i*t,3)}function kc(e,t){let{scale:i,idxs:n}=e.series[0],s=e._data[0],r=e.valToPos(s[n[0]],i,!0),l=e.valToPos(s[n[1]],i,!0),h=Ke(l-r),u=e.series[t],p=h/(u.points.space*ne);return n[1]-n[0]<=p}var lo={scale:null,auto:!0,sorted:0,min:te,max:-te},_c={show:!0,auto:!0,sorted:0,alpha:1,facets:[_e({},lo,{scale:"x"}),_e({},lo,{scale:"y"})]},oo={scale:"y",auto:!0,sorted:0,show:!0,spanGaps:!1,gaps:(e,t,i,n,s)=>s,alpha:1,points:{show:kc,filter:null},values:null,min:te,max:-te,idxs:[],path:null,clip:null};function Ec(e,t,i,n,s){return i/10}var Mo={time:!0,auto:!0,distr:1,log:10,asinh:1,min:null,max:null,dir:1,ori:0},Ac=_e({},Mo,{time:!1,ori:1}),ao={};function Io(e,t){let i=ao[e];return i||(i={key:e,plots:[],sub(n){i.plots.push(n)},unsub(n){i.plots=i.plots.filter(s=>s!=n)},pub(n,s,r,l,h,u,p){for(let m=0;m<i.plots.length;m++)i.plots[m]!=s&&i.plots[m].pub(n,s,r,l,h,u,p)}},e!=null&&(ao[e]=i)),i}var Qt=1<<0,Vn=1<<1;function ei(e,t,i){let n=e.series[t],s=e.scales,r=e.bbox,l=e.mode==2?s[n.facets[0].scale]:s[e.series[0].scale],h=e._data[0],u=e._data[t],p=l,m=e.mode==2?s[n.facets[1].scale]:s[n.scale],b=r.left,c=r.top,y=r.width,S=r.height,k=e.valToPosH,L=e.valToPosV;return p.ori==0?i(n,h,u,p,m,k,L,b,c,y,S,Kn,yi,Xn,No,Fo):i(n,h,u,p,m,L,k,c,b,S,y,Yn,Si,dr,Ho,Uo)}function qn(e,t){let i=0,n=0,s=re(e.bands,bo);for(let r=0;r<s.length;r++){let l=s[r];l.series[0]==t?i=l.dir:l.series[1]==t&&(l.dir==1?n|=1:n|=2)}return[i,n==1?-1:n==2?1:n==3?2:0]}function Cc(e,t,i,n,s){let r=e.scales[e.series[t].scale];return s==-1?r.min:s==1?r.max:r.distr==3?r.dir==1?r.min:r.max:0}function xt(e,t,i,n,s,r){return ei(e,t,(l,h,u,p,m,b,c,y,S,k,L)=>{let H=l.pxRound,M=p.dir*(p.ori==0?1:-1),g=p.ori==0?yi:Si,A,R;M==1?(A=i,R=n):(A=n,R=i);let F=H(b(h[A],p,k,y)),O=H(c(u[A],m,L,S)),z=H(b(h[R],p,k,y)),U=H(c(r==1?m.max:m.min,m,L,S)),W=new Path2D(s);return g(W,z,U),g(W,F,U),g(W,F,O),W})}function Gn(e,t,i,n,s,r){let l=null;if(e.length>0){l=new Path2D;let h=t==0?Xn:dr,u=i;for(let m=0;m<e.length;m++){let b=e[m];if(b[1]>b[0]){let c=b[0]-u;c>0&&h(l,u,n,c,n+r),u=b[1]}}let p=i+s-u;p>0&&h(l,u,n,p,n+r)}return l}function Tc(e,t,i){let n=e[e.length-1];n&&n[0]==t?n[1]=i:e.push([t,i])}function cr(e,t,i,n,s,r,l){let h=[];for(let u=s==1?i:n;u>=i&&u<=n;u+=s)if(t[u]===null){let m=u,b=u;if(s==1)for(;++u<=n&&t[u]===null;)b=u;else for(;--u>=i&&t[u]===null;)b=u;let c=r(e[m]),y=b==m?c:r(e[b]);c=l<=0?r(e[m-s]):c,y=l>=0?r(e[b+s]):y,y>=c&&h.push([c,y])}return h}function ho(e){return e==0?Au:e==1?Re:t=>Wt(t,e)}function Oo(e){let t=e==0?Kn:Yn,i=e==0?(s,r,l,h,u,p)=>{s.arcTo(r,l,h,u,p)}:(s,r,l,h,u,p)=>{s.arcTo(l,r,u,h,p)},n=e==0?(s,r,l,h,u)=>{s.rect(r,l,h,u)}:(s,r,l,h,u)=>{s.rect(l,r,u,h)};return(s,r,l,h,u,p=0)=>{p==0?n(s,r,l,h,u):(p=Ye(p,h/2,u/2),t(s,r+p,l),i(s,r+h,l,r+h,l+u,p),i(s,r+h,l+u,r,l+u,p),i(s,r,l+u,r,l,p),i(s,r,l,r+h,l,p),s.closePath())}}var Kn=(e,t,i)=>{e.moveTo(t,i)},Yn=(e,t,i)=>{e.moveTo(i,t)},yi=(e,t,i)=>{e.lineTo(t,i)},Si=(e,t,i)=>{e.lineTo(i,t)},Xn=Oo(0),dr=Oo(1),No=(e,t,i,n,s,r)=>{e.arc(t,i,n,s,r)},Ho=(e,t,i,n,s,r)=>{e.arc(i,t,n,s,r)},Fo=(e,t,i,n,s,r,l)=>{e.bezierCurveTo(t,i,n,s,r,l)},Uo=(e,t,i,n,s,r,l)=>{e.bezierCurveTo(i,t,s,n,l,r)};function $o(e){return(t,i,n,s,r)=>ei(t,i,(l,h,u,p,m,b,c,y,S,k,L)=>{let{pxRound:H,points:M}=l,g,A;p.ori==0?(g=Kn,A=No):(g=Yn,A=Ho);let R=de(M.width*ne,3),F=(M.size-M.width)/2*ne,O=de(F*2,3),z=new Path2D,U=new Path2D,{left:W,top:N,width:q,height:se}=t.bbox;Xn(U,W-O,N-O,q+O*2,se+O*2);let X=C=>{if(u[C]!=null){let D=H(b(h[C],p,k,y)),T=H(c(u[C],m,L,S));g(z,D+F,T),A(z,D,T,F,0,Un*2)}};if(r)r.forEach(X);else for(let C=n;C<=s;C++)X(C);return{stroke:R>0?z:null,fill:z,clip:U,flags:Qt|Vn}})}function jo(e){return(t,i,n,s,r,l)=>{n!=s&&(r!=n&&l!=n&&e(t,i,n),r!=s&&l!=s&&e(t,i,s),e(t,i,l))}}var xc=jo(yi),Pc=jo(Si);function Bo(e){let t=re(e?.alignGaps,0);return(i,n,s,r)=>ei(i,n,(l,h,u,p,m,b,c,y,S,k,L)=>{let H=l.pxRound,M=B=>H(b(B,p,k,y)),g=B=>H(c(B,m,L,S)),A,R;p.ori==0?(A=yi,R=xc):(A=Si,R=Pc);let F=p.dir*(p.ori==0?1:-1),O={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Qt},z=O.stroke,U=te,W=-te,N,q,se,X=M(h[F==1?s:r]),C=vi(u,s,r,1*F),D=vi(u,s,r,-1*F),T=M(h[C]),J=M(h[D]);for(let B=F==1?s:r;B>=s&&B<=r;B+=F){let V=M(h[B]);V==X?u[B]!=null&&(q=g(u[B]),U==te&&(A(z,V,q),N=q),U=Ye(q,U),W=Ne(q,W)):(U!=te&&(R(z,X,U,W,N,q),se=X),u[B]!=null?(q=g(u[B]),A(z,V,q),U=W=N=q):(U=te,W=-te),X=V)}U!=te&&U!=W&&se!=X&&R(z,X,U,W,N,q);let[he,pe]=qn(i,n);if(l.fill!=null||he!=0){let B=O.fill=new Path2D(z),V=l.fillTo(i,n,l.min,l.max,he),ue=g(V);A(B,J,ue),A(B,T,ue)}if(!l.spanGaps){let B=[];B.push(...cr(h,u,s,r,F,M,t)),O.gaps=B=l.gaps(i,n,s,r,B),O.clip=Gn(B,p.ori,y,S,k,L)}return pe!=0&&(O.band=pe==2?[xt(i,n,s,r,z,-1),xt(i,n,s,r,z,1)]:xt(i,n,s,r,z,pe)),O})}function Lc(e){let t=re(e.align,1),i=re(e.ascDesc,!1),n=re(e.alignGaps,0);return(s,r,l,h)=>ei(s,r,(u,p,m,b,c,y,S,k,L,H,M)=>{let g=u.pxRound,A=C=>g(y(C,b,H,k)),R=C=>g(S(C,c,M,L)),F=b.ori==0?yi:Si,O={stroke:new Path2D,fill:null,clip:null,band:null,gaps:null,flags:Qt},z=O.stroke,U=b.dir*(b.ori==0?1:-1);l=vi(m,l,h,1),h=vi(m,l,h,-1);let W=R(m[U==1?l:h]),N=A(p[U==1?l:h]),q=N;F(z,N,W);for(let C=U==1?l:h;C>=l&&C<=h;C+=U){let D=m[C];if(D==null)continue;let T=A(p[C]),J=R(D);t==1?F(z,T,W):F(z,q,J),F(z,T,J),W=J,q=T}let[se,X]=qn(s,r);if(u.fill!=null||se!=0){let C=O.fill=new Path2D(z),D=u.fillTo(s,r,u.min,u.max,se),T=R(D);F(C,q,T),F(C,N,T)}if(!u.spanGaps){let C=[];C.push(...cr(p,m,l,h,U,A,n));let D=u.width*ne/2,T=i||t==1?D:-D,J=i||t==-1?-D:D;C.forEach(he=>{he[0]+=T,he[1]+=J}),O.gaps=C=u.gaps(s,r,l,h,C),O.clip=Gn(C,b.ori,k,L,H,M)}return X!=0&&(O.band=X==2?[xt(s,r,l,h,z,-1),xt(s,r,l,h,z,1)]:xt(s,r,l,h,z,X)),O})}function Rc(e){e=e||en;let t=re(e.size,[.6,te,1]),i=e.align||0,n=(e.gap||0)*ne,s=re(e.radius,0),r=1-t[0],l=re(t[1],te)*ne,h=re(t[2],1)*ne,u=re(e.disp,en),p=re(e.each,c=>{}),{fill:m,stroke:b}=u;return(c,y,S,k)=>ei(c,y,(L,H,M,g,A,R,F,O,z,U,W)=>{let N=L.pxRound,q=g.dir*(g.ori==0?1:-1),se=A.dir*(A.ori==1?1:-1),X=g.ori==0?Xn:dr,C=g.ori==0?p:(le,je,Xe,K,Q,ye,Ce)=>{p(le,je,Xe,Q,K,Ce,ye)},[D,T]=qn(c,y),J=A.distr==3?D==1?A.max:A.min:0,he=F(J,A,W,z),pe,B,V=N(L.width*ne),ue=!1,ce=null,we=null,Ve=null,ht=null;m!=null&&(V==0||b!=null)&&(ue=!0,ce=m.values(c,y,S,k),we=new Map,new Set(ce).forEach(le=>{le!=null&&we.set(le,new Path2D)}),V>0&&(Ve=b.values(c,y,S,k),ht=new Map,new Set(Ve).forEach(le=>{le!=null&&ht.set(le,new Path2D)})));let{x0:Pt,size:rt}=u;if(Pt!=null&&rt!=null){H=Pt.values(c,y,S,k),Pt.unit==2&&(H=H.map(je=>c.posToVal(O+je*U,g.key,!0)));let le=rt.values(c,y,S,k);rt.unit==2?B=le[0]*U:B=R(le[0],g,U,O)-R(0,g,U,O),B=N(B-V),pe=q==1?-V/2:B+V/2}else{let le=U;if(H.length>1){let Xe=null;for(let K=0,Q=1/0;K<H.length;K++)if(M[K]!==void 0){if(Xe!=null){let ye=Ke(H[K]-H[Xe]);ye<Q&&(Q=ye,le=Ke(R(H[K],g,U,O)-R(H[Xe],g,U,O)))}Xe=K}}let je=le*r;B=N(Ye(l,Ne(h,le-je))-V-n),pe=(i==0?B/2:i==q?0:B)-i*q*n/2}let kt={stroke:null,fill:null,clip:null,band:null,gaps:null,flags:Qt|Vn},ki;T!=0&&(kt.band=new Path2D,ki=N(F(T==1?A.max:A.min,A,W,z)));let ii=ue?null:new Path2D,ns=kt.band,{y0:rn,y1:Lt}=u,lt=null;rn!=null&&Lt!=null&&(M=Lt.values(c,y,S,k),lt=rn.values(c,y,S,k));for(let le=q==1?S:k;le>=S&&le<=k;le+=q){let je=M[le];if(je===void 0)continue;let Xe=g.distr!=2||u!=null?H[le]:le,K=R(Xe,g,U,O),Q=F(re(je,J),A,W,z);lt!=null&&je!=null&&(he=F(lt[le],A,W,z));let ye=N(K-pe),Ce=N(Ne(Q,he)),Te=N(Ye(Q,he)),ze=Ce-Te,ut=s*B;je!=null&&(ue?(V>0&&Ve[le]!=null&&X(ht.get(Ve[le]),ye,Te+nt(V/2),B,Ne(0,ze-V),ut),ce[le]!=null&&X(we.get(ce[le]),ye,Te+nt(V/2),B,Ne(0,ze-V),ut)):X(ii,ye,Te+nt(V/2),B,Ne(0,ze-V),ut),C(c,y,le,ye-V/2,Te,B+V,ze)),T!=0&&(se*T==1?(Ce=Te,Te=ki):(Te=Ce,Ce=ki),ze=Ce-Te,X(ns,ye-V/2,Te,B+V,Ne(0,ze),0))}return V>0&&(kt.stroke=ue?ht:ii),kt.fill=ue?we:ii,kt})}function Dc(e,t){let i=re(t?.alignGaps,0);return(n,s,r,l)=>ei(n,s,(h,u,p,m,b,c,y,S,k,L,H)=>{let M=h.pxRound,g=T=>M(c(T,m,L,S)),A=T=>M(y(T,b,H,k)),R,F,O;m.ori==0?(R=Kn,O=yi,F=Fo):(R=Yn,O=Si,F=Uo);let z=m.dir*(m.ori==0?1:-1);r=vi(p,r,l,1),l=vi(p,r,l,-1);let U=g(u[z==1?r:l]),W=U,N=[],q=[];for(let T=z==1?r:l;T>=r&&T<=l;T+=z)if(p[T]!=null){let he=u[T],pe=g(he);N.push(W=pe),q.push(A(p[T]))}let se={stroke:e(N,q,R,O,F,M),fill:null,clip:null,band:null,gaps:null,flags:Qt},X=se.stroke,[C,D]=qn(n,s);if(h.fill!=null||C!=0){let T=se.fill=new Path2D(X),J=h.fillTo(n,s,h.min,h.max,C),he=A(J);O(T,W,he),O(T,U,he)}if(!h.spanGaps){let T=[];T.push(...cr(u,p,r,l,z,g,i)),se.gaps=T=h.gaps(n,s,r,l,T),se.clip=Gn(T,m.ori,S,k,L,H)}return D!=0&&(se.band=D==2?[xt(n,s,r,l,X,-1),xt(n,s,r,l,X,1)]:xt(n,s,r,l,X,D)),se})}function Mc(e){return Dc(Ic,e)}function Ic(e,t,i,n,s,r){let l=e.length;if(l<2)return null;let h=new Path2D;if(i(h,e[0],t[0]),l==2)n(h,e[1],t[1]);else{let u=Array(l),p=Array(l-1),m=Array(l-1),b=Array(l-1);for(let c=0;c<l-1;c++)m[c]=t[c+1]-t[c],b[c]=e[c+1]-e[c],p[c]=m[c]/b[c];u[0]=p[0];for(let c=1;c<l-1;c++)p[c]===0||p[c-1]===0||p[c-1]>0!=p[c]>0?u[c]=0:(u[c]=3*(b[c-1]+b[c])/((2*b[c]+b[c-1])/p[c-1]+(b[c]+2*b[c-1])/p[c]),isFinite(u[c])||(u[c]=0));u[l-1]=p[l-2];for(let c=0;c<l-1;c++)s(h,e[c]+b[c]/3,t[c]+u[c]*b[c]/3,e[c+1]-b[c]/3,t[c+1]-u[c+1]*b[c]/3,e[c+1],t[c+1])}return h}var er=new Set;function uo(){er.forEach(e=>{e.syncRect(!0)})}wi&&(Kt(fu,mi,uo),Kt(pu,mi,uo,!0),Kt($n,mi,()=>{Ee.pxRatio=ne}));var Oc=Bo(),Nc=$o();function co(e,t,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((r,l)=>Vo(r,l,t,i))}function Hc(e,t){return e.map((i,n)=>n==0?null:_e({},t,i))}function Vo(e,t,i,n){return _e({},t==0?i:n,e)}function zo(e,t,i){return t==null?bi:[t,i]}var Fc=zo;function Uc(e,t,i){return t==null?bi:jn(t,i,sr,!0)}function Jo(e,t,i,n){return t==null?bi:zn(t,i,e.scales[n].log,!1)}var $c=Jo;function Wo(e,t,i,n){return t==null?bi:nr(t,i,e.scales[n].log,!1)}var jc=Wo;function Bc(e,t,i,n,s){let r=Ne(zl(e),zl(t)),l=t-e,h=Ht(s/n*l,i);do{let u=i[h],p=n*u/l;if(p>=s&&r+(u<5?Jn.get(u):0)<=17)return[u,p]}while(++h<i.length);return[0,0]}function fo(e){let t,i;return e=e.replace(/(\d+)px/,(n,s)=>(t=Re((i=+s)*ne))+"px"),[e,t,i]}function Vc(e){e.show&&[e.font,e.labelFont].forEach(t=>{let i=de(t[2]*ne,1);t[0]=t[0].replace(/[0-9.]+px/,i+"px"),t[1]=i})}function Ee(e,t,i){let n={mode:re(e.mode,1)},s=n.mode;function r(o,a){return((a.distr==3?Yt(o>0?o:a.clamp(n,o,a.min,a.max,a.key)):a.distr==4?Js(o,a.asinh):o)-a._min)/(a._max-a._min)}function l(o,a,d,f){let v=r(o,a);return f+d*(a.dir==-1?1-v:v)}function h(o,a,d,f){let v=r(o,a);return f+d*(a.dir==-1?v:1-v)}function u(o,a,d,f){return a.ori==0?l(o,a,d,f):h(o,a,d,f)}n.valToPosH=l,n.valToPosV=h;let p=!1;n.status=0;let m=n.root=at(Gh);if(e.id!=null&&(m.id=e.id),it(m,e.class),e.title){let o=at(Xh,m);o.textContent=e.title}let b=Tt("canvas"),c=n.ctx=b.getContext("2d"),y=at(Zh,m),S=n.under=at(Qh,y);y.appendChild(b);let k=n.over=at(eu,y);e=Zt(e);let L=+re(e.pxAlign,1),H=ho(L);(e.plugins||[]).forEach(o=>{o.opts&&(e=o.opts(n,e)||e)});let M=e.ms||.001,g=n.series=s==1?co(e.series||[],so,oo,!1):Hc(e.series||[null],_c),A=n.axes=co(e.axes||[],no,ro,!0),R=n.scales={},F=n.bands=e.bands||[];F.forEach(o=>{o.fill=ie(o.fill||null),o.dir=re(o.dir,-1)});let O=s==2?g[1].facets[0].scale:g[0].scale,z={axes:Ta,series:ka},U=(e.drawOrder||["axes","series"]).map(o=>z[o]);function W(o){let a=R[o];if(a==null){let d=(e.scales||en)[o]||en;if(d.from!=null)W(d.from),R[o]=_e({},R[d.from],d,{key:o});else{a=R[o]=_e({},o==O?Mo:Ac,d),a.key=o;let f=a.time,v=a.range,w=Gt(v);if((o!=O||s==2&&!f)&&(w&&(v[0]==null||v[1]==null)&&(v={min:v[0]==null?Bl:{mode:1,hard:v[0],soft:v[0]},max:v[1]==null?Bl:{mode:1,hard:v[1],soft:v[1]}},w=!1),!w&&Wn(v))){let E=v;v=(x,I,j)=>I==null?bi:jn(I,j,E)}a.range=ie(v||(f?Fc:o==O?a.distr==3?$c:a.distr==4?jc:zo:a.distr==3?Jo:a.distr==4?Wo:Uc)),a.auto=ie(w?!1:a.auto),a.clamp=ie(a.clamp||Ec),a._min=a._max=null}}}W("x"),W("y"),s==1&&g.forEach(o=>{W(o.scale)}),A.forEach(o=>{W(o.scale)});for(let o in e.scales)W(o);let N=R[O],q=N.distr,se,X;N.ori==0?(it(m,Kh),se=l,X=h):(it(m,Yh),se=h,X=l);let C={};for(let o in R){let a=R[o];(a.min!=null||a.max!=null)&&(C[o]={min:a.min,max:a.max},a.min=a.max=null)}let D=e.tzDate||(o=>new Date(Re(o/M))),T=e.fmtDate||or,J=M==1?Gu(D):Xu(D),he=eo(D,Ql(M==1?qu:Yu,T)),pe=io(D,to(Qu,T)),B=[],V=n.legend=_e({},ic,e.legend),ue=V.show,ce=V.markers;V.idxs=B,ce.width=ie(ce.width),ce.dash=ie(ce.dash),ce.stroke=ie(ce.stroke),ce.fill=ie(ce.fill);let we,Ve=[],ht=[],Pt,rt=!1,kt={};if(V.live){let o=g[1]?g[1].values:null;rt=o!=null,Pt=rt?o(n,1,0):{_:0};for(let a in Pt)kt[a]="--"}if(ue)if(we=Tt("table",lu,m),rt){let o=Tt("tr",hu,we);Tt("th",null,o);for(var ki in Pt)Tt("th",Pl,o).textContent=ki}else it(we,au),V.live&&it(we,ou);let ii={show:!0},ns={show:!1};function rn(o,a){if(a==0&&(rt||!V.live||s==2))return bi;let d=[],f=Tt("tr",uu,we,we.childNodes[a]);it(f,o.class),o.show||it(f,qt);let v=Tt("th",null,f);if(ce.show){let x=at(cu,v);if(a>0){let I=ce.width(n,a);I&&(x.style.border=I+"px "+ce.dash(n,a)+" "+ce.stroke(n,a)),x.style.background=ce.fill(n,a)}}let w=at(Pl,v);w.textContent=o.label,a>0&&(ce.show||(w.style.color=o.width>0?ce.stroke(n,a):ce.fill(n,a)),lt("click",v,x=>{if(G._lock)return;let I=g.indexOf(o);if((x.ctrlKey||x.metaKey)!=V.isolate){let j=g.some((P,$)=>$>0&&$!=I&&P.show);g.forEach((P,$)=>{$>0&&gt($,j?$==I?ii:ns:ii,!0,Oe.setSeries)})}else gt(I,{show:!o.show},!0,Oe.setSeries)}),an&&lt(Il,v,x=>{G._lock||gt(g.indexOf(o),li,!0,Oe.setSeries)}));for(var E in Pt){let x=Tt("td",du,f);x.textContent="--",d.push(x)}return[f,d]}let Lt=new Map;function lt(o,a,d){let f=Lt.get(a)||{},v=G.bind[o](n,a,d);v&&(Kt(o,a,f[o]=v),Lt.set(a,f))}function le(o,a,d){let f=Lt.get(a)||{};for(let v in f)(o==null||v==o)&&(Zs(v,a,f[v]),delete f[v]);o==null&&Lt.delete(a)}let je=0,Xe=0,K=0,Q=0,ye=0,Ce=0,Te=0,ze=0,ut=0,Ut=0;n.bbox={};let ss=!1,ln=!1,ni=!1,_i=!1,pt=!1;function rs(o,a,d){(d||o!=n.width||a!=n.height)&&br(o,a),Ci(!1),ni=!0,ln=!0,_i=pt=G.left>=0,jt()}function br(o,a){n.width=je=K=o,n.height=Xe=Q=a,ye=Ce=0,pa(),ga();let d=n.bbox;Te=d.left=Wt(ye*ne,.5),ze=d.top=Wt(Ce*ne,.5),ut=d.width=Wt(K*ne,.5),Ut=d.height=Wt(Q*ne,.5)}let ca=3;function da(){let o=!1,a=0;for(;!o;){a++;let d=Aa(a),f=Ca(a);o=a==ca||d&&f,o||(br(n.width,n.height),ln=!0)}}function fa({width:o,height:a}){rs(o,a)}n.setSize=fa;function pa(){let o=!1,a=!1,d=!1,f=!1;A.forEach((v,w)=>{if(v.show&&v._show){let{side:E,_size:x}=v,I=E%2,j=v.label!=null?v.labelSize:0,P=x+j;P>0&&(I?(K-=P,E==3?(ye+=P,f=!0):d=!0):(Q-=P,E==0?(Ce+=P,o=!0):a=!0))}}),$t[0]=o,$t[1]=d,$t[2]=a,$t[3]=f,K-=Rt[1]+Rt[3],ye+=Rt[3],Q-=Rt[2]+Rt[0],Ce+=Rt[0]}function ga(){let o=ye+K,a=Ce+Q,d=ye,f=Ce;function v(w,E){switch(w){case 1:return o+=E,o-E;case 2:return a+=E,a-E;case 3:return d-=E,d+E;case 0:return f-=E,f+E}}A.forEach((w,E)=>{if(w.show&&w._show){let x=w.side;w._pos=v(x,w._size),w.label!=null&&(w._lpos=v(x,w.labelSize))}})}let G=n.cursor=_e({},hc,{drag:{y:s==2}},e.cursor);{G.idxs=B,G._lock=!1;let o=G.points;o.show=ie(o.show),o.size=ie(o.size),o.stroke=ie(o.stroke),o.width=ie(o.width),o.fill=ie(o.fill)}let on=n.focus=_e({},e.focus||{alpha:.3},G.focus),an=on.prox>=0,Je=[null];function ma(o,a){if(a>0){let d=G.points.show(n,a);if(d)return it(d,ru),it(d,o.class),pi(d,-10,-10,K,Q),k.insertBefore(d,Je[a]),d}}function wr(o,a){if(s==1||a>0){let d=s==1&&R[o.scale].time,f=o.value;o.value=d?Gl(f)?io(D,to(f,T)):f||pe:f||Sc,o.label=o.label||(d?dc:cc)}if(a>0){o.width=o.width==null?1:o.width,o.paths=o.paths||Oc||Cu,o.fillTo=ie(o.fillTo||Cc),o.pxAlign=+re(o.pxAlign,L),o.pxRound=ho(o.pxAlign),o.stroke=ie(o.stroke||null),o.fill=ie(o.fill||null),o._stroke=o._fill=o._paths=o._focus=null;let d=Do(o.width,1),f=o.points=_e({},{size:d,width:Ne(1,d*.2),stroke:o.stroke,space:d*2,paths:Nc,_stroke:null,_fill:null},o.points);f.show=ie(f.show),f.filter=ie(f.filter),f.fill=ie(f.fill),f.stroke=ie(f.stroke),f.paths=ie(f.paths),f.pxAlign=o.pxAlign}if(ue){let d=rn(o,a);Ve.splice(a,0,d[0]),ht.splice(a,0,d[1]),V.values.push(null)}if(G.show){B.splice(a,0,null);let d=ma(o,a);d&&Je.splice(a,0,d)}Ie("addSeries",a)}function va(o,a){a=a??g.length,o=Vo(o,a,so,oo),g.splice(a,0,o),wr(g[a],a)}n.addSeries=va;function ba(o){if(g.splice(o,1),ue){V.values.splice(o,1),ht.splice(o,1);let a=Ve.splice(o,1)[0];le(null,a.firstChild),a.remove()}G.show&&(B.splice(o,1),Je.length>1&&Je.splice(o,1)[0].remove()),Ie("delSeries",o)}n.delSeries=ba;let $t=[!1,!1,!1,!1];function wa(o,a){if(o._show=o.show,o.show){let d=o.side%2,f=R[o.scale];f==null&&(o.scale=d?g[1].scale:O,f=R[o.scale]);let v=f.time;o.size=ie(o.size),o.space=ie(o.space),o.rotate=ie(o.rotate),o.incrs=ie(o.incrs||(f.distr==2?Vu:v?M==1?Wu:Ku:zu)),o.splits=ie(o.splits||(v&&f.distr==1?J:f.distr==3?Qs:f.distr==4?gc:pc)),o.stroke=ie(o.stroke),o.grid.stroke=ie(o.grid.stroke),o.ticks.stroke=ie(o.ticks.stroke),o.border.stroke=ie(o.border.stroke);let w=o.values;o.values=Gt(w)&&!Gt(w[0])?ie(w):v?Gt(w)?eo(D,Ql(w,T)):Gl(w)?Zu(D,w):w||he:w||fc,o.filter=ie(o.filter||(f.distr>=3?yc:mo)),o.font=fo(o.font),o.labelFont=fo(o.labelFont),o._size=o.size(n,null,a,0),o._space=o._rotate=o._incrs=o._found=o._splits=o._values=null,o._size>0&&($t[a]=!0,o._el=at(tu,y))}}function Ei(o,a,d,f){let[v,w,E,x]=d,I=a%2,j=0;return I==0&&(x||w)&&(j=a==0&&!v||a==2&&!E?Re(no.size/3):0),I==1&&(v||E)&&(j=a==1&&!w||a==3&&!x?Re(ro.size/2):0),j}let yr=n.padding=(e.padding||[Ei,Ei,Ei,Ei]).map(o=>ie(re(o,Ei))),Rt=n._padding=yr.map((o,a)=>o(n,a,$t,0)),xe,De=null,Me=null,hn=s==1?g[0].idxs:null,ct=null,un=!1;function Sr(o,a){if(t=o==null?[]:Zt(o,Kl),s==2){xe=0;for(let d=1;d<g.length;d++)xe+=t[d][0].length;n.data=t=o}else if(t[0]==null&&(t[0]=[]),n.data=t.slice(),ct=t[0],xe=ct.length,q==2){t[0]=Array(xe);for(let d=0;d<xe;d++)t[0][d]=d}if(n._data=t,Ci(!0),Ie("setData"),q==2&&(ni=!0),a!==!1){let d=N;d.auto(n,un)?ls():ri(O,d.min,d.max),_i=G.left>=0,pt=!0,jt()}}n.setData=Sr;function ls(){un=!0;let o,a;s==1&&(xe>0?(De=hn[0]=0,Me=hn[1]=xe-1,o=t[0][De],a=t[0][Me],q==2?(o=De,a=Me):xe==1&&(q==3?[o,a]=zn(o,o,N.log,!1):q==4?[o,a]=nr(o,o,N.log,!1):N.time?a=o+Re(86400/M):[o,a]=jn(o,a,sr,!0))):(De=hn[0]=o=null,Me=hn[1]=a=null)),ri(O,o,a)}let cn,si,os,as,hs,us,cs,ds,fs,Ai;function kr(o=Rl,a,d=bo,f="butt",v=Rl,w="round"){o!=cn&&(c.strokeStyle=cn=o),v!=si&&(c.fillStyle=si=v),a!=os&&(c.lineWidth=os=a),w!=hs&&(c.lineJoin=hs=w),f!=us&&(c.lineCap=us=f),d!=as&&c.setLineDash(as=d)}function _r(o,a,d,f){a!=si&&(c.fillStyle=si=a),o!=cs&&(c.font=cs=o),d!=ds&&(c.textAlign=ds=d),f!=fs&&(c.textBaseline=fs=f)}function ps(o,a,d,f,v=0){if(f.length>0&&o.auto(n,un)&&(a==null||a.min==null)){let w=re(De,0),E=re(Me,f.length-1),x=d.min==null?o.distr==3?wu(f,w,E):bu(f,w,E,v):[d.min,d.max];o.min=Ye(o.min,d.min=x[0]),o.max=Ne(o.max,d.max=x[1])}}function ya(){let o=Zt(R,Kl);for(let f in o){let v=o[f],w=C[f];if(w!=null&&w.min!=null)_e(v,w),f==O&&Ci(!0);else if(f!=O||s==2)if(xe==0&&v.from==null){let E=v.range(n,null,null,f);v.min=E[0],v.max=E[1]}else v.min=te,v.max=-te}if(xe>0){g.forEach((f,v)=>{if(s==1){let w=f.scale,E=o[w],x=C[w];if(v==0){let I=E.range(n,E.min,E.max,w);E.min=I[0],E.max=I[1],De=Ht(E.min,t[0]),Me=Ht(E.max,t[0]),t[0][De]<E.min&&De++,t[0][Me]>E.max&&Me--,f.min=ct[De],f.max=ct[Me]}else f.show&&f.auto&&ps(E,x,f,t[v],f.sorted);f.idxs[0]=De,f.idxs[1]=Me}else if(v>0&&f.show&&f.auto){let[w,E]=f.facets,x=w.scale,I=E.scale,[j,P]=t[v];ps(o[x],C[x],w,j,w.sorted),ps(o[I],C[I],E,P,E.sorted),f.min=E.min,f.max=E.max}});for(let f in o){let v=o[f],w=C[f];if(v.from==null&&(w==null||w.min==null)){let E=v.range(n,v.min==te?null:v.min,v.max==-te?null:v.max,f);v.min=E[0],v.max=E[1]}}}for(let f in o){let v=o[f];if(v.from!=null){let w=o[v.from];if(w.min==null)v.min=v.max=null;else{let E=v.range(n,w.min,w.max,f);v.min=E[0],v.max=E[1]}}}let a={},d=!1;for(let f in o){let v=o[f],w=R[f];if(w.min!=v.min||w.max!=v.max){w.min=v.min,w.max=v.max;let E=w.distr;w._min=E==3?Yt(w.min):E==4?Js(w.min,w.asinh):w.min,w._max=E==3?Yt(w.max):E==4?Js(w.max,w.asinh):w.max,a[f]=d=!0}}if(d){g.forEach((f,v)=>{s==2?v>0&&a.y&&(f._paths=null):a[f.scale]&&(f._paths=null)});for(let f in a)ni=!0,Ie("setScale",f);G.show&&(_i=pt=G.left>=0)}for(let f in C)C[f]=null}function Sa(o){let a=Jl(De-1,0,xe-1),d=Jl(Me+1,0,xe-1);for(;o[a]==null&&a>0;)a--;for(;o[d]==null&&d<xe-1;)d++;return[a,d]}function ka(){xe>0&&(g.forEach((o,a)=>{if(a>0&&o.show&&o._paths==null){let d=Sa(t[a]);o._paths=o.paths(n,a,d[0],d[1])}}),g.forEach((o,a)=>{if(a>0&&o.show){Ai!=o.alpha&&(c.globalAlpha=Ai=o.alpha),Er(a,!1),o._paths&&Ar(a,!1);{Er(a,!0);let d=o.points.show(n,a,De,Me),f=o.points.filter(n,a,d,o._paths?o._paths.gaps:null);(d||f)&&(o.points._paths=o.points.paths(n,a,De,Me,f),Ar(a,!0))}Ai!=1&&(c.globalAlpha=Ai=1),Ie("drawSeries",a)}}))}function Er(o,a){let d=a?g[o].points:g[o];d._stroke=d.stroke(n,o),d._fill=d.fill(n,o)}function Ar(o,a){let d=a?g[o].points:g[o],f=d._stroke,v=d._fill,{stroke:w,fill:E,clip:x,flags:I}=d._paths,j=null,P=de(d.width*ne,3),$=P%2/2;a&&v==null&&(v=P>0?"#fff":f);let Y=d.pxAlign==1;if(Y&&c.translate($,$),!a){let Se=Te,Z=ze,fe=ut,ee=Ut,oe=P*ne/2;d.min==0&&(ee+=oe),d.max==0&&(Z-=oe,ee+=oe),j=new Path2D,j.rect(Se,Z,fe,ee)}a?gs(f,P,d.dash,d.cap,v,w,E,I,x):_a(o,f,P,d.dash,d.cap,v,w,E,I,j,x),Y&&c.translate(-$,-$)}function _a(o,a,d,f,v,w,E,x,I,j,P){let $=!1;F.forEach((Y,Se)=>{if(Y.series[0]==o){let Z=g[Y.series[1]],fe=t[Y.series[1]],ee=(Z._paths||en).band;Gt(ee)&&(ee=Y.dir==1?ee[0]:ee[1]);let oe,ke=null;Z.show&&ee&&Su(fe,De,Me)?(ke=Y.fill(n,Se)||w,oe=Z._paths.clip):ee=null,gs(a,d,f,v,ke,E,x,I,j,P,oe,ee),$=!0}}),$||gs(a,d,f,v,w,E,x,I,j,P)}let Cr=Qt|Vn;function gs(o,a,d,f,v,w,E,x,I,j,P,$){kr(o,a,d,f,v),(I||j||$)&&(c.save(),I&&c.clip(I),j&&c.clip(j)),$?(x&Cr)==Cr?(c.clip($),P&&c.clip(P),fn(v,E),dn(o,w,a)):x&Vn?(fn(v,E),c.clip($),dn(o,w,a)):x&Qt&&(c.save(),c.clip($),P&&c.clip(P),fn(v,E),c.restore(),dn(o,w,a)):(fn(v,E),dn(o,w,a)),(I||j||$)&&c.restore()}function dn(o,a,d){d>0&&(a instanceof Map?a.forEach((f,v)=>{c.strokeStyle=cn=v,c.stroke(f)}):a!=null&&o&&c.stroke(a))}function fn(o,a){a instanceof Map?a.forEach((d,f)=>{c.fillStyle=si=f,c.fill(d)}):a!=null&&o&&c.fill(a)}function Ea(o,a,d,f){let v=A[o],w;if(f<=0)w=[0,0];else{let E=v._space=v.space(n,o,a,d,f),x=v._incrs=v.incrs(n,o,a,d,f,E);w=Bc(a,d,x,f,E)}return v._found=w}function ms(o,a,d,f,v,w,E,x,I,j){let P=E%2/2;L==1&&c.translate(P,P),kr(x,E,I,j,x),c.beginPath();let $,Y,Se,Z,fe=v+(f==0||f==3?-w:w);d==0?(Y=v,Z=fe):($=v,Se=fe);for(let ee=0;ee<o.length;ee++)a[ee]!=null&&(d==0?$=Se=o[ee]:Y=Z=o[ee],c.moveTo($,Y),c.lineTo(Se,Z));c.stroke(),L==1&&c.translate(-P,-P)}function Aa(o){let a=!0;return A.forEach((d,f)=>{if(!d.show)return;let v=R[d.scale];if(v.min==null){d._show&&(a=!1,d._show=!1,Ci(!1));return}else d._show||(a=!1,d._show=!0,Ci(!1));let w=d.side,E=w%2,{min:x,max:I}=v,[j,P]=Ea(f,x,I,E==0?K:Q);if(P==0)return;let $=v.distr==2,Y=d._splits=d.splits(n,f,x,I,j,P,$),Se=v.distr==2?Y.map(oe=>ct[oe]):Y,Z=v.distr==2?ct[Y[1]]-ct[Y[0]]:j,fe=d._values=d.values(n,d.filter(n,Se,f,P,Z),f,P,Z);d._rotate=w==2?d.rotate(n,fe,f,P):0;let ee=d._size;d._size=lr(d.size(n,fe,f,o)),ee!=null&&d._size!=ee&&(a=!1)}),a}function Ca(o){let a=!0;return yr.forEach((d,f)=>{let v=d(n,f,$t,o);v!=Rt[f]&&(a=!1),Rt[f]=v}),a}function Ta(){for(let o=0;o<A.length;o++){let a=A[o];if(!a.show||!a._show)continue;let d=a.side,f=d%2,v,w,E=a.stroke(n,o),x=d==0||d==3?-1:1;if(a.label){let dt=a.labelGap*x,Et=Re((a._lpos+dt)*ne);_r(a.labelFont[0],E,"center",d==2?Gi:Ll),c.save(),f==1?(v=w=0,c.translate(Et,Re(ze+Ut/2)),c.rotate((d==3?-Un:Un)/2)):(v=Re(Te+ut/2),w=Et),c.fillText(a.label,v,w),c.restore()}let[I,j]=a._found;if(j==0)continue;let P=R[a.scale],$=f==0?ut:Ut,Y=f==0?Te:ze,Se=Re(a.gap*ne),Z=a._splits,fe=P.distr==2?Z.map(dt=>ct[dt]):Z,ee=P.distr==2?ct[Z[1]]-ct[Z[0]]:I,oe=a.ticks,ke=a.border,We=oe.show?Re(oe.size*ne):0,ge=a._rotate*-Un/180,Fe=H(a._pos*ne),qe=(We+Se)*x,Be=Fe+qe;w=f==0?Be:0,v=f==1?Be:0;let Ze=a.font[0],Mt=a.align==1?fi:a.align==2?Bs:ge>0?fi:ge<0?Bs:f==0?"center":d==3?Bs:fi,It=ge||f==1?"middle":d==2?Gi:Ll;_r(Ze,E,Mt,It);let jr=a.font[1]*uc,yn=Z.map(dt=>H(u(dt,P,$,Y))),Br=a._values;for(let dt=0;dt<Br.length;dt++){let Et=Br[dt];if(Et!=null){f==0?v=yn[dt]:w=yn[dt],Et=""+Et;let Vr=Et.indexOf(`
`)==-1?[Et]:Et.split(/\n/gm);for(let Oi=0;Oi<Vr.length;Oi++){let zr=Vr[Oi];ge?(c.save(),c.translate(v,w+Oi*jr),c.rotate(ge),c.fillText(zr,0,0),c.restore()):c.fillText(zr,v,w+Oi*jr)}}}oe.show&&ms(yn,oe.filter(n,fe,o,j,ee),f,d,Fe,We,de(oe.width*ne,3),oe.stroke(n,o),oe.dash,oe.cap);let hi=a.grid;hi.show&&ms(yn,hi.filter(n,fe,o,j,ee),f,f==0?2:1,f==0?ze:Te,f==0?Ut:ut,de(hi.width*ne,3),hi.stroke(n,o),hi.dash,hi.cap),ke.show&&ms([Fe],[1],f==0?1:0,f==0?1:2,f==1?ze:Te,f==1?Ut:ut,de(ke.width*ne,3),ke.stroke(n,o),ke.dash,ke.cap)}Ie("drawAxes")}function Ci(o){g.forEach((a,d)=>{d>0&&(a._paths=null,o&&(s==1?(a.min=null,a.max=null):a.facets.forEach(f=>{f.min=null,f.max=null})))})}let vs=!1;function jt(){vs||(Iu(xa),vs=!0)}function xa(){ss&&(ya(),ss=!1),ni&&(da(),ni=!1),ln&&(me(S,fi,ye),me(S,Gi,Ce),me(S,Yi,K),me(S,Xi,Q),me(k,fi,ye),me(k,Gi,Ce),me(k,Yi,K),me(k,Xi,Q),me(y,Yi,je),me(y,Xi,Xe),b.width=Re(je*ne),b.height=Re(Xe*ne),A.forEach(({_el:o,_show:a,_size:d,_pos:f,side:v})=>{if(o!=null)if(a){let w=v===3||v===0?d:0,E=v%2==1;me(o,E?"left":"top",f-w),me(o,E?"width":"height",d),me(o,E?"top":"left",E?Ce:ye),me(o,E?"height":"width",E?Q:K),Xs(o,qt)}else it(o,qt)}),cn=si=os=hs=us=cs=ds=fs=as=null,Ai=1,bn(!0),Ie("setSize"),ln=!1),je>0&&Xe>0&&(c.clearRect(0,0,b.width,b.height),Ie("drawClear"),U.forEach(o=>o()),Ie("draw")),G.show&&_i&&(Dt(null,!0,!1),_i=!1),p||(p=!0,n.status=1,Ie("ready")),un=!1,vs=!1}n.redraw=(o,a)=>{ni=a||!1,o!==!1?ri(O,N.min,N.max):jt()};function bs(o,a){let d=R[o];if(d.from==null){if(xe==0){let f=d.range(n,a.min,a.max,o);a.min=f[0],a.max=f[1]}if(a.min>a.max){let f=a.min;a.min=a.max,a.max=f}if(xe>1&&a.min!=null&&a.max!=null&&a.max-a.min<1e-16)return;o==O&&d.distr==2&&xe>0&&(a.min=Ht(a.min,t[0]),a.max=Ht(a.max,t[0]),a.min==a.max&&a.max++),C[o]=a,ss=!0,jt()}}n.setScale=bs;let ws,ys,pn,gn,Tr,xr,Ti,xi,Pr,Lr,ve,be,Bt=!1,He=G.drag,Pe=He.x,Le=He.y;G.show&&(G.x&&(ws=at(nu,k)),G.y&&(ys=at(su,k)),N.ori==0?(pn=ws,gn=ys):(pn=ys,gn=ws),ve=G.left,be=G.top);let ot=n.select=_e({show:!0,over:!0,left:0,width:0,top:0,height:0},e.select),Pi=ot.show?at(iu,ot.over?k:S):null;function mn(o,a){if(ot.show){for(let d in o)me(Pi,d,ot[d]=o[d]);a!==!1&&Ie("setSelect")}}n.setSelect=mn;function Pa(o,a){let d=g[o],f=ue?Ve[o]:null;d.show?f&&Xs(f,qt):(f&&it(f,qt),Je.length>1&&pi(Je[o],-10,-10,K,Q))}function ri(o,a,d){bs(o,{min:a,max:d})}function gt(o,a,d,f){a.focus!=null&&Ia(o),a.show!=null&&g.forEach((v,w)=>{w>0&&(o==w||o==null)&&(v.show=a.show,Pa(w,a.show),ri(s==2?v.facets[1].scale:v.scale,null,null),jt())}),d!==!1&&Ie("setSeries",o,a),f&&Ii("setSeries",n,o,a)}n.setSeries=gt;function La(o,a){_e(F[o],a)}function Ra(o,a){o.fill=ie(o.fill||null),o.dir=re(o.dir,-1),a=a??F.length,F.splice(a,0,o)}function Da(o){o==null?F.length=0:F.splice(o,1)}n.addBand=Ra,n.setBand=La,n.delBand=Da;function Ma(o,a){g[o].alpha=a,G.show&&Je[o]&&(Je[o].style.opacity=a),ue&&Ve[o]&&(Ve[o].style.opacity=a)}let Li,vn,Ri,li={focus:!0};function Ia(o){if(o!=Ri){let a=o==null,d=on.alpha!=1;g.forEach((f,v)=>{let w=a||v==0||v==o;f._focus=a?null:w,d&&Ma(v,w?1:on.alpha)}),Ri=o,d&&jt()}}ue&&an&&Kt(Ol,we,o=>{G._lock||Ri!=null&&gt(null,li,!0,Oe.setSeries)});function _t(o,a,d){let f=R[a];d&&(o=o/ne-(f.ori==1?Ce:ye));let v=K;f.ori==1&&(v=Q,o=v-o),f.dir==-1&&(o=v-o);let w=f._min,E=f._max,x=o/v,I=w+(E-w)*x,j=f.distr;return j==3?Ft(10,I):j==4?Eu(I,f.asinh):I}function Oa(o,a){let d=_t(o,O,a);return Ht(d,t[0],De,Me)}n.valToIdx=o=>Ht(o,t[0]),n.posToIdx=Oa,n.posToVal=_t,n.valToPos=(o,a,d)=>R[a].ori==0?l(o,R[a],d?ut:K,d?Te:0):h(o,R[a],d?Ut:Q,d?ze:0);function Na(o){o(n),jt()}n.batch=Na,n.setCursor=(o,a,d)=>{ve=o.left,be=o.top,Dt(null,a,d)};function Rr(o,a){me(Pi,fi,ot.left=o),me(Pi,Yi,ot.width=a)}function Dr(o,a){me(Pi,Gi,ot.top=o),me(Pi,Xi,ot.height=a)}let Di=N.ori==0?Rr:Dr,Mi=N.ori==1?Rr:Dr;function Ha(){if(ue&&V.live)for(let o=s==2?1:0;o<g.length;o++){if(o==0&&rt)continue;let a=V.values[o],d=0;for(let f in a)ht[o][d++].firstChild.nodeValue=a[f]}}function Mr(o,a){if(o!=null){let d=o.idx;V.idx=d,g.forEach((f,v)=>{(v>0||!rt)&&Ir(v,d)})}ue&&V.live&&Ha(),pt=!1,a!==!1&&Ie("setLegend")}n.setLegend=Mr;function Ir(o,a){let d;if(a==null)d=kt;else{let f=g[o],v=o==0&&q==2?ct:t[o];d=rt?f.values(n,o,a):{_:f.value(n,v[a],o,a)}}V.values[o]=d}function Dt(o,a,d){Pr=ve,Lr=be,[ve,be]=G.move(n,ve,be),G.show&&(pn&&pi(pn,Re(ve),0,K,Q),gn&&pi(gn,0,Re(be),K,Q));let f,v=De>Me;Li=te;let w=N.ori==0?K:Q,E=N.ori==1?K:Q;if(ve<0||xe==0||v){f=null;for(let x=0;x<g.length;x++)x>0&&Je.length>1&&pi(Je[x],-10,-10,K,Q);if(an&&gt(null,li,!0,o==null&&Oe.setSeries),V.live){B.fill(null),pt=!0;for(let x=0;x<g.length;x++)V.values[x]=kt}}else{let x,I,j;s==1&&(x=N.ori==0?ve:be,I=_t(x,O),f=Ht(I,t[0],De,Me),j=Xt(se(t[0][f],N,w,0),.5));for(let P=s==2?1:0;P<g.length;P++){let $=g[P],Y=B[P],Se=s==1?t[P][Y]:t[P][1][Y],Z=G.dataIdx(n,P,f,I),fe=s==1?t[P][Z]:t[P][1][Z];pt=pt||fe!=Se||Z!=Y,B[P]=Z;let ee=Z==f?j:Xt(se(s==1?t[0][Z]:t[P][0][Z],N,w,0),.5);if(P>0&&$.show){let oe=fe==null?-10:Xt(X(fe,s==1?R[$.scale]:R[$.facets[1].scale],E,0),.5);if(oe>0&&s==1){let ge=Ke(oe-be);ge<=Li&&(Li=ge,vn=P)}let ke,We;if(N.ori==0?(ke=ee,We=oe):(ke=oe,We=ee),pt&&Je.length>1){mu(Je[P],G.points.fill(n,P),G.points.stroke(n,P));let ge,Fe,qe,Be,Ze=!0,Mt=G.points.bbox;if(Mt!=null){Ze=!1;let It=Mt(n,P);qe=It.left,Be=It.top,ge=It.width,Fe=It.height}else qe=ke,Be=We,ge=Fe=G.points.size(n,P);vu(Je[P],ge,Fe,Ze),pi(Je[P],qe,Be,K,Q)}}if(V.live){if(!pt||P==0&&rt)continue;Ir(P,Z)}}}if(G.idx=f,G.left=ve,G.top=be,pt&&(V.idx=f,Mr()),ot.show&&Bt)if(o!=null){let[x,I]=Oe.scales,[j,P]=Oe.match,[$,Y]=o.cursor.sync.scales,Se=o.cursor.drag;if(Pe=Se._x,Le=Se._y,Pe||Le){let{left:Z,top:fe,width:ee,height:oe}=o.select,ke=o.scales[x].ori,We=o.posToVal,ge,Fe,qe,Be,Ze,Mt=x!=null&&j(x,$),It=I!=null&&P(I,Y);Mt&&Pe?(ke==0?(ge=Z,Fe=ee):(ge=fe,Fe=oe),qe=R[x],Be=se(We(ge,$),qe,w,0),Ze=se(We(ge+Fe,$),qe,w,0),Di(Ye(Be,Ze),Ke(Ze-Be))):Di(0,w),It&&Le?(ke==1?(ge=Z,Fe=ee):(ge=fe,Fe=oe),qe=R[I],Be=X(We(ge,Y),qe,E,0),Ze=X(We(ge+Fe,Y),qe,E,0),Mi(Ye(Be,Ze),Ke(Ze-Be))):Mi(0,E)}else ks()}else{let x=Ke(Pr-Tr),I=Ke(Lr-xr);if(N.ori==1){let Y=x;x=I,I=Y}Pe=He.x&&x>=He.dist,Le=He.y&&I>=He.dist;let j=He.uni;j!=null?Pe&&Le&&(Pe=x>=j,Le=I>=j,!Pe&&!Le&&(I>x?Le=!0:Pe=!0)):He.x&&He.y&&(Pe||Le)&&(Pe=Le=!0);let P,$;Pe&&(N.ori==0?(P=Ti,$=ve):(P=xi,$=be),Di(Ye(P,$),Ke($-P)),Le||Mi(0,E)),Le&&(N.ori==1?(P=Ti,$=ve):(P=xi,$=be),Mi(Ye(P,$),Ke($-P)),Pe||Di(0,w)),!Pe&&!Le&&(Di(0,0),Mi(0,0))}if(He._x=Pe,He._y=Le,o==null){if(d){if($r!=null){let[x,I]=Oe.scales;Oe.values[0]=x!=null?_t(N.ori==0?ve:be,x):null,Oe.values[1]=I!=null?_t(N.ori==1?ve:be,I):null}Ii(Dl,n,ve,be,K,Q,f)}if(an){let x=d&&Oe.setSeries,I=on.prox;Ri==null?Li<=I&&gt(vn,li,!0,x):Li>I?gt(null,li,!0,x):vn!=Ri&&gt(vn,li,!0,x)}}p&&a!==!1&&Ie("setCursor")}let oi=null;function bn(o){o===!0?oi=null:(oi=k.getBoundingClientRect(),Ie("syncRect",oi))}function Or(o,a,d,f,v,w,E){G._lock||(Ss(o,a,d,f,v,w,E,!1,o!=null),o!=null?Dt(null,!0,!0):Dt(a,!0,!1))}function Ss(o,a,d,f,v,w,E,x,I){if(oi==null&&bn(!1),o!=null)d=o.clientX-oi.left,f=o.clientY-oi.top;else{if(d<0||f<0){ve=-10,be=-10;return}let[j,P]=Oe.scales,$=a.cursor.sync,[Y,Se]=$.values,[Z,fe]=$.scales,[ee,oe]=Oe.match,ke=a.axes[0].side%2==1,We=N.ori==0?K:Q,ge=N.ori==1?K:Q,Fe=ke?w:v,qe=ke?v:w,Be=ke?f:d,Ze=ke?d:f;if(Z!=null?d=ee(j,Z)?u(Y,R[j],We,0):-10:d=We*(Be/Fe),fe!=null?f=oe(P,fe)?u(Se,R[P],ge,0):-10:f=ge*(Ze/qe),N.ori==1){let Mt=d;d=f,f=Mt}}I&&((d<=1||d>=K-1)&&(d=Wt(d,K)),(f<=1||f>=Q-1)&&(f=Wt(f,Q))),x?(Tr=d,xr=f,[Ti,xi]=G.move(n,d,f)):(ve=d,be=f)}let Fa={width:0,height:0};function ks(){mn(Fa,!1)}function Nr(o,a,d,f,v,w,E){Bt=!0,Pe=Le=He._x=He._y=!1,Ss(o,a,d,f,v,w,E,!0,!1),o!=null&&(lt(Vs,Ks,Hr),Ii(Ml,n,Ti,xi,K,Q,null))}function Hr(o,a,d,f,v,w,E){Bt=He._x=He._y=!1,Ss(o,a,d,f,v,w,E,!1,!0);let{left:x,top:I,width:j,height:P}=ot,$=j>0||P>0;if($&&mn(ot),He.setScale&&$){let Y=x,Se=j,Z=I,fe=P;if(N.ori==1&&(Y=I,Se=P,Z=x,fe=j),Pe&&ri(O,_t(Y,O),_t(Y+Se,O)),Le)for(let ee in R){let oe=R[ee];ee!=O&&oe.from==null&&oe.min!=te&&ri(ee,_t(Z+fe,ee),_t(Z,ee))}ks()}else G.lock&&(G._lock=!G._lock,G._lock||Dt(null,!0,!1));o!=null&&(le(Vs,Ks),Ii(Vs,n,ve,be,K,Q,null))}function Ua(o,a,d,f,v,w,E){if(!G._lock){let x=Bt;if(Bt){let I=!0,j=!0,P=10,$,Y;N.ori==0?($=Pe,Y=Le):($=Le,Y=Pe),$&&Y&&(I=ve<=P||ve>=K-P,j=be<=P||be>=Q-P),$&&I&&(ve=ve<Ti?0:K),Y&&j&&(be=be<xi?0:Q),Dt(null,!0,!0),Bt=!1}ve=-10,be=-10,Dt(null,!0,!0),x&&(Bt=x)}}function Fr(o,a,d,f,v,w,E){ls(),ks(),o!=null&&Ii(Nl,n,ve,be,K,Q,null)}function Ur(){A.forEach(Vc),rs(n.width,n.height,!0)}Kt($n,mi,Ur);let ai={};ai.mousedown=Nr,ai.mousemove=Or,ai.mouseup=Hr,ai.dblclick=Fr,ai.setSeries=(o,a,d,f)=>{gt(d,f,!0,!1)},G.show&&(lt(Ml,k,Nr),lt(Dl,k,Or),lt(Il,k,bn),lt(Ol,k,Ua),lt(Nl,k,Fr),er.add(n),n.syncRect=bn);let wn=n.hooks=e.hooks||{};function Ie(o,a,d){o in wn&&wn[o].forEach(f=>{f.call(null,n,a,d)})}(e.plugins||[]).forEach(o=>{for(let a in o.hooks)wn[a]=(wn[a]||[]).concat(o.hooks[a])});let Oe=_e({key:null,setSeries:!1,filters:{pub:Wl,sub:Wl},scales:[O,g[1]?g[1].scale:null],match:[ql,ql],values:[null,null]},G.sync);G.sync=Oe;let $r=Oe.key,_s=Io($r);function Ii(o,a,d,f,v,w,E){Oe.filters.pub(o,a,d,f,v,w,E)&&_s.pub(o,a,d,f,v,w,E)}_s.sub(n);function $a(o,a,d,f,v,w,E){Oe.filters.sub(o,a,d,f,v,w,E)&&ai[o](null,a,d,f,v,w,E)}n.pub=$a;function ja(){_s.unsub(n),er.delete(n),Lt.clear(),Zs($n,mi,Ur),m.remove(),Ie("destroy")}n.destroy=ja;function Es(){Ie("init",e,t),Sr(t||e.data,!1),C[O]?bs(O,C[O]):ls(),rs(e.width,e.height),Dt(null,!0,!1),mn(ot,!1)}return g.forEach(wr),A.forEach(wa),i?i instanceof HTMLElement?(i.appendChild(m),Es()):i(n,Es):Es(),n}Ee.assign=_e;Ee.fmtNum=rr;Ee.rangeNum=jn;Ee.rangeLog=zn;Ee.rangeAsinh=nr;Ee.orient=ei;Ee.pxRatio=ne;Ee.join=Mu;Ee.fmtDate=or,Ee.tzDate=ju;Ee.sync=Io;{Ee.addGap=Tc,Ee.clipGaps=Gn;let e=Ee.paths={points:$o};e.linear=Bo,e.stepped=Lc,e.bars=Rc,e.spline=Mc}var zc=(e,t,i)=>Wc(e-t,i)+t,Jc=(e,t)=>e-t;function Wc(e,t){return Math.floor(e/t)*t}function qc(e,t){let i=[...e.values()];t&&i.sort((r,l)=>t(r.value,l.value));let n=Array(i.length),s=Array(i.length);for(let r=0;r<i.length;r++)n[r]=i[r].value,s[r]=i[r].count;return[n,s]}var qo=({bucketSize:e=20})=>+e,Zn=class{constructor(t,i){this.chart=t,this.datasets=new Map,this.options=i,this.bucketSize=qo(i),this.histOffset=0}handleMeasurements(t){t.forEach(({y:i})=>{if(i==null)return;i=zc(i,this.histOffset,this.bucketSize);let n=this.datasets.get(i);n?n.count++:this.datasets.set(i,{value:i,count:1})}),this.chart.setData(qc(this.datasets,Jc))}static initialData(){return[[],[]]}static getConfig(t){let i=qo(t),n=Ee.paths.bars({align:1,size:[1,1/0],gap:4});return{title:t.title,width:t.width,height:t.height,scales:{x:{time:!1,auto:!1,dir:1,range:s=>[s.data[0][0],s.data[0][s.data[0].length-1]+i]}},axes:[{incrs:()=>[0,1,2,3,4,5,6,7,8,9,10].map(s=>s*i),splits:(s,r,l,h,u,p)=>{let m=s.axes[r]._space,b=s.valToPos(s.data[0][0]+i,"x")-s.valToPos(s.data[0][0],"x"),c=s.data[0][0],y=s.data[0][s.data[0].length-1]+i,S=[],k=Math.ceil(m/b);for(let L=0,H=c;H<=y;L++,H+=i)!(L%k)&&S.push(H);return S}}],series:[{label:t.label,value:(s,r)=>r+`-${r+i} ${t.unit}`},{paths:n,points:{show:!1},...On.at(1),width:2,label:"Events"}]}}};var Gc=e=>e.unit?{value:(t,i)=>i==null?"--":i.toFixed(3)+` ${e.unit}`}:{},Ko=e=>({value:"{YYYY}-{MM}-{DD} {HH}:{mm}:{ss}"}),Kc=e=>e.unit?{values:(t,i,n)=>i.map(s=>+s.toFixed(2)+` ${e.unit}`)}:{},Yo=e=>({space:55,values:[[3600*24*365,"{YYYY}",null,null,null,null,null,null,1],[3600*24*28,"{MMM}",`
{YYYY}`,null,null,null,null,null,1],[3600*24,"{M}/{D}",`
{YYYY}`,null,null,null,null,null,1],[3600,"{h}{aa}",`
{M}/{D}/{YY}`,null,`
{M}/{D}`,null,null,null,1],[60,"{h}:{mm}{aa}",`
{M}/{D}/{YY}`,null,`
{M}/{D}`,null,null,null,1],[1,":{ss}",`
{M}/{D}/{YY} {h}:{mm}{aa}`,null,`
{M}/{D} {h}:{mm}{aa}`,null,`
{h}:{mm}{aa}`,null,1],[.001,":{ss}.{fff}",`
{M}/{D}/{YY} {h}:{mm}{aa}`,null,`
{M}/{D} {h}:{mm}{aa}`,null,`
{h}:{mm}{aa}`,null,1]]}),Xo=e=>({show:!0,size:70,space:15,...Kc(e)}),Qn={width:100,height:300},Zo={sync:{key:"metrics-live"}};function Yc(e,t){let i=!1;return()=>{i||(requestAnimationFrame(e),i=!0,setTimeout(()=>{i=!1},t))}}var es=(e,t=0)=>({...On.at(t),...Gc(e),label:e.label,spanGaps:!0,points:{show:!1}}),Qo=e=>e.slice(0).map(({data:t})=>t);function Xc({y:e,z:t},i){this.datasets[0].data.push(t);let n=this.datasets[1].data[this.datasets[1].data.length-1]||0,s=i.call(this,e,n);this.datasets[1].data.push(s)}var fr=e=>e.reduceRight((t,i)=>i!=null&&t==null?i:t,null);function Zc({x:e,y:t,z:i},n){let s=this.datasets.findIndex(({key:r})=>e===r);s===-1&&(s=this.datasets.push({key:e,data:Array(this.datasets[0].data.length).fill(null)})-1,this.chart.addSeries(es({label:e,unit:this.options.unit},s-1),s)),this.datasets=this.datasets.map((r,l)=>(l===0?r.data.push(i):l===s?r.data.push(n.call(this,t,fr(r.data)||0)):r.data.push(null),r))}var ea=({pruneThreshold:e=1e3})=>e,nn=class{static __projections(){return{counter:(t,i)=>i+1,last_value:t=>t,sum:(t,i)=>i+t}}static getConfig(t){return{class:t.kind,title:t.title,width:t.width,height:t.height,cursor:Zo,series:[{...Ko()},es(t,0)],scales:{x:{min:t.now-60,max:t.now},y:{min:0,max:1}},axes:[Yo(),Xo(t)]}}static initialData(){return[[],[]]}constructor(t,i){this.__callback=this.constructor.__projections()[i.metric],this.chart=t,this.datasets=[{key:"|x|",data:[]}],this.options=i,this.pruneThreshold=ea(i),i.tagged?(this.chart.delSeries(1),this.__handler=Zc):(this.datasets.push({key:i.label,data:[]}),this.__handler=Xc)}handleMeasurements(t){t.forEach(n=>this.__handler.call(this,n,this.__callback)),this.datasets[0].data.length>=this.pruneThreshold&&(this.datasets=this.datasets.map(({data:n,...s})=>({data:n.slice(-this.pruneThreshold),...s}))),this.chart.setData(Qo(this.datasets))}},sn=class{constructor(t,i){let n=this.constructor.getConfig(t);n.series[1].values=this.__seriesValues.bind(this),this.datasets=[{key:"|x|",data:[]}],this.chart=new Ee(n,this.constructor.initialData(t),i),this.pruneThreshold=ea(t),this.options=t,t.tagged?(this.chart.delSeries(1),this.__handler=this.handleTaggedMeasurement.bind(this)):(this.datasets.push(this.constructor.newDataset(t.label)),this.__handler=this.handleMeasurement.bind(this))}handleMeasurements(t){t.forEach(i=>this.__handler(i)),this.__maybePruneDatasets(),this.chart.setData(Qo(this.datasets))}handleTaggedMeasurement(t){let i=this.findOrCreateSeries(t.x);this.handleMeasurement(t,i)}handleMeasurement(t,i=1){let{z:n}=t;this.datasets=this.datasets.map((s,r)=>(s.key==="|x|"?s.data.push(n):r===i?this.pushToDataset(s,t):this.pushToDataset(s,null),s))}findOrCreateSeries(t){let i=this.datasets.findIndex(({key:n})=>t===n);if(i===-1){i=this.datasets.push(this.constructor.newDataset(t,this.datasets[0].data.length))-1;let n={values:this.__seriesValues.bind(this),...es({label:t},i-1)};this.chart.addSeries(n,i)}return i}pushToDataset(t,i){if(i===null){t.data.push(null),t.agg.avg.push(null),t.agg.max.push(null),t.agg.min.push(null);return}let{y:n}=i;return t.agg.count++,t.agg.total+=n,t.data.push(n),(t.last.min===null||n<t.last.min)&&(t.last.min=n),t.agg.min.push(t.last.min),(t.last.max===null||n>t.last.max)&&(t.last.max=n),t.agg.max.push(t.last.max),t.agg.avg.push(t.agg.total/t.agg.count),t}__maybePruneDatasets(){if(this.datasets[0].data.length>this.pruneThreshold){let i=-this.pruneThreshold;this.datasets=this.datasets.map(({key:n,data:s,agg:r})=>{let l=s.slice(i);if(!r)return{key:n,data:l};let{avg:h,count:u,max:p,min:m,total:b}=r,c=m.slice(i),y=p.slice(i);return{key:n,data:l,agg:{avg:h.slice(i),count:u,min:c,max:y,total:b},last:{min:fr(c),max:fr(y)}}})}}__seriesValues(t,i,n){let s=this.datasets[i];if(s&&s.data&&s.data[n]){let{agg:{avg:r,max:l,min:h},data:u}=s;return{Value:u[n].toFixed(3),Min:h[n].toFixed(3),Max:l[n].toFixed(3),Avg:r[n].toFixed(3)}}else return{Value:"--",Min:"--",Max:"--",Avg:"--"}}static initialData(){return[[],[]]}static getConfig(t){return{class:t.kind,title:t.title,width:t.width,height:t.height,cursor:Zo,series:[{...Ko()},es(t,0)],scales:{x:{min:t.now-60,max:t.now},y:{min:0,max:1}},axes:[Yo(),Xo(t)]}}static newDataset(t,i=0){let n=i>0?Array(i).fill(null):[];return{key:t,data:[...n],agg:{avg:[...n],count:0,max:[...n],min:[...n],total:0},last:{max:null,min:null}}}},Go={counter:nn,last_value:nn,sum:nn,summary:sn,distribution:Zn},pr=class{constructor(t,i){if(i.metric){if(i.metric&&!Go[i.metric])throw new TypeError(`No metric defined for type ${i.metric}`)}else throw new TypeError("No metric type was provided");let n=Go[i.metric];n===sn?(this.metric=new sn(i,t),this.uplotChart=this.metric.chart):(this.uplotChart=new Ee(n.getConfig(i),n.initialData(i),t),this.metric=new n(this.uplotChart,i));let s=typeof i.refreshInterval<"u";this._isBufferingData=s,this._buffer=[],this._timer=s?setInterval(this._flushToChart.bind(this),+i.refreshInterval):null}clearTimers(){clearInterval(this._timer)}resize(t){this.uplotChart.setSize({width:Math.max(t.width,Qn.width),height:Qn.height})}pushData(t){if(!t.length)return;(this._isBufferingData?this._pushToBuffer:this._pushToChart).call(this,t)}_pushToBuffer(t){this._buffer=this._buffer.concat(t)}_pushToChart(t){this.metric.handleMeasurements(t)}_flushToChart(){let t=this._flushBuffer();!t.length||this._pushToChart(t)}_flushBuffer(){if(this._buffer&&!this._buffer.length)return[];let t=this._buffer;return this._buffer=[],t.reduce((i,n)=>i.concat(n),[])}},Qc={mounted(){let e=this.el.parentElement.querySelector(".chart"),t=e.getBoundingClientRect(),i=Object.assign({},e.dataset,{tagged:e.dataset.tags&&e.dataset.tags!==""||!1,width:Math.max(t.width,Qn.width),height:Qn.height,now:new Date/1e3,refreshInterval:1e3});this.chart=new pr(e,i),window.addEventListener("resize",Yc(()=>{let n=e.getBoundingClientRect();this.chart.resize(n)}))},updated(){let e=Array.from(this.el.children||[]).map(({dataset:{x:t,y:i,z:n}})=>({x:t,y:+i,z:+n/1e6}));e.length>0&&this.chart.pushData(e)},destroyed(){this.chart.clearTimers()}},ta=Qc;var ed=e=>{let t=`${e.key}=${e.value};path=/`;window.location.protocol==="https:"&&(t+=";samesite=strict"),e.domain&&(t+=`;domain=${e.domain}`),document.cookie=t},td=e=>{let t="Thu, 01 Jan 1970 00:00:00 GMT";document.cookie=`${e.key}=; expires=${t}`},id=e=>e.el.hasAttribute("data-cookie-enabled"),nd=e=>({key:e.el.getAttribute("data-cookie-key"),value:e.el.getAttribute("data-cookie-value"),domain:e.el.getAttribute("data-cookie-domain")}),sd={updated(){let e=nd(this);td(e),id(this)&&ed(e)}},ia=sd;var rd=e=>{if(!navigator.clipboard)e.select(),e.setSelectionRange(0,99999),document.execCommand("copy");else{let t=e.value;navigator.clipboard.writeText(t)}},ld={mounted(){this.el.querySelector(".btn-primary").addEventListener("click",e=>{let t=this.el.querySelector("textarea");rd(t);let i=this.el.querySelector(".copy-indicator");i.setAttribute("data-enabled","false"),i.offsetWidth,i.setAttribute("data-enabled","true")})}},na=ld;var od={updated(){if(this.el.querySelector(".logger-autoscroll-checkbox").checked){let e=this.el.querySelector("#logger-messages");e.scrollTop=e.scrollHeight}}},sa=od;var la=".progress-bar, .color-bar-legend-entry",ts,ra=e=>{e.querySelectorAll(la).forEach(t=>{if(ts){let i=t.getAttribute("data-name")!==ts;t.setAttribute("data-muted",i)}else t.removeAttribute("data-muted")})},ad={mounted(){this.el.setAttribute("data-highlight-enabled","true"),this.el.querySelectorAll(la).forEach(e=>e.addEventListener("click",t=>{let i=t.currentTarget.getAttribute("data-name");ts=i===ts?null:i,ra(this.el)}))},updated(){this.el.setAttribute("data-highlight-enabled","true"),ra(this.el)}},oa=ad;var aa="_refresh_data";function ha(e,t){let i=JSON.stringify(e),n=cd(i);ud(aa,n,t,15768e4)}function is(){let e=hd(aa);if(e){let t=dd(e);return JSON.parse(t)}else return null}function hd(e){let t=document.cookie.split("; ").find(i=>i.startsWith(`${e}=`));return t?t.replace(`${e}=`,""):null}function ud(e,t,i,n){let s=`${e}=${t};max-age=${n};path=${i}`;document.cookie=s}function cd(e){return btoa(unescape(encodeURIComponent(e)))}function dd(e){return decodeURIComponent(escape(atob(e)))}var fd={updated(){let e=is()||{};e[this.el.dataset.page]=this.el.value,ha(e,this.el.dataset.dashboardMountPath)}},ua=fd;var pd={PhxChartComponent:ta,PhxRequestLoggerCookie:ia,PhxRequestLoggerQueryParameter:na,PhxRequestLoggerMessages:sa,PhxColorBarHighlight:oa,PhxRememberRefresh:ua},gd=document.querySelector("html").getAttribute("phx-socket")||"/live",md=document.querySelector("meta[name='csrf-token']").getAttribute("content"),vr=new Al(gd,qr,{hooks:pd,params:e=>({_csrf_token:md,refresh_data:is()})}),ti=vr.socket,vd=ti.onConnError,gr=!0;ti.onOpen(()=>{gr=!1});ti.onConnError=(...e)=>{gr?(gr=!1,ti.disconnect(null,3e3),ti.transport=Ui,ti.connect()):vd.apply(ti,e)};window.addEventListener("phx:page-loading-start",e=>mr.default.start());window.addEventListener("phx:page-loading-stop",e=>mr.default.done());vr.connect();window.liveSocket=vr;})();
/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */
