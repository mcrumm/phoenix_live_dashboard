(()=>{var vo=Object.create;var di=Object.defineProperty,bo=Object.defineProperties,yo=Object.getOwnPropertyDescriptor,ko=Object.getOwnPropertyDescriptors,wo=Object.getOwnPropertyNames,fi=Object.getOwnPropertySymbols,So=Object.getPrototypeOf,qi=Object.prototype.hasOwnProperty,nr=Object.prototype.propertyIsEnumerable;var rr=(e,t,i)=>t in e?di(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Be=(e,t)=>{for(var i in t||(t={}))qi.call(t,i)&&rr(e,i,t[i]);if(fi)for(var i of fi(t))nr.call(t,i)&&rr(e,i,t[i]);return e},sr=(e,t)=>bo(e,ko(t)),Co=e=>di(e,"__esModule",{value:!0});var or=(e,t)=>{var i={};for(var n in e)qi.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(e!=null&&fi)for(var n of fi(e))t.indexOf(n)<0&&nr.call(e,n)&&(i[n]=e[n]);return i};var ar=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Ao=(e,t,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of wo(t))!qi.call(e,n)&&n!=="default"&&di(e,n,{get:()=>t[n],enumerable:!(i=yo(t,n))||i.enumerable});return e},lr=e=>Ao(Co(di(e!=null?vo(So(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var ur=ar((Xt,Gi)=>{(function(e,t){typeof Xt=="object"&&typeof Gi=="object"?Gi.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Xt=="object"?Xt.Phoenix=t():e.Phoenix=t()})(Xt,function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(n,r,o){i.o(n,r)||Object.defineProperty(n,r,{enumerable:!0,get:o})},i.r=function(n){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,r){if(1&r&&(n=i(n)),8&r||4&r&&typeof n=="object"&&n&&n.__esModule)return n;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:n}),2&r&&typeof n!="string")for(var a in n)i.d(o,a,function(m){return n[m]}.bind(null,a));return o},i.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(r,"a",r),r},i.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},i.p="",i(i.s=0)}([function(e,t,i){(function(n){e.exports=n.Phoenix=i(2)}).call(this,i(1))},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(n){typeof window=="object"&&(i=window)}e.exports=i},function(e,t,i){"use strict";function n(g){return function(s){if(Array.isArray(s))return m(s)}(g)||function(s){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(s))return Array.from(s)}(g)||a(g)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function r(g){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(g)}function o(g,s){return function(u){if(Array.isArray(u))return u}(g)||function(u,d){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(u)))){var f=[],R=!0,L=!1,P=void 0;try{for(var I,N=u[Symbol.iterator]();!(R=(I=N.next()).done)&&(f.push(I.value),!d||f.length!==d);R=!0);}catch(D){L=!0,P=D}finally{try{R||N.return==null||N.return()}finally{if(L)throw P}}return f}}(g,s)||a(g,s)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function a(g,s){if(g){if(typeof g=="string")return m(g,s);var u=Object.prototype.toString.call(g).slice(8,-1);return u==="Object"&&g.constructor&&(u=g.constructor.name),u==="Map"||u==="Set"?Array.from(u):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?m(g,s):void 0}}function m(g,s){(s==null||s>g.length)&&(s=g.length);for(var u=0,d=new Array(s);u<s;u++)d[u]=g[u];return d}function b(g,s){if(!(g instanceof s))throw new TypeError("Cannot call a class as a function")}function A(g,s){for(var u=0;u<s.length;u++){var d=s[u];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(g,d.key,d)}}function C(g,s,u){return s&&A(g.prototype,s),u&&A(g,u),g}i.r(t),i.d(t,"Channel",function(){return U}),i.d(t,"Serializer",function(){return Y}),i.d(t,"Socket",function(){return Ee}),i.d(t,"LongPoll",function(){return Ie}),i.d(t,"Ajax",function(){return B}),i.d(t,"Presence",function(){return Ye});var T=typeof self!="undefined"?self:null,w=typeof window!="undefined"?window:null,S=T||w||void 0,E=0,W=1,te=2,x=3,J="closed",ae="errored",le="joined",We="joining",De="leaving",be="phx_close",Re="phx_error",ee="phx_join",_e="phx_reply",ct="phx_leave",bt=[be,Re,ee,_e,ct],z="longpoll",Ke="websocket",F=function(g){return typeof g=="function"?g:function(){return g}},M=function(){function g(s,u,d,f){b(this,g),this.channel=s,this.event=u,this.payload=d||function(){return{}},this.receivedResp=null,this.timeout=f,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}return C(g,[{key:"resend",value:function(s){this.timeout=s,this.reset(),this.send()}},{key:"send",value:function(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}},{key:"receive",value:function(s,u){return this.hasReceived(s)&&u(this.receivedResp.response),this.recHooks.push({status:s,callback:u}),this}},{key:"reset",value:function(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}},{key:"matchReceive",value:function(s){var u=s.status,d=s.response;s.ref,this.recHooks.filter(function(f){return f.status===u}).forEach(function(f){return f.callback(d)})}},{key:"cancelRefEvent",value:function(){this.refEvent&&this.channel.off(this.refEvent)}},{key:"cancelTimeout",value:function(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}},{key:"startTimeout",value:function(){var s=this;this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,function(u){s.cancelRefEvent(),s.cancelTimeout(),s.receivedResp=u,s.matchReceive(u)}),this.timeoutTimer=setTimeout(function(){s.trigger("timeout",{})},this.timeout)}},{key:"hasReceived",value:function(s){return this.receivedResp&&this.receivedResp.status===s}},{key:"trigger",value:function(s,u){this.channel.trigger(this.refEvent,{status:s,response:u})}}]),g}(),U=function(){function g(s,u,d){var f=this;b(this,g),this.state=J,this.topic=s,this.params=F(u||{}),this.socket=d,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new M(this,ee,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new Oe(function(){f.socket.isConnected()&&f.rejoin()},this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError(function(){return f.rejoinTimer.reset()})),this.stateChangeRefs.push(this.socket.onOpen(function(){f.rejoinTimer.reset(),f.isErrored()&&f.rejoin()})),this.joinPush.receive("ok",function(){f.state=le,f.rejoinTimer.reset(),f.pushBuffer.forEach(function(R){return R.send()}),f.pushBuffer=[]}),this.joinPush.receive("error",function(){f.state=ae,f.socket.isConnected()&&f.rejoinTimer.scheduleTimeout()}),this.onClose(function(){f.rejoinTimer.reset(),f.socket.hasLogger()&&f.socket.log("channel","close ".concat(f.topic," ").concat(f.joinRef())),f.state=J,f.socket.remove(f)}),this.onError(function(R){f.socket.hasLogger()&&f.socket.log("channel","error ".concat(f.topic),R),f.isJoining()&&f.joinPush.reset(),f.state=ae,f.socket.isConnected()&&f.rejoinTimer.scheduleTimeout()}),this.joinPush.receive("timeout",function(){f.socket.hasLogger()&&f.socket.log("channel","timeout ".concat(f.topic," (").concat(f.joinRef(),")"),f.joinPush.timeout),new M(f,ct,F({}),f.timeout).send(),f.state=ae,f.joinPush.reset(),f.socket.isConnected()&&f.rejoinTimer.scheduleTimeout()}),this.on(_e,function(R,L){f.trigger(f.replyEventName(L),R)})}return C(g,[{key:"join",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.timeout;if(this.joinedOnce)throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=s,this.joinedOnce=!0,this.rejoin(),this.joinPush}},{key:"onClose",value:function(s){this.on(be,s)}},{key:"onError",value:function(s){return this.on(Re,function(u){return s(u)})}},{key:"on",value:function(s,u){var d=this.bindingRef++;return this.bindings.push({event:s,ref:d,callback:u}),d}},{key:"off",value:function(s,u){this.bindings=this.bindings.filter(function(d){return!(d.event===s&&(u===void 0||u===d.ref))})}},{key:"canPush",value:function(){return this.socket.isConnected()&&this.isJoined()}},{key:"push",value:function(s,u){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.timeout;if(u=u||{},!this.joinedOnce)throw new Error("tried to push '".concat(s,"' to '").concat(this.topic,"' before joining. Use channel.join() before pushing events"));var f=new M(this,s,function(){return u},d);return this.canPush()?f.send():(f.startTimeout(),this.pushBuffer.push(f)),f}},{key:"leave",value:function(){var s=this,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.timeout;this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=De;var d=function(){s.socket.hasLogger()&&s.socket.log("channel","leave ".concat(s.topic)),s.trigger(be,"leave")},f=new M(this,ct,F({}),u);return f.receive("ok",function(){return d()}).receive("timeout",function(){return d()}),f.send(),this.canPush()||f.trigger("ok",{}),f}},{key:"onMessage",value:function(s,u,d){return u}},{key:"isLifecycleEvent",value:function(s){return bt.indexOf(s)>=0}},{key:"isMember",value:function(s,u,d,f){return this.topic===s&&(!f||f===this.joinRef()||!this.isLifecycleEvent(u)||(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:s,event:u,payload:d,joinRef:f}),!1))}},{key:"joinRef",value:function(){return this.joinPush.ref}},{key:"rejoin",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.timeout;this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=We,this.joinPush.resend(s))}},{key:"trigger",value:function(s,u,d,f){var R=this.onMessage(s,u,d,f);if(u&&!R)throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");for(var L=this.bindings.filter(function(I){return I.event===s}),P=0;P<L.length;P++)L[P].callback(R,d,f||this.joinRef())}},{key:"replyEventName",value:function(s){return"chan_reply_".concat(s)}},{key:"isClosed",value:function(){return this.state===J}},{key:"isErrored",value:function(){return this.state===ae}},{key:"isJoined",value:function(){return this.state===le}},{key:"isJoining",value:function(){return this.state===We}},{key:"isLeaving",value:function(){return this.state===De}}]),g}(),Y={HEADER_LENGTH:1,META_LENGTH:4,KINDS:{push:0,reply:1,broadcast:2},encode:function(g,s){if(g.payload.constructor===ArrayBuffer)return s(this.binaryEncode(g));var u=[g.join_ref,g.ref,g.topic,g.event,g.payload];return s(JSON.stringify(u))},decode:function(g,s){if(g.constructor===ArrayBuffer)return s(this.binaryDecode(g));var u=o(JSON.parse(g),5);return s({join_ref:u[0],ref:u[1],topic:u[2],event:u[3],payload:u[4]})},binaryEncode:function(g){var s=g.join_ref,u=g.ref,d=g.event,f=g.topic,R=g.payload,L=this.META_LENGTH+s.length+u.length+f.length+d.length,P=new ArrayBuffer(this.HEADER_LENGTH+L),I=new DataView(P),N=0;I.setUint8(N++,this.KINDS.push),I.setUint8(N++,s.length),I.setUint8(N++,u.length),I.setUint8(N++,f.length),I.setUint8(N++,d.length),Array.from(s,function(j){return I.setUint8(N++,j.charCodeAt(0))}),Array.from(u,function(j){return I.setUint8(N++,j.charCodeAt(0))}),Array.from(f,function(j){return I.setUint8(N++,j.charCodeAt(0))}),Array.from(d,function(j){return I.setUint8(N++,j.charCodeAt(0))});var D=new Uint8Array(P.byteLength+R.byteLength);return D.set(new Uint8Array(P),0),D.set(new Uint8Array(R),P.byteLength),D.buffer},binaryDecode:function(g){var s=new DataView(g),u=s.getUint8(0),d=new TextDecoder;switch(u){case this.KINDS.push:return this.decodePush(g,s,d);case this.KINDS.reply:return this.decodeReply(g,s,d);case this.KINDS.broadcast:return this.decodeBroadcast(g,s,d)}},decodePush:function(g,s,u){var d=s.getUint8(1),f=s.getUint8(2),R=s.getUint8(3),L=this.HEADER_LENGTH+this.META_LENGTH-1,P=u.decode(g.slice(L,L+d));L+=d;var I=u.decode(g.slice(L,L+f));L+=f;var N=u.decode(g.slice(L,L+R));return L+=R,{join_ref:P,ref:null,topic:I,event:N,payload:g.slice(L,g.byteLength)}},decodeReply:function(g,s,u){var d=s.getUint8(1),f=s.getUint8(2),R=s.getUint8(3),L=s.getUint8(4),P=this.HEADER_LENGTH+this.META_LENGTH,I=u.decode(g.slice(P,P+d));P+=d;var N=u.decode(g.slice(P,P+f));P+=f;var D=u.decode(g.slice(P,P+R));P+=R;var j=u.decode(g.slice(P,P+L));P+=L;var pe=g.slice(P,g.byteLength);return{join_ref:I,ref:N,topic:D,event:_e,payload:{status:j,response:pe}}},decodeBroadcast:function(g,s,u){var d=s.getUint8(1),f=s.getUint8(2),R=this.HEADER_LENGTH+2,L=u.decode(g.slice(R,R+d));R+=d;var P=u.decode(g.slice(R,R+f));return R+=f,{join_ref:null,ref:null,topic:L,event:P,payload:g.slice(R,g.byteLength)}}},Ee=function(){function g(s){var u=this,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};b(this,g),this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=d.timeout||1e4,this.transport=d.transport||S.WebSocket||Ie,this.defaultEncoder=Y.encode.bind(Y),this.defaultDecoder=Y.decode.bind(Y),this.closeWasClean=!1,this.unloaded=!1,this.binaryType=d.binaryType||"arraybuffer",this.transport!==Ie?(this.encode=d.encode||this.defaultEncoder,this.decode=d.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder),w&&w.addEventListener&&w.addEventListener("beforeunload",function(f){u.conn&&(u.unloaded=!0,u.abnormalClose("unloaded"))}),this.heartbeatIntervalMs=d.heartbeatIntervalMs||3e4,this.rejoinAfterMs=function(f){return d.rejoinAfterMs?d.rejoinAfterMs(f):[1e3,2e3,5e3][f-1]||1e4},this.reconnectAfterMs=function(f){return u.unloaded?100:d.reconnectAfterMs?d.reconnectAfterMs(f):[10,50,100,150,200,250,500,1e3,2e3][f-1]||5e3},this.logger=d.logger||null,this.longpollerTimeout=d.longpollerTimeout||2e4,this.params=F(d.params||{}),this.endPoint="".concat(s,"/").concat(Ke),this.vsn=d.vsn||"2.0.0",this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new Oe(function(){u.teardown(function(){return u.connect()})},this.reconnectAfterMs)}return C(g,[{key:"protocol",value:function(){return location.protocol.match(/^https/)?"wss":"ws"}},{key:"endPointURL",value:function(){var s=B.appendParams(B.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return s.charAt(0)!=="/"?s:s.charAt(1)==="/"?"".concat(this.protocol(),":").concat(s):"".concat(this.protocol(),"://").concat(location.host).concat(s)}},{key:"disconnect",value:function(s,u,d){this.closeWasClean=!0,this.reconnectTimer.reset(),this.teardown(s,u,d)}},{key:"connect",value:function(s){var u=this;s&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=F(s)),this.conn||(this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=function(){return u.onConnOpen()},this.conn.onerror=function(d){return u.onConnError(d)},this.conn.onmessage=function(d){return u.onConnMessage(d)},this.conn.onclose=function(d){return u.onConnClose(d)})}},{key:"log",value:function(s,u,d){this.logger(s,u,d)}},{key:"hasLogger",value:function(){return this.logger!==null}},{key:"onOpen",value:function(s){var u=this.makeRef();return this.stateChangeCallbacks.open.push([u,s]),u}},{key:"onClose",value:function(s){var u=this.makeRef();return this.stateChangeCallbacks.close.push([u,s]),u}},{key:"onError",value:function(s){var u=this.makeRef();return this.stateChangeCallbacks.error.push([u,s]),u}},{key:"onMessage",value:function(s){var u=this.makeRef();return this.stateChangeCallbacks.message.push([u,s]),u}},{key:"onConnOpen",value:function(){this.hasLogger()&&this.log("transport","connected to ".concat(this.endPointURL())),this.unloaded=!1,this.closeWasClean=!1,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach(function(s){return(0,o(s,2)[1])()})}},{key:"heartbeatTimeout",value:function(){this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.abnormalClose("heartbeat timeout"))}},{key:"resetHeartbeat",value:function(){var s=this;this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,clearTimeout(this.heartbeatTimer),setTimeout(function(){return s.sendHeartbeat()},this.heartbeatIntervalMs))}},{key:"teardown",value:function(s,u,d){var f=this;if(!this.conn)return s&&s();this.waitForBufferDone(function(){f.conn&&(u?f.conn.close(u,d||""):f.conn.close()),f.waitForSocketClosed(function(){f.conn&&(f.conn.onclose=function(){},f.conn=null),s&&s()})})}},{key:"waitForBufferDone",value:function(s){var u=this,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;d!==5&&this.conn&&this.conn.bufferedAmount?setTimeout(function(){u.waitForBufferDone(s,d+1)},150*d):s()}},{key:"waitForSocketClosed",value:function(s){var u=this,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;d!==5&&this.conn&&this.conn.readyState!==x?setTimeout(function(){u.waitForSocketClosed(s,d+1)},150*d):s()}},{key:"onConnClose",value:function(s){this.hasLogger()&&this.log("transport","close",s),this.triggerChanError(),clearTimeout(this.heartbeatTimer),this.closeWasClean||this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(function(u){return(0,o(u,2)[1])(s)})}},{key:"onConnError",value:function(s){this.hasLogger()&&this.log("transport",s),this.triggerChanError(),this.stateChangeCallbacks.error.forEach(function(u){return(0,o(u,2)[1])(s)})}},{key:"triggerChanError",value:function(){this.channels.forEach(function(s){s.isErrored()||s.isLeaving()||s.isClosed()||s.trigger(Re)})}},{key:"connectionState",value:function(){switch(this.conn&&this.conn.readyState){case E:return"connecting";case W:return"open";case te:return"closing";default:return"closed"}}},{key:"isConnected",value:function(){return this.connectionState()==="open"}},{key:"remove",value:function(s){this.off(s.stateChangeRefs),this.channels=this.channels.filter(function(u){return u.joinRef()!==s.joinRef()})}},{key:"off",value:function(s){for(var u in this.stateChangeCallbacks)this.stateChangeCallbacks[u]=this.stateChangeCallbacks[u].filter(function(d){var f=o(d,1)[0];return s.indexOf(f)===-1})}},{key:"channel",value:function(s){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=new U(s,u,this);return this.channels.push(d),d}},{key:"push",value:function(s){var u=this;if(this.hasLogger()){var d=s.topic,f=s.event,R=s.payload,L=s.ref,P=s.join_ref;this.log("push","".concat(d," ").concat(f," (").concat(P,", ").concat(L,")"),R)}this.isConnected()?this.encode(s,function(I){return u.conn.send(I)}):this.sendBuffer.push(function(){return u.encode(s,function(I){return u.conn.send(I)})})}},{key:"makeRef",value:function(){var s=this.ref+1;return s===this.ref?this.ref=0:this.ref=s,this.ref.toString()}},{key:"sendHeartbeat",value:function(){var s=this;this.pendingHeartbeatRef&&!this.isConnected()||(this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatTimer=setTimeout(function(){return s.heartbeatTimeout()},this.heartbeatIntervalMs))}},{key:"abnormalClose",value:function(s){this.closeWasClean=!1,this.isConnected()&&this.conn.close(1e3,s)}},{key:"flushSendBuffer",value:function(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(function(s){return s()}),this.sendBuffer=[])}},{key:"onConnMessage",value:function(s){var u=this;this.decode(s.data,function(d){var f=d.topic,R=d.event,L=d.payload,P=d.ref,I=d.join_ref;P&&P===u.pendingHeartbeatRef&&(clearTimeout(u.heartbeatTimer),u.pendingHeartbeatRef=null,setTimeout(function(){return u.sendHeartbeat()},u.heartbeatIntervalMs)),u.hasLogger()&&u.log("receive","".concat(L.status||""," ").concat(f," ").concat(R," ").concat(P&&"("+P+")"||""),L);for(var N=0;N<u.channels.length;N++){var D=u.channels[N];D.isMember(f,R,L,I)&&D.trigger(R,L,P,I)}for(var j=0;j<u.stateChangeCallbacks.message.length;j++)(0,o(u.stateChangeCallbacks.message[j],2)[1])(d)})}},{key:"leaveOpenTopic",value:function(s){var u=this.channels.find(function(d){return d.topic===s&&(d.isJoined()||d.isJoining())});u&&(this.hasLogger()&&this.log("transport",'leaving duplicate topic "'.concat(s,'"')),u.leave())}}]),g}(),Ie=function(){function g(s){b(this,g),this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(s),this.readyState=E,this.poll()}return C(g,[{key:"normalizeEndpoint",value:function(s){return s.replace("ws://","http://").replace("wss://","https://").replace(new RegExp("(.*)/"+Ke),"$1/"+z)}},{key:"endpointURL",value:function(){return B.appendParams(this.pollEndpoint,{token:this.token})}},{key:"closeAndRetry",value:function(){this.close(),this.readyState=E}},{key:"ontimeout",value:function(){this.onerror("timeout"),this.closeAndRetry()}},{key:"poll",value:function(){var s=this;this.readyState!==W&&this.readyState!==E||B.request("GET",this.endpointURL(),"application/json",null,this.timeout,this.ontimeout.bind(this),function(u){if(u){var d=u.status,f=u.token,R=u.messages;s.token=f}else d=0;switch(d){case 200:R.forEach(function(L){setTimeout(function(){s.onmessage({data:L})},0)}),s.poll();break;case 204:s.poll();break;case 410:s.readyState=W,s.onopen(),s.poll();break;case 403:s.onerror(),s.close();break;case 0:case 500:s.onerror(),s.closeAndRetry();break;default:throw new Error("unhandled poll status ".concat(d))}})}},{key:"send",value:function(s){var u=this;B.request("POST",this.endpointURL(),"application/json",s,this.timeout,this.onerror.bind(this,"timeout"),function(d){d&&d.status===200||(u.onerror(d&&d.status),u.closeAndRetry())})}},{key:"close",value:function(s,u){this.readyState=x,this.onclose()}}]),g}(),B=function(){function g(){b(this,g)}return C(g,null,[{key:"request",value:function(s,u,d,f,R,L,P){if(S.XDomainRequest){var I=new XDomainRequest;this.xdomainRequest(I,s,u,f,R,L,P)}else{var N=new S.XMLHttpRequest;this.xhrRequest(N,s,u,d,f,R,L,P)}}},{key:"xdomainRequest",value:function(s,u,d,f,R,L,P){var I=this;s.timeout=R,s.open(u,d),s.onload=function(){var N=I.parseJSON(s.responseText);P&&P(N)},L&&(s.ontimeout=L),s.onprogress=function(){},s.send(f)}},{key:"xhrRequest",value:function(s,u,d,f,R,L,P,I){var N=this;s.open(u,d,!0),s.timeout=L,s.setRequestHeader("Content-Type",f),s.onerror=function(){I&&I(null)},s.onreadystatechange=function(){if(s.readyState===N.states.complete&&I){var D=N.parseJSON(s.responseText);I(D)}},P&&(s.ontimeout=P),s.send(R)}},{key:"parseJSON",value:function(s){if(!s||s==="")return null;try{return JSON.parse(s)}catch(u){return console&&console.log("failed to parse JSON response",s),null}}},{key:"serialize",value:function(s,u){var d=[];for(var f in s)if(s.hasOwnProperty(f)){var R=u?"".concat(u,"[").concat(f,"]"):f,L=s[f];r(L)==="object"?d.push(this.serialize(L,R)):d.push(encodeURIComponent(R)+"="+encodeURIComponent(L))}return d.join("&")}},{key:"appendParams",value:function(s,u){if(Object.keys(u).length===0)return s;var d=s.match(/\?/)?"&":"?";return"".concat(s).concat(d).concat(this.serialize(u))}}]),g}();B.states={complete:4};var Ye=function(){function g(s){var u=this,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};b(this,g);var f=d.events||{state:"presence_state",diff:"presence_diff"};this.state={},this.pendingDiffs=[],this.channel=s,this.joinRef=null,this.caller={onJoin:function(){},onLeave:function(){},onSync:function(){}},this.channel.on(f.state,function(R){var L=u.caller,P=L.onJoin,I=L.onLeave,N=L.onSync;u.joinRef=u.channel.joinRef(),u.state=g.syncState(u.state,R,P,I),u.pendingDiffs.forEach(function(D){u.state=g.syncDiff(u.state,D,P,I)}),u.pendingDiffs=[],N()}),this.channel.on(f.diff,function(R){var L=u.caller,P=L.onJoin,I=L.onLeave,N=L.onSync;u.inPendingSyncState()?u.pendingDiffs.push(R):(u.state=g.syncDiff(u.state,R,P,I),N())})}return C(g,[{key:"onJoin",value:function(s){this.caller.onJoin=s}},{key:"onLeave",value:function(s){this.caller.onLeave=s}},{key:"onSync",value:function(s){this.caller.onSync=s}},{key:"list",value:function(s){return g.list(this.state,s)}},{key:"inPendingSyncState",value:function(){return!this.joinRef||this.joinRef!==this.channel.joinRef()}}],[{key:"syncState",value:function(s,u,d,f){var R=this,L=this.clone(s),P={},I={};return this.map(L,function(N,D){u[N]||(I[N]=D)}),this.map(u,function(N,D){var j=L[N];if(j){var pe=D.metas.map(function(ie){return ie.phx_ref}),Fe=j.metas.map(function(ie){return ie.phx_ref}),Z=D.metas.filter(function(ie){return Fe.indexOf(ie.phx_ref)<0}),se=j.metas.filter(function(ie){return pe.indexOf(ie.phx_ref)<0});Z.length>0&&(P[N]=D,P[N].metas=Z),se.length>0&&(I[N]=R.clone(j),I[N].metas=se)}else P[N]=D}),this.syncDiff(L,{joins:P,leaves:I},d,f)}},{key:"syncDiff",value:function(s,u,d,f){var R=u.joins,L=u.leaves,P=this.clone(s);return d||(d=function(){}),f||(f=function(){}),this.map(R,function(I,N){var D=P[I];if(P[I]=N,D){var j,pe=P[I].metas.map(function(Z){return Z.phx_ref}),Fe=D.metas.filter(function(Z){return pe.indexOf(Z.phx_ref)<0});(j=P[I].metas).unshift.apply(j,n(Fe))}d(I,D,N)}),this.map(L,function(I,N){var D=P[I];if(D){var j=N.metas.map(function(pe){return pe.phx_ref});D.metas=D.metas.filter(function(pe){return j.indexOf(pe.phx_ref)<0}),f(I,D,N),D.metas.length===0&&delete P[I]}}),P}},{key:"list",value:function(s,u){return u||(u=function(d,f){return f}),this.map(s,function(d,f){return u(d,f)})}},{key:"map",value:function(s,u){return Object.getOwnPropertyNames(s).map(function(d){return u(d,s[d])})}},{key:"clone",value:function(s){return JSON.parse(JSON.stringify(s))}}]),g}(),Oe=function(){function g(s,u){b(this,g),this.callback=s,this.timerCalc=u,this.timer=null,this.tries=0}return C(g,[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:"scheduleTimeout",value:function(){var s=this;clearTimeout(this.timer),this.timer=setTimeout(function(){s.tries=s.tries+1,s.callback()},this.timerCalc(this.tries+1))}}]),g}()}])})});var cr=ar((hr,pi)=>{(function(e,t){"use strict";(function(){for(var w=0,S=["ms","moz","webkit","o"],E=0;E<S.length&&!e.requestAnimationFrame;++E)e.requestAnimationFrame=e[S[E]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[S[E]+"CancelAnimationFrame"]||e[S[E]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(W,te){var x=new Date().getTime(),J=Math.max(0,16-(x-w)),ae=e.setTimeout(function(){W(x+J)},J);return w=x+J,ae}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(W){clearTimeout(W)})})();var i,n,r,o,a,m=function(w,S,E){w.addEventListener?w.addEventListener(S,E,!1):w.attachEvent?w.attachEvent("on"+S,E):w["on"+S]=E},b={autoRun:!0,barThickness:3,barColors:{0:"rgba(26,  188, 156, .9)",".25":"rgba(52,  152, 219, .9)",".50":"rgba(241, 196, 15,  .9)",".75":"rgba(230, 126, 34,  .9)","1.0":"rgba(211, 84,  0,   .9)"},shadowBlur:10,shadowColor:"rgba(0,   0,   0,   .6)",className:null},A=function(){i.width=e.innerWidth,i.height=b.barThickness*5;var w=i.getContext("2d");w.shadowBlur=b.shadowBlur,w.shadowColor=b.shadowColor;var S=w.createLinearGradient(0,0,i.width,0);for(var E in b.barColors)S.addColorStop(E,b.barColors[E]);w.lineWidth=b.barThickness,w.beginPath(),w.moveTo(0,b.barThickness/2),w.lineTo(Math.ceil(o*i.width),b.barThickness/2),w.strokeStyle=S,w.stroke()},C=function(){i=t.createElement("canvas");var w=i.style;w.position="fixed",w.top=w.left=w.right=w.margin=w.padding=0,w.zIndex=100001,w.display="none",b.className&&i.classList.add(b.className),t.body.appendChild(i),m(e,"resize",A)},T={config:function(w){for(var S in w)b.hasOwnProperty(S)&&(b[S]=w[S])},show:function(){a||(a=!0,r!==null&&e.cancelAnimationFrame(r),i||C(),i.style.opacity=1,i.style.display="block",T.progress(0),b.autoRun&&function w(){n=e.requestAnimationFrame(w),T.progress("+"+.05*Math.pow(1-Math.sqrt(o),2))}())},progress:function(w){return typeof w=="undefined"||(typeof w=="string"&&(w=(w.indexOf("+")>=0||w.indexOf("-")>=0?o:0)+parseFloat(w)),o=w>1?1:w,A()),o},hide:function(){!a||(a=!1,n!=null&&(e.cancelAnimationFrame(n),n=null),function w(){if(T.progress("+.1")>=1&&(i.style.opacity-=.05,i.style.opacity<=.05)){i.style.display="none",r=null;return}r=e.requestAnimationFrame(w)}())}};typeof pi=="object"&&typeof pi.exports=="object"?pi.exports=T:typeof define=="function"&&define.amd?define(function(){return T}):this.topbar=T}).call(hr,window,document)});"use strict";(function(){var e=t();function t(){if(typeof window.CustomEvent=="function")return window.CustomEvent;function r(o,a){a=a||{bubbles:!1,cancelable:!1,detail:void 0};var m=document.createEvent("CustomEvent");return m.initCustomEvent(o,a.bubbles,a.cancelable,a.detail),m}return r.prototype=window.Event.prototype,r}function i(r,o){var a=document.createElement("input");return a.type="hidden",a.name=r,a.value=o,a}function n(r,o){var a=r.getAttribute("data-to"),m=i("_method",r.getAttribute("data-method")),b=i("_csrf_token",r.getAttribute("data-csrf")),A=document.createElement("form"),C=r.getAttribute("target");A.method=r.getAttribute("data-method")==="get"?"get":"post",A.action=a,A.style.display="hidden",C?A.target=C:o&&(A.target="_blank"),A.appendChild(b),A.appendChild(m),document.body.appendChild(A),A.submit()}window.addEventListener("click",function(r){for(var o=r.target;o&&o.getAttribute;){var a=new e("phoenix.link.click",{bubbles:!0,cancelable:!0});if(!o.dispatchEvent(a))return r.preventDefault(),r.stopImmediatePropagation(),!1;if(o.getAttribute("data-method"))return n(o,r.metaKey||r.shiftKey),r.preventDefault(),!1;o=o.parentNode}},!1),window.addEventListener("phoenix.link.click",function(r){var o=r.target.getAttribute("data-confirm");o&&!window.confirm(o)&&r.preventDefault()},!1)})();var Ni=lr(ur()),ji=lr(cr());var dr="consecutive-reloads",fr=10,To=[1e3,3e3],xo=3e4,pr=["phx-click-loading","phx-change-loading","phx-submit-loading","phx-keydown-loading","phx-keyup-loading","phx-blur-loading","phx-focus-loading"],$e="data-phx-component",Ki="data-phx-link",_o="track-static",Eo="data-phx-link-state",Qe="data-phx-ref",mr="track-uploads",Ct="data-phx-upload-ref",Qi="data-phx-preflighted-refs",Po="data-phx-done-refs",gr="drop-target",Zi="data-phx-active-refs",en="phx:live-file:updated",tn="data-phx-skip",vr="data-phx-remove",br="page-loading",yr="phx-connected",mi="phx-disconnected",kr="phx-no-feedback",wr="phx-error",zt="data-phx-parent-id",Sr="data-phx-main",gi="data-phx-root-id",Lo="trigger-action",Cr="feedback-for",Ar="phx-has-focused",Do=["text","textarea","number","email","password","search","tel","url","date","time"],Tr=["checkbox","radio"],xr="phx-has-submitted",pt="data-phx-session",jt=`[${pt}]`,qt="data-phx-static",nn="data-phx-readonly",vi="data-phx-disabled",rn="disable-with",bi="data-phx-disable-with-restore",yi="hook",Ro="debounce",Io="throttle",sn="update",Mo="key",Ze="phxPrivate",_r="auto-recover",on="phx:live-socket:debug",an="phx:live-socket:profiling",ln="phx:live-socket:latency-sim",Oo="progress",Ho=1,No=200,jo="phx-",Fo=3e4,Gt="debounce-trigger",ki="throttled",Er="debounce-prev-key",Uo={debounce:300,throttle:300},Pr="d",et="s",je="c",Lr="e",Dr="r",Rr="t",Bo=class{constructor(e,t,i){this.liveSocket=i,this.entry=e,this.offset=0,this.chunkSize=t,this.chunkTimer=null,this.uploadChannel=i.channel(`lvu:${e.ref}`,{token:e.metadata()})}error(e){clearTimeout(this.chunkTimer),this.uploadChannel.leave(),this.entry.error(e)}upload(){this.uploadChannel.onError(e=>this.error(e)),this.uploadChannel.join().receive("ok",e=>this.readNextChunk()).receive("error",e=>this.error(e))}isDone(){return this.offset>=this.entry.file.size}readNextChunk(){let e=new window.FileReader,t=this.entry.file.slice(this.offset,this.chunkSize+this.offset);e.onload=i=>{if(i.target.error===null)this.offset+=i.target.result.byteLength,this.pushChunk(i.target.result);else return Ae("Read error: "+i.target.error)},e.readAsArrayBuffer(t)}pushChunk(e){!this.uploadChannel.isJoined()||this.uploadChannel.push("chunk",e).receive("ok",()=>{this.entry.progress(this.offset/this.entry.file.size*100),this.isDone()||(this.chunkTimer=setTimeout(()=>this.readNextChunk(),this.liveSocket.getLatencySim()||0))})}},Ae=(e,t)=>console.error&&console.error(e,t);function $o(){let e=new Set,t=document.querySelectorAll("*[id]");for(let i=0,n=t.length;i<n;i++)e.has(t[i].id)?console.error(`Multiple IDs detected: ${t[i].id}. Ensure unique element ids.`):e.add(t[i].id)}var Vo=(e,t,i,n)=>{e.liveSocket.isDebugEnabled()&&console.log(`${e.id} ${t}: ${i} - `,n)},un=e=>typeof e=="function"?e:function(){return e},Kt=e=>JSON.parse(JSON.stringify(e)),Qt=(e,t,i)=>{do{if(e.matches(`[${t}]`))return e;e=e.parentElement||e.parentNode}while(e!==null&&e.nodeType===1&&!(i&&i.isSameNode(e)||e.matches(jt)));return null},Zt=e=>e!==null&&typeof e=="object"&&!(e instanceof Array),Jo=(e,t)=>JSON.stringify(e)===JSON.stringify(t),Ir=e=>{for(let t in e)return!1;return!0},nt=(e,t)=>e&&t(e),Wo=function(e,t,i,n){e.forEach(r=>{new Bo(r,i.config.chunk_size,n).upload()})},Mr={canPushState(){return typeof history.pushState!="undefined"},dropLocal(e,t,i){return e.removeItem(this.localKey(t,i))},updateLocal(e,t,i,n,r){let o=this.getLocal(e,t,i),a=this.localKey(t,i),m=o===null?n:r(o);return e.setItem(a,JSON.stringify(m)),m},getLocal(e,t,i){return JSON.parse(e.getItem(this.localKey(t,i)))},updateCurrentState(e){!this.canPushState()||history.replaceState(e(history.state||{}),"",window.location.href)},pushState(e,t,i){if(this.canPushState()){if(i!==window.location.href){if(t.type=="redirect"&&t.scroll){let r=history.state||{};r.scroll=t.scroll,history.replaceState(r,"",window.location.href)}delete t.scroll,history[e+"State"](t,"",i||null);let n=this.getHashTargetEl(window.location.hash);n?n.scrollIntoView():t.type==="redirect"&&window.scroll(0,0)}}else this.redirect(i)},setCookie(e,t){document.cookie=`${e}=${t}`},getCookie(e){return document.cookie.replace(new RegExp(`(?:(?:^|.*;s*)${e}s*=s*([^;]*).*$)|^.*$`),"$1")},redirect(e,t){t&&Mr.setCookie("__phoenix_flash__",t+"; max-age=60000; path=/"),window.location=e},localKey(e,t){return`${e}-${t}`},getHashTargetEl(e){let t=e.toString().substring(1);if(t!=="")return document.getElementById(t)||document.querySelector(`a[name="${t}"]`)}},mt=Mr,rt={byId(e){return document.getElementById(e)||Ae(`no id found for ${e}`)},removeClass(e,t){e.classList.remove(t),e.classList.length===0&&e.removeAttribute("class")},all(e,t,i){if(!e)return[];let n=Array.from(e.querySelectorAll(t));return i?n.forEach(i):n},childNodeLength(e){let t=document.createElement("template");return t.innerHTML=e,t.content.childElementCount},isUploadInput(e){return e.type==="file"&&e.getAttribute(Ct)!==null},findUploadInputs(e){return this.all(e,`input[type="file"][${Ct}]`)},findComponentNodeList(e,t){return this.filterWithinSameLiveView(this.all(e,`[${$e}="${t}"]`),e)},isPhxDestroyed(e){return!!(e.id&&rt.private(e,"destroyed"))},markPhxChildDestroyed(e){e.setAttribute(pt,""),this.putPrivate(e,"destroyed",!0)},findPhxChildrenInFragment(e,t){let i=document.createElement("template");return i.innerHTML=e,this.findPhxChildren(i.content,t)},isIgnored(e,t){return(e.getAttribute(t)||e.getAttribute("data-phx-update"))==="ignore"},isPhxUpdate(e,t,i){return e.getAttribute&&i.indexOf(e.getAttribute(t))>=0},findPhxChildren(e,t){return this.all(e,`${jt}[${zt}="${t}"]`)},findParentCIDs(e,t){let i=new Set(t);return t.reduce((n,r)=>{let o=`[${$e}="${r}"] [${$e}]`;return this.filterWithinSameLiveView(this.all(e,o),e).map(a=>parseInt(a.getAttribute($e))).forEach(a=>n.delete(a)),n},i)},filterWithinSameLiveView(e,t){return t.querySelector(jt)?e.filter(i=>this.withinSameLiveView(i,t)):e},withinSameLiveView(e,t){for(;e=e.parentNode;){if(e.isSameNode(t))return!0;if(e.getAttribute(pt)!==null)return!1}},private(e,t){return e[Ze]&&e[Ze][t]},deletePrivate(e,t){e[Ze]&&delete e[Ze][t]},putPrivate(e,t,i){e[Ze]||(e[Ze]={}),e[Ze][t]=i},copyPrivates(e,t){t[Ze]&&(e[Ze]=Kt(t[Ze]))},putTitle(e){let t=document.querySelector("title"),{prefix:i,suffix:n}=t.dataset;document.title=`${i||""}${e}${n||""}`},debounce(e,t,i,n,r,o,a){let m=e.getAttribute(i),b=e.getAttribute(r);m===""&&(m=n),b===""&&(b=o);let A=m||b;switch(A){case null:return a();case"blur":this.once(e,"debounce-blur")&&e.addEventListener("blur",()=>a());return;default:let C=parseInt(A),T=()=>b?this.deletePrivate(e,ki):a(),w=this.incCycle(e,Gt,T);if(isNaN(C))return Ae(`invalid throttle/debounce value: ${A}`);if(b){let E=!1;if(t.type==="keydown"){let W=this.private(e,Er);this.putPrivate(e,Er,t.key),E=W!==t.key}if(!E&&this.private(e,ki))return!1;a(),this.putPrivate(e,ki,!0),setTimeout(()=>this.triggerCycle(e,Gt),C)}else setTimeout(()=>this.triggerCycle(e,Gt,w),C);let S=e.form;S&&this.once(S,"bind-debounce")&&S.addEventListener("submit",()=>{Array.from(new FormData(S).entries(),([E])=>{let W=S.querySelector(`[name="${E}"]`);this.incCycle(W,Gt),this.deletePrivate(W,ki)})}),this.once(e,"bind-debounce")&&e.addEventListener("blur",()=>this.triggerCycle(e,Gt))}},triggerCycle(e,t,i){let[n,r]=this.private(e,t);i||(i=n),i===n&&(this.incCycle(e,t),r())},once(e,t){return this.private(e,t)===!0?!1:(this.putPrivate(e,t,!0),!0)},incCycle(e,t,i=function(){}){let[n]=this.private(e,t)||[0,i];return n++,this.putPrivate(e,t,[n,i]),n},discardError(e,t,i){let n=t.getAttribute&&t.getAttribute(i),r=n&&e.querySelector(`[id="${n}"], [name="${n}"]`);!r||this.private(r,Ar)||this.private(r.form,xr)||t.classList.add(kr)},showError(e,t){(e.id||e.name)&&this.all(e.form,`[${t}="${e.id}"], [${t}="${e.name}"]`,i=>{this.removeClass(i,kr)})},isPhxChild(e){return e.getAttribute&&e.getAttribute(zt)},dispatchEvent(e,t,i={}){let n=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:i});e.dispatchEvent(n)},cloneNode(e,t){if(typeof t=="undefined")return e.cloneNode(!0);{let i=e.cloneNode(!1);return i.innerHTML=t,i}},mergeAttrs(e,t,i={}){let n=i.exclude||[],r=i.isIgnored,o=t.attributes;for(let m=o.length-1;m>=0;m--){let b=o[m].name;n.indexOf(b)<0&&e.setAttribute(b,t.getAttribute(b))}let a=e.attributes;for(let m=a.length-1;m>=0;m--){let b=a[m].name;r?b.startsWith("data-")&&!t.hasAttribute(b)&&e.removeAttribute(b):t.hasAttribute(b)||e.removeAttribute(b)}},mergeFocusedInput(e,t){e instanceof HTMLSelectElement||rt.mergeAttrs(e,t,{except:["value"]}),t.readOnly?e.setAttribute("readonly",!0):e.removeAttribute("readonly")},hasSelectionRange(e){return e.setSelectionRange&&(e.type==="text"||e.type==="textarea")},restoreFocus(e,t,i){if(!rt.isTextualInput(e))return;let n=e.matches(":focus");e.readOnly&&e.blur(),n||e.focus(),this.hasSelectionRange(e)&&e.setSelectionRange(t,i)},isFormInput(e){return/^(?:input|select|textarea)$/i.test(e.tagName)&&e.type!=="button"},syncAttrsToProps(e){e instanceof HTMLInputElement&&Tr.indexOf(e.type.toLocaleLowerCase())>=0&&(e.checked=e.getAttribute("checked")!==null)},syncPropsToAttrs(e){if(e instanceof HTMLSelectElement){let t=e.options.item(e.selectedIndex);t&&t.getAttribute("selected")===null&&t.setAttribute("selected","")}},isTextualInput(e){return Do.indexOf(e.type)>=0},isNowTriggerFormExternal(e,t){return e.getAttribute&&e.getAttribute(t)!==null},syncPendingRef(e,t,i){let n=e.getAttribute(Qe);return n===null?!0:rt.isFormInput(e)||e.getAttribute(i)!==null?(rt.isUploadInput(e)&&rt.mergeAttrs(e,t,{isIgnored:!0}),rt.putPrivate(e,Qe,t),!1):(pr.forEach(r=>{e.classList.contains(r)&&t.classList.add(r)}),t.setAttribute(Qe,n),!0)},cleanChildNodes(e,t){if(rt.isPhxUpdate(e,t,["append","prepend"])){let i=[];e.childNodes.forEach(n=>{n.id||(n.nodeType===Node.TEXT_NODE&&n.nodeValue.trim()===""||Ae(`only HTML element tags with an id are allowed inside containers with phx-update.

removing illegal node: "${(n.outerHTML||n.nodeValue).trim()}"

`),i.push(n))}),i.forEach(n=>n.remove())}},replaceRootContainer(e,t,i){let n=new Set(["id",pt,qt,Sr]);if(e.tagName.toLowerCase()===t.toLowerCase())return Array.from(e.attributes).filter(r=>!n.has(r.name.toLowerCase())).forEach(r=>e.removeAttribute(r.name)),Object.keys(i).filter(r=>!n.has(r.toLowerCase())).forEach(r=>e.setAttribute(r,i[r])),e;{let r=document.createElement(t);return Object.keys(i).forEach(o=>r.setAttribute(o,i[o])),n.forEach(o=>r.setAttribute(o,e.getAttribute(o))),r.innerHTML=e.innerHTML,e.replaceWith(r),r}}},_=rt,hn=class{static isActive(e,t){let i=t._phxRef===void 0,r=e.getAttribute(Zi).split(",").indexOf(Te.genFileRef(t))>=0;return t.size>0&&(i||r)}static isPreflighted(e,t){return e.getAttribute(Qi).split(",").indexOf(Te.genFileRef(t))>=0&&this.isActive(e,t)}constructor(e,t,i){this.ref=Te.genFileRef(t),this.fileEl=e,this.file=t,this.view=i,this.meta=null,this._isCancelled=!1,this._isDone=!1,this._progress=0,this._lastProgressSent=-1,this._onDone=function(){},this._onElUpdated=this.onElUpdated.bind(this),this.fileEl.addEventListener(en,this._onElUpdated)}metadata(){return this.meta}progress(e){this._progress=Math.floor(e),this._progress>this._lastProgressSent&&(this._progress>=100?(this._progress=100,this._lastProgressSent=100,this._isDone=!0,this.view.pushFileProgress(this.fileEl,this.ref,100,()=>{Te.untrackFile(this.fileEl,this.file),this._onDone()})):(this._lastProgressSent=this._progress,this.view.pushFileProgress(this.fileEl,this.ref,this._progress)))}cancel(){this._isCancelled=!0,this._isDone=!0,this._onDone()}isDone(){return this._isDone}error(e="failed"){this.view.pushFileProgress(this.fileEl,this.ref,{error:e}),Te.clearFiles(this.fileEl)}onDone(e){this._onDone=()=>{this.fileEl.removeEventListener(en,this._onElUpdated),e()}}onElUpdated(){this.fileEl.getAttribute(Zi).split(",").indexOf(this.ref)===-1&&this.cancel()}toPreflightPayload(){return{last_modified:this.file.lastModified,name:this.file.name,size:this.file.size,type:this.file.type,ref:this.ref}}uploader(e){if(this.meta.uploader){let t=e[this.meta.uploader]||Ae(`no uploader configured for ${this.meta.uploader}`);return{name:this.meta.uploader,callback:t}}else return{name:"channel",callback:Wo}}zipPostFlight(e){this.meta=e.entries[this.ref],this.meta||Ae(`no preflight upload response returned with ref ${this.ref}`,{input:this.fileEl,response:e})}},Yo=0,Te=class{static genFileRef(e){let t=e._phxRef;return t!==void 0?t:(e._phxRef=(Yo++).toString(),e._phxRef)}static getEntryDataURL(e,t,i){let n=this.activeFiles(e).find(r=>this.genFileRef(r)===t);i(URL.createObjectURL(n))}static hasUploadsInProgress(e){let t=0;return _.findUploadInputs(e).forEach(i=>{i.getAttribute(Qi)!==i.getAttribute(Po)&&t++}),t>0}static serializeUploads(e){let t=this.activeFiles(e),i={};return t.forEach(n=>{let r={path:e.name},o=e.getAttribute(Ct);i[o]=i[o]||[],r.ref=this.genFileRef(n),r.name=n.name||r.ref,r.type=n.type,r.size=n.size,i[o].push(r)}),i}static clearFiles(e){e.value=null,e.removeAttribute(Ct),_.putPrivate(e,"files",[])}static untrackFile(e,t){_.putPrivate(e,"files",_.private(e,"files").filter(i=>!Object.is(i,t)))}static trackFiles(e,t){if(e.getAttribute("multiple")!==null){let i=t.filter(n=>!this.activeFiles(e).find(r=>Object.is(r,n)));_.putPrivate(e,"files",this.activeFiles(e).concat(i)),e.value=null}else _.putPrivate(e,"files",t)}static activeFileInputs(e){let t=_.findUploadInputs(e);return Array.from(t).filter(i=>i.files&&this.activeFiles(i).length>0)}static activeFiles(e){return(_.private(e,"files")||[]).filter(t=>hn.isActive(e,t))}static inputsAwaitingPreflight(e){let t=_.findUploadInputs(e);return Array.from(t).filter(i=>this.filesAwaitingPreflight(i).length>0)}static filesAwaitingPreflight(e){return this.activeFiles(e).filter(t=>!hn.isPreflighted(e,t))}constructor(e,t,i){this.view=t,this.onComplete=i,this._entries=Array.from(Te.filesAwaitingPreflight(e)||[]).map(n=>new hn(e,n,t)),this.numEntriesInProgress=this._entries.length}entries(){return this._entries}initAdapterUpload(e,t,i){this._entries=this._entries.map(r=>(r.zipPostFlight(e),r.onDone(()=>{this.numEntriesInProgress--,this.numEntriesInProgress===0&&this.onComplete()}),r));let n=this._entries.reduce((r,o)=>{let{name:a,callback:m}=o.uploader(i.uploaders);return r[a]=r[a]||{callback:m,entries:[]},r[a].entries.push(o),r},{});for(let r in n){let{callback:o,entries:a}=n[r];o(a,t,e,i)}}},Xo={LiveFileUpload:{activeRefs(){return this.el.getAttribute(Zi)},preflightedRefs(){return this.el.getAttribute(Qi)},mounted(){this.preflightedWas=this.preflightedRefs()},updated(){let e=this.preflightedRefs();this.preflightedWas!==e&&(this.preflightedWas=e,e===""&&this.__view.cancelSubmit(this.el.form)),this.activeRefs()===""&&(this.el.value=null),this.el.dispatchEvent(new CustomEvent(en))}},LiveImgPreview:{mounted(){this.ref=this.el.getAttribute("data-phx-entry-ref"),this.inputEl=document.getElementById(this.el.getAttribute(Ct)),Te.getEntryDataURL(this.inputEl,this.ref,e=>{this.url=e,this.el.src=e})},destroyed(){URL.revokeObjectURL(this.url)}}},zo=Xo,qo=class{constructor(e,t,i){let n=new Set,r=new Set([...t.children].map(a=>a.id)),o=[];Array.from(e.children).forEach(a=>{if(a.id&&(n.add(a.id),r.has(a.id))){let m=a.previousElementSibling&&a.previousElementSibling.id;o.push({elementId:a.id,previousElementId:m})}}),this.containerId=t.id,this.updateType=i,this.elementsToModify=o,this.elementIdsToAdd=[...r].filter(a=>!n.has(a))}perform(){let e=_.byId(this.containerId);this.elementsToModify.forEach(t=>{t.previousElementId?nt(document.getElementById(t.previousElementId),i=>{nt(document.getElementById(t.elementId),n=>{n.previousElementSibling&&n.previousElementSibling.id==i.id||i.insertAdjacentElement("afterend",n)})}):nt(document.getElementById(t.elementId),i=>{i.previousElementSibling==null||e.insertAdjacentElement("afterbegin",i)})}),this.updateType=="prepend"&&this.elementIdsToAdd.reverse().forEach(t=>{nt(document.getElementById(t),i=>e.insertAdjacentElement("afterbegin",i))})}},Or=11;function Go(e,t){var i=t.attributes,n,r,o,a,m;if(!(t.nodeType===Or||e.nodeType===Or)){for(var b=i.length-1;b>=0;b--)n=i[b],r=n.name,o=n.namespaceURI,a=n.value,o?(r=n.localName||r,m=e.getAttributeNS(o,r),m!==a&&(n.prefix==="xmlns"&&(r=n.name),e.setAttributeNS(o,r,a))):(m=e.getAttribute(r),m!==a&&e.setAttribute(r,a));for(var A=e.attributes,C=A.length-1;C>=0;C--)n=A[C],r=n.name,o=n.namespaceURI,o?(r=n.localName||r,t.hasAttributeNS(o,r)||e.removeAttributeNS(o,r)):t.hasAttribute(r)||e.removeAttribute(r)}}var wi,Ko="http://www.w3.org/1999/xhtml",Me=typeof document=="undefined"?void 0:document,Qo=!!Me&&"content"in Me.createElement("template"),Zo=!!Me&&Me.createRange&&"createContextualFragment"in Me.createRange();function ea(e){var t=Me.createElement("template");return t.innerHTML=e,t.content.childNodes[0]}function ta(e){wi||(wi=Me.createRange(),wi.selectNode(Me.body));var t=wi.createContextualFragment(e);return t.childNodes[0]}function ia(e){var t=Me.createElement("body");return t.innerHTML=e,t.childNodes[0]}function na(e){return e=e.trim(),Qo?ea(e):Zo?ta(e):ia(e)}function Si(e,t){var i=e.nodeName,n=t.nodeName,r,o;return i===n?!0:(r=i.charCodeAt(0),o=n.charCodeAt(0),r<=90&&o>=97?i===n.toUpperCase():o<=90&&r>=97?n===i.toUpperCase():!1)}function ra(e,t){return!t||t===Ko?Me.createElement(e):Me.createElementNS(t,e)}function sa(e,t){for(var i=e.firstChild;i;){var n=i.nextSibling;t.appendChild(i),i=n}return t}function cn(e,t,i){e[i]!==t[i]&&(e[i]=t[i],e[i]?e.setAttribute(i,""):e.removeAttribute(i))}var Hr={OPTION:function(e,t){var i=e.parentNode;if(i){var n=i.nodeName.toUpperCase();n==="OPTGROUP"&&(i=i.parentNode,n=i&&i.nodeName.toUpperCase()),n==="SELECT"&&!i.hasAttribute("multiple")&&(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),i.selectedIndex=-1)}cn(e,t,"selected")},INPUT:function(e,t){cn(e,t,"checked"),cn(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var i=t.value;e.value!==i&&(e.value=i);var n=e.firstChild;if(n){var r=n.nodeValue;if(r==i||!i&&r==e.placeholder)return;n.nodeValue=i}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var i=-1,n=0,r=e.firstChild,o,a;r;)if(a=r.nodeName&&r.nodeName.toUpperCase(),a==="OPTGROUP")o=r,r=o.firstChild;else{if(a==="OPTION"){if(r.hasAttribute("selected")){i=n;break}n++}r=r.nextSibling,!r&&o&&(r=o.nextSibling,o=null)}e.selectedIndex=i}}},ei=1,oa=11,Nr=3,jr=8;function At(){}function aa(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}function la(e){return function(i,n,r){if(r||(r={}),typeof n=="string")if(i.nodeName==="#document"||i.nodeName==="HTML"||i.nodeName==="BODY"){var o=n;n=Me.createElement("html"),n.innerHTML=o}else n=na(n);var a=r.getNodeKey||aa,m=r.onBeforeNodeAdded||At,b=r.onNodeAdded||At,A=r.onBeforeElUpdated||At,C=r.onElUpdated||At,T=r.onBeforeNodeDiscarded||At,w=r.onNodeDiscarded||At,S=r.onBeforeElChildrenUpdated||At,E=r.childrenOnly===!0,W=Object.create(null),te=[];function x(F){te.push(F)}function J(F,M){if(F.nodeType===ei)for(var U=F.firstChild;U;){var Y=void 0;M&&(Y=a(U))?x(Y):(w(U),U.firstChild&&J(U,M)),U=U.nextSibling}}function ae(F,M,U){T(F)!==!1&&(M&&M.removeChild(F),w(F),J(F,U))}function le(F){if(F.nodeType===ei||F.nodeType===oa)for(var M=F.firstChild;M;){var U=a(M);U&&(W[U]=M),le(M),M=M.nextSibling}}le(i);function We(F){b(F);for(var M=F.firstChild;M;){var U=M.nextSibling,Y=a(M);if(Y){var Ee=W[Y];Ee&&Si(M,Ee)?(M.parentNode.replaceChild(Ee,M),be(Ee,M)):We(M)}else We(M);M=U}}function De(F,M,U){for(;M;){var Y=M.nextSibling;(U=a(M))?x(U):ae(M,F,!0),M=Y}}function be(F,M,U){var Y=a(M);Y&&delete W[Y],!(!U&&(A(F,M)===!1||(e(F,M),C(F),S(F,M)===!1)))&&(F.nodeName!=="TEXTAREA"?Re(F,M):Hr.TEXTAREA(F,M))}function Re(F,M){var U=M.firstChild,Y=F.firstChild,Ee,Ie,B,Ye,Oe;e:for(;U;){for(Ye=U.nextSibling,Ee=a(U);Y;){if(B=Y.nextSibling,U.isSameNode&&U.isSameNode(Y)){U=Ye,Y=B;continue e}Ie=a(Y);var g=Y.nodeType,s=void 0;if(g===U.nodeType&&(g===ei?(Ee?Ee!==Ie&&((Oe=W[Ee])?B===Oe?s=!1:(F.insertBefore(Oe,Y),Ie?x(Ie):ae(Y,F,!0),Y=Oe):s=!1):Ie&&(s=!1),s=s!==!1&&Si(Y,U),s&&be(Y,U)):(g===Nr||g==jr)&&(s=!0,Y.nodeValue!==U.nodeValue&&(Y.nodeValue=U.nodeValue))),s){U=Ye,Y=B;continue e}Ie?x(Ie):ae(Y,F,!0),Y=B}if(Ee&&(Oe=W[Ee])&&Si(Oe,U))F.appendChild(Oe),be(Oe,U);else{var u=m(U);u!==!1&&(u&&(U=u),U.actualize&&(U=U.actualize(F.ownerDocument||Me)),F.appendChild(U),We(U))}U=Ye,Y=B}De(F,Y,Ie);var d=Hr[F.nodeName];d&&d(F,M)}var ee=i,_e=ee.nodeType,ct=n.nodeType;if(!E){if(_e===ei)ct===ei?Si(i,n)||(w(i),ee=sa(i,ra(n.nodeName,n.namespaceURI))):ee=n;else if(_e===Nr||_e===jr){if(ct===_e)return ee.nodeValue!==n.nodeValue&&(ee.nodeValue=n.nodeValue),ee;ee=n}}if(ee===n)w(i);else{if(n.isSameNode&&n.isSameNode(ee))return;if(be(ee,n,E),te)for(var bt=0,z=te.length;bt<z;bt++){var Ke=W[te[bt]];Ke&&ae(Ke,Ke.parentNode,!1)}}return!E&&ee!==i&&i.parentNode&&(ee.actualize&&(ee=ee.actualize(i.ownerDocument||Me)),i.parentNode.replaceChild(ee,i)),ee}}var ua=la(Go),Fr=ua,Ci=class{static patchEl(e,t,i){Fr(e,t,{childrenOnly:!1,onBeforeElUpdated:(n,r)=>{if(i&&i.isSameNode(n)&&_.isFormInput(n))return _.mergeFocusedInput(n,r),!1}})}constructor(e,t,i,n,r){this.view=e,this.liveSocket=e.liveSocket,this.container=t,this.id=i,this.rootID=e.root.id,this.html=n,this.targetCID=r,this.cidPatch=typeof this.targetCID=="number",this.callbacks={beforeadded:[],beforeupdated:[],beforephxChildAdded:[],afteradded:[],afterupdated:[],afterdiscarded:[],afterphxChildAdded:[]}}before(e,t){this.callbacks[`before${e}`].push(t)}after(e,t){this.callbacks[`after${e}`].push(t)}trackBefore(e,...t){this.callbacks[`before${e}`].forEach(i=>i(...t))}trackAfter(e,...t){this.callbacks[`after${e}`].forEach(i=>i(...t))}markPrunableContentForRemoval(){_.all(this.container,"[phx-update=append] > *, [phx-update=prepend] > *",e=>{e.setAttribute(vr,"")})}perform(){let{view:e,liveSocket:t,container:i,html:n}=this,r=this.isCIDPatch()?this.targetCIDContainer(n):i;if(this.isCIDPatch()&&!r)return;let o=t.getActiveElement(),{selectionStart:a,selectionEnd:m}=o&&_.hasSelectionRange(o)?o:{},b=t.binding(sn),A=t.binding(Cr),C=t.binding(rn),T=t.binding(Lo),w=[],S=[],E=[],W=null,te=t.time("premorph container prep",()=>this.buildDiffHTML(i,n,b,r));return this.trackBefore("added",i),this.trackBefore("updated",i,i),t.time("morphdom",()=>{Fr(r,te,{childrenOnly:r.getAttribute($e)===null,getNodeKey:x=>_.isPhxDestroyed(x)?null:x.id,onBeforeNodeAdded:x=>(this.trackBefore("added",x),x),onNodeAdded:x=>{_.isNowTriggerFormExternal(x,T)&&(W=x),_.discardError(r,x,A),_.isPhxChild(x)&&e.ownsElement(x)&&this.trackAfter("phxChildAdded",x),w.push(x)},onNodeDiscarded:x=>{_.isPhxChild(x)&&t.destroyViewByEl(x),this.trackAfter("discarded",x)},onBeforeNodeDiscarded:x=>x.getAttribute&&x.getAttribute(vr)!==null?!0:!(x.parentNode!==null&&_.isPhxUpdate(x.parentNode,b,["append","prepend"])&&x.id||this.skipCIDSibling(x)),onElUpdated:x=>{_.isNowTriggerFormExternal(x,T)&&(W=x),S.push(x)},onBeforeElUpdated:(x,J)=>{if(_.cleanChildNodes(J,b),this.skipCIDSibling(J))return!1;if(_.isIgnored(x,b))return this.trackBefore("updated",x,J),_.mergeAttrs(x,J,{isIgnored:!0}),S.push(x),!1;if(x.type==="number"&&x.validity&&x.validity.badInput)return!1;if(!_.syncPendingRef(x,J,C))return _.isUploadInput(x)&&(this.trackBefore("updated",x,J),S.push(x)),!1;if(_.isPhxChild(J)){let le=x.getAttribute(pt);return _.mergeAttrs(x,J,{exclude:[qt]}),le!==""&&x.setAttribute(pt,le),x.setAttribute(gi,this.rootID),!1}return _.copyPrivates(J,x),_.discardError(r,J,A),_.syncPropsToAttrs(J),o&&x.isSameNode(o)&&_.isFormInput(x)&&!this.forceFocusedSelectUpdate(x,J)?(this.trackBefore("updated",x,J),_.mergeFocusedInput(x,J),_.syncAttrsToProps(x),S.push(x),!1):(_.isPhxUpdate(J,b,["append","prepend"])&&E.push(new qo(x,J,J.getAttribute(b))),_.syncAttrsToProps(J),this.trackBefore("updated",x,J),!0)}})}),t.isDebugEnabled()&&$o(),E.length>0&&t.time("post-morph append/prepend restoration",()=>{E.forEach(x=>x.perform())}),t.silenceEvents(()=>_.restoreFocus(o,a,m)),_.dispatchEvent(document,"phx:update"),w.forEach(x=>this.trackAfter("added",x)),S.forEach(x=>this.trackAfter("updated",x)),W&&(t.disconnect(),W.submit()),!0}forceFocusedSelectUpdate(e,t){let i=["select","select-one","select-multiple"].find(n=>n===e.type);return e.multiple===!0||i&&e.innerHTML!=t.innerHTML}isCIDPatch(){return this.cidPatch}skipCIDSibling(e){return e.nodeType===Node.ELEMENT_NODE&&e.getAttribute(tn)!==null}targetCIDContainer(e){if(!this.isCIDPatch())return;let[t,...i]=_.findComponentNodeList(this.container,this.targetCID);return i.length===0&&_.childNodeLength(e)===1?t:t&&t.parentNode}buildDiffHTML(e,t,i,n){let r=this.isCIDPatch(),o=r&&n.getAttribute($e)===this.targetCID.toString();if(!r||o)return t;{let a=null,m=document.createElement("template");a=_.cloneNode(n);let[b,...A]=_.findComponentNodeList(a,this.targetCID);return m.innerHTML=t,A.forEach(C=>C.remove()),Array.from(a.childNodes).forEach(C=>{C.id&&C.nodeType===Node.ELEMENT_NODE&&C.getAttribute($e)!==this.targetCID.toString()&&(C.setAttribute(tn,""),C.innerHTML="")}),Array.from(m.content.childNodes).forEach(C=>a.insertBefore(C,b)),b.remove(),a.outerHTML}}},Ur=class{static extract(e){let{[Dr]:t,[Lr]:i,[Rr]:n}=e;return delete e[Dr],delete e[Lr],delete e[Rr],{diff:e,title:n,reply:t||null,events:i||[]}}constructor(e,t){this.viewId=e,this.rendered={},this.mergeDiff(t)}parentViewId(){return this.viewId}toString(e){return this.recursiveToString(this.rendered,this.rendered[je],e)}recursiveToString(e,t=e[je],i){i=i?new Set(i):null;let n={buffer:"",components:t,onlyCids:i};return this.toOutputBuffer(e,n),n.buffer}componentCIDs(e){return Object.keys(e[je]||{}).map(t=>parseInt(t))}isComponentOnlyDiff(e){return e[je]?Object.keys(e).length===1:!1}getComponent(e,t){return e[je][t]}mergeDiff(e){let t=e[je],i={};if(delete e[je],this.rendered=this.mutableMerge(this.rendered,e),this.rendered[je]=this.rendered[je]||{},t){let r=this.rendered[je];for(let o in t)t[o]=this.cachedFindComponent(o,t[o],r,t,i);for(var n in t)r[n]=t[n];e[je]=t}}cachedFindComponent(e,t,i,n,r){if(r[e])return r[e];{let o,a,m=t[et];if(typeof m=="number"){let b;m>0?b=this.cachedFindComponent(m,n[m],i,n,r):b=i[-m],a=b[et],o=this.cloneMerge(b,t),o[et]=a}else o=t[et]!==void 0?t:this.cloneMerge(i[e]||{},t);return r[e]=o,o}}mutableMerge(e,t){return t[et]!==void 0?t:(this.doMutableMerge(e,t),e)}doMutableMerge(e,t){for(let i in t){let n=t[i],r=e[i];Zt(n)&&n[et]===void 0&&Zt(r)?this.doMutableMerge(r,n):e[i]=n}}cloneMerge(e,t){let i=Be(Be({},e),t);for(let n in i){let r=t[n],o=e[n];Zt(r)&&r[et]===void 0&&Zt(o)&&(i[n]=this.cloneMerge(o,r))}return i}componentToString(e){return this.recursiveCIDToString(this.rendered[je],e)}pruneCIDs(e){e.forEach(t=>delete this.rendered[je][t])}get(){return this.rendered}isNewFingerprint(e={}){return!!e[et]}toOutputBuffer(e,t){if(e[Pr])return this.comprehensionToBuffer(e,t);let{[et]:i}=e;t.buffer+=i[0];for(let n=1;n<i.length;n++)this.dynamicToBuffer(e[n-1],t),t.buffer+=i[n]}comprehensionToBuffer(e,t){let{[Pr]:i,[et]:n}=e;for(let r=0;r<i.length;r++){let o=i[r];t.buffer+=n[0];for(let a=1;a<n.length;a++)this.dynamicToBuffer(o[a-1],t),t.buffer+=n[a]}}dynamicToBuffer(e,t){typeof e=="number"?t.buffer+=this.recursiveCIDToString(t.components,e,t.onlyCids):Zt(e)?this.toOutputBuffer(e,t):t.buffer+=e}recursiveCIDToString(e,t,i){let n=e[t]||Ae(`no component for CID ${t}`,e),r=document.createElement("template");r.innerHTML=this.recursiveToString(n,e,i);let o=r.content,a=i&&!i.has(t),[m,b]=Array.from(o.childNodes).reduce(([A,C],T,w)=>T.nodeType===Node.ELEMENT_NODE?T.getAttribute($e)?[A,!0]:(T.setAttribute($e,t),T.id||(T.id=`${this.parentViewId()}-${t}-${w}`),a&&(T.setAttribute(tn,""),T.innerHTML=""),[!0,C]):T.nodeValue.trim()!==""?(Ae(`only HTML element tags are allowed at the root of components.

got: "${T.nodeValue.trim()}"

within:
`,r.innerHTML.trim()),T.replaceWith(this.createSpan(T.nodeValue,t)),[!0,C]):(T.remove(),[A,C]),[!1,!1]);return!m&&!b?(Ae(`expected at least one HTML element tag inside a component, but the component is empty:
`,r.innerHTML.trim()),this.createSpan("",t).outerHTML):(!m&&b&&Ae("expected at least one HTML element tag directly inside a component, but only subcomponents were found. A component must render at least one HTML tag directly inside itself.",r.innerHTML.trim()),r.innerHTML)}createSpan(e,t){let i=document.createElement("span");return i.innerText=e,i.setAttribute($e,t),i}},ha=1,ti=class{static makeID(){return ha++}static elementID(e){return e.phxHookId}constructor(e,t,i){this.__view=e,this.__liveSocket=e.liveSocket,this.__callbacks=i,this.__listeners=new Set,this.__isDisconnected=!1,this.el=t,this.el.phxHookId=this.constructor.makeID();for(let n in this.__callbacks)this[n]=this.__callbacks[n]}__mounted(){this.mounted&&this.mounted()}__updated(){this.updated&&this.updated()}__beforeUpdate(){this.beforeUpdate&&this.beforeUpdate()}__destroyed(){this.destroyed&&this.destroyed()}__reconnected(){this.__isDisconnected&&(this.__isDisconnected=!1,this.reconnected&&this.reconnected())}__disconnected(){this.__isDisconnected=!0,this.disconnected&&this.disconnected()}pushEvent(e,t={},i=function(){}){return this.__view.pushHookEvent(null,e,t,i)}pushEventTo(e,t,i={},n=function(){}){return this.__view.withinTargets(e,(r,o)=>r.pushHookEvent(o,t,i,n))}handleEvent(e,t){let i=(n,r)=>r?e:t(n.detail);return window.addEventListener(`phx:hook:${e}`,i),this.__listeners.add(i),i}removeHandleEvent(e){let t=e(null,!0);window.removeEventListener(`phx:hook:${t}`,e),this.__listeners.delete(e)}upload(e,t){return this.__view.dispatchUploads(e,t)}uploadTo(e,t,i){return this.__view.withinTargets(e,n=>n.dispatchUploads(t,i))}__cleanup__(){this.__listeners.forEach(e=>this.removeHandleEvent(e))}},dn=(e,t={})=>{let i=new FormData(e),n=[];i.forEach((o,a,m)=>{o instanceof File&&n.push(a)}),n.forEach(o=>i.delete(o));let r=new URLSearchParams;for(let[o,a]of i.entries())r.append(o,a);for(let o in t)r.append(o,t[o]);return r.toString()},Br=class{constructor(e,t,i,n){this.liveSocket=t,this.flash=n,this.parent=i,this.root=i?i.root:this,this.el=e,this.id=this.el.id,this.ref=0,this.childJoins=0,this.loaderTimer=null,this.pendingDiffs=[],this.pruningCIDs=[],this.redirect=!1,this.href=null,this.joinCount=this.parent?this.parent.joinCount-1:0,this.joinPending=!0,this.destroyed=!1,this.joinCallback=function(){},this.stopCallback=function(){},this.pendingJoinOps=this.parent?null:[],this.viewHooks={},this.uploaders={},this.formSubmits=[],this.children=this.parent?null:{},this.root.children[this.id]={},this.channel=this.liveSocket.channel(`lv:${this.id}`,()=>({redirect:this.redirect?this.href:void 0,url:this.redirect?void 0:this.href||void 0,params:this.connectParams(),session:this.getSession(),static:this.getStatic(),flash:this.flash})),this.showLoader(this.liveSocket.loaderTimeout),this.bindChannel()}setHref(e){this.href=e}setRedirect(e){this.redirect=!0,this.href=e}isMain(){return this.liveSocket.main===this}connectParams(){let e=this.liveSocket.params(this.el),t=_.all(document,`[${this.binding(_o)}]`).map(i=>i.src||i.href).filter(i=>typeof i=="string");return t.length>0&&(e._track_static=t),e._mounts=this.joinCount,e}isConnected(){return this.channel.canPush()}getSession(){return this.el.getAttribute(pt)}getStatic(){let e=this.el.getAttribute(qt);return e===""?null:e}destroy(e=function(){}){this.destroyAllChildren(),this.destroyed=!0,delete this.root.children[this.id],this.parent&&delete this.root.children[this.parent.id][this.id],clearTimeout(this.loaderTimer);let t=()=>{e();for(let i in this.viewHooks)this.destroyHook(this.viewHooks[i])};_.markPhxChildDestroyed(this.el),this.log("destroyed",()=>["the child has been removed from the parent"]),this.channel.leave().receive("ok",t).receive("error",t).receive("timeout",t)}setContainerClasses(...e){this.el.classList.remove(yr,mi,wr),this.el.classList.add(...e)}isLoading(){return this.el.classList.contains(mi)}showLoader(e){if(clearTimeout(this.loaderTimer),e)this.loaderTimer=setTimeout(()=>this.showLoader(),e);else{for(let t in this.viewHooks)this.viewHooks[t].__disconnected();this.setContainerClasses(mi)}}hideLoader(){clearTimeout(this.loaderTimer),this.setContainerClasses(yr)}triggerReconnected(){for(let e in this.viewHooks)this.viewHooks[e].__reconnected()}log(e,t){this.liveSocket.log(this,e,t)}withinTargets(e,t){if(e instanceof HTMLElement)return this.liveSocket.owner(e,i=>t(i,e));if(/^(0|[1-9]\d*)$/.test(e)){let i=_.findComponentNodeList(this.el,e);i.length===0?Ae(`no component found matching phx-target of ${e}`):t(this,i[0])}else{let i=Array.from(document.querySelectorAll(e));i.length===0&&Ae(`nothing found matching the phx-target selector "${e}"`),i.forEach(n=>this.liveSocket.owner(n,r=>t(r,n)))}}applyDiff(e,t,i){this.log(e,()=>["",Kt(t)]);let{diff:n,reply:r,events:o,title:a}=Ur.extract(t);return a&&_.putTitle(a),i({diff:n,reply:r,events:o}),r}onJoin(e){let{rendered:t,container:i}=e;if(i){let[n,r]=i;this.el=_.replaceRootContainer(this.el,n,r)}this.childJoins=0,this.joinPending=!0,this.flash=null,mt.dropLocal(this.liveSocket.localStorage,window.location.pathname,dr),this.applyDiff("mount",t,({diff:n,events:r})=>{this.rendered=new Ur(this.id,n);let o=this.renderContainer(null,"join");this.dropPendingRefs();let a=this.formsForRecovery(o);this.joinCount++,a.length>0?a.forEach((m,b)=>{this.pushFormRecovery(m,A=>{b===a.length-1&&this.onJoinComplete(A,o,r)})}):this.onJoinComplete(e,o,r)})}dropPendingRefs(){_.all(this.el,`[${Qe}]`,e=>e.removeAttribute(Qe))}onJoinComplete({live_patch:e},t,i){if(this.joinCount>1||this.parent&&!this.parent.isJoinPending())return this.applyJoinPatch(e,t,i);_.findPhxChildrenInFragment(t,this.id).filter(r=>{let o=r.id&&this.el.querySelector(`[id="${r.id}"]`),a=o&&o.getAttribute(qt);return a&&r.setAttribute(qt,a),this.joinChild(r)}).length===0?this.parent?(this.root.pendingJoinOps.push([this,()=>this.applyJoinPatch(e,t,i)]),this.parent.ackJoin(this)):(this.onAllChildJoinsComplete(),this.applyJoinPatch(e,t,i)):this.root.pendingJoinOps.push([this,()=>this.applyJoinPatch(e,t,i)])}attachTrueDocEl(){this.el=_.byId(this.id),this.el.setAttribute(gi,this.root.id)}dispatchEvents(e){e.forEach(([t,i])=>{window.dispatchEvent(new CustomEvent(`phx:hook:${t}`,{detail:i}))})}applyJoinPatch(e,t,i){this.attachTrueDocEl();let n=new Ci(this,this.el,this.id,t,null);if(n.markPrunableContentForRemoval(),this.performPatch(n,!1),this.joinNewChildren(),_.all(this.el,`[${this.binding(yi)}], [data-phx-${yi}]`,r=>{let o=this.addHook(r);o&&o.__mounted()}),this.joinPending=!1,this.dispatchEvents(i),this.applyPendingUpdates(),e){let{kind:r,to:o}=e;this.liveSocket.historyPatch(o,r)}this.hideLoader(),this.joinCount>1&&this.triggerReconnected(),this.stopCallback()}triggerBeforeUpdateHook(e,t){this.liveSocket.triggerDOM("onBeforeElUpdated",[e,t]);let i=this.getHook(e),n=i&&_.isIgnored(e,this.binding(sn));if(i&&!e.isEqualNode(t)&&!(n&&Jo(e.dataset,t.dataset)))return i.__beforeUpdate(),i}performPatch(e,t){let i=[],n=!1,r=new Set;return e.after("added",o=>{this.liveSocket.triggerDOM("onNodeAdded",[o]);let a=this.addHook(o);a&&a.__mounted()}),e.after("phxChildAdded",o=>n=!0),e.before("updated",(o,a)=>{this.triggerBeforeUpdateHook(o,a)&&r.add(o.id)}),e.after("updated",o=>{r.has(o.id)&&this.getHook(o).__updated()}),e.after("discarded",o=>{let a=this.componentID(o);typeof a=="number"&&i.indexOf(a)===-1&&i.push(a);let m=this.getHook(o);m&&this.destroyHook(m)}),e.perform(),t&&this.maybePushComponentsDestroyed(i),n}joinNewChildren(){_.findPhxChildren(this.el,this.id).forEach(e=>this.joinChild(e))}getChildById(e){return this.root.children[this.id][e]}getDescendentByEl(e){return e.id===this.id?this:this.children[e.getAttribute(zt)][e.id]}destroyDescendent(e){for(let t in this.root.children)for(let i in this.root.children[t])if(i===e)return this.root.children[t][i].destroy()}joinChild(e){if(!this.getChildById(e.id)){let i=new Br(e,this.liveSocket,this);return this.root.children[this.id][i.id]=i,i.join(),this.childJoins++,!0}}isJoinPending(){return this.joinPending}ackJoin(e){this.childJoins--,this.childJoins===0&&(this.parent?this.parent.ackJoin(this):this.onAllChildJoinsComplete())}onAllChildJoinsComplete(){this.joinCallback(),this.pendingJoinOps.forEach(([e,t])=>{e.isDestroyed()||t()}),this.pendingJoinOps=[]}update(e,t){if(this.isJoinPending()||this.liveSocket.hasPendingLink())return this.pendingDiffs.push({diff:e,events:t});this.rendered.mergeDiff(e);let i=!1;this.rendered.isComponentOnlyDiff(e)?this.liveSocket.time("component patch complete",()=>{_.findParentCIDs(this.el,this.rendered.componentCIDs(e)).forEach(r=>{this.componentPatch(this.rendered.getComponent(e,r),r)&&(i=!0)})}):Ir(e)||this.liveSocket.time("full patch complete",()=>{let n=this.renderContainer(e,"update"),r=new Ci(this,this.el,this.id,n,null);i=this.performPatch(r,!0)}),this.dispatchEvents(t),i&&this.joinNewChildren()}renderContainer(e,t){return this.liveSocket.time(`toString diff (${t})`,()=>{let i=this.el.tagName,n=e?this.rendered.componentCIDs(e).concat(this.pruningCIDs):null,r=this.rendered.toString(n);return`<${i}>${r}</${i}>`})}componentPatch(e,t){if(Ir(e))return!1;let i=this.rendered.componentToString(t),n=new Ci(this,this.el,this.id,i,t);return this.performPatch(n,!0)}getHook(e){return this.viewHooks[ti.elementID(e)]}addHook(e){if(ti.elementID(e)||!e.getAttribute)return;let t=e.getAttribute(`data-phx-${yi}`)||e.getAttribute(this.binding(yi));if(t&&!this.ownsElement(e))return;let i=this.liveSocket.getHookCallbacks(t);if(i){e.id||Ae(`no DOM ID for hook "${t}". Hooks require a unique ID on each element.`,e);let n=new ti(this,e,i);return this.viewHooks[ti.elementID(n.el)]=n,n}else t!==null&&Ae(`unknown hook found for "${t}"`,e)}destroyHook(e){e.__destroyed(),e.__cleanup__(),delete this.viewHooks[ti.elementID(e.el)]}applyPendingUpdates(){this.pendingDiffs.forEach(({diff:e,events:t})=>this.update(e,t)),this.pendingDiffs=[]}onChannel(e,t){this.liveSocket.onChannel(this.channel,e,i=>{this.isJoinPending()?this.root.pendingJoinOps.push([this,()=>t(i)]):t(i)})}bindChannel(){this.liveSocket.onChannel(this.channel,"diff",e=>{this.applyDiff("update",e,({diff:t,events:i})=>this.update(t,i))}),this.onChannel("redirect",({to:e,flash:t})=>this.onRedirect({to:e,flash:t})),this.onChannel("live_patch",e=>this.onLivePatch(e)),this.onChannel("live_redirect",e=>this.onLiveRedirect(e)),this.channel.onError(e=>this.onError(e)),this.channel.onClose(e=>this.onClose(e))}destroyAllChildren(){for(let e in this.root.children[this.id])this.getChildById(e).destroy()}onLiveRedirect(e){let{to:t,kind:i,flash:n}=e,r=this.expandURL(t);this.liveSocket.historyRedirect(r,i,n)}onLivePatch(e){let{to:t,kind:i}=e;this.href=this.expandURL(t),this.liveSocket.historyPatch(t,i)}expandURL(e){return e.startsWith("/")?`${window.location.protocol}//${window.location.host}${e}`:e}onRedirect({to:e,flash:t}){this.liveSocket.redirect(e,t)}isDestroyed(){return this.destroyed}join(e){this.parent||(this.stopCallback=this.liveSocket.withPageLoading({to:this.href,kind:"initial"})),this.joinCallback=()=>e&&e(this.joinCount),this.liveSocket.wrapPush(this,{timeout:!1},()=>this.channel.join().receive("ok",t=>!this.isDestroyed()&&this.onJoin(t)).receive("error",t=>!this.isDestroyed()&&this.onJoinError(t)).receive("timeout",()=>!this.isDestroyed()&&this.onJoinError({reason:"timeout"})))}onJoinError(e){return e.reason==="unauthorized"||e.reason==="stale"?(this.log("error",()=>["unauthorized live_redirect. Falling back to page request",e]),this.onRedirect({to:this.href})):((e.redirect||e.live_redirect)&&(this.joinPending=!1,this.channel.leave()),e.redirect?this.onRedirect(e.redirect):e.live_redirect?this.onLiveRedirect(e.live_redirect):(this.log("error",()=>["unable to join",e]),this.liveSocket.reloadWithJitter(this)))}onClose(e){if(!this.isDestroyed()){if(this.isJoinPending()&&document.visibilityState!=="hidden"||this.liveSocket.hasPendingLink()&&e!=="leave")return this.liveSocket.reloadWithJitter(this);this.destroyAllChildren(),this.liveSocket.dropActiveElement(this),document.activeElement&&document.activeElement.blur(),this.liveSocket.isUnloaded()&&this.showLoader(No)}}onError(e){this.onClose(e),this.log("error",()=>["view crashed",e]),this.liveSocket.isUnloaded()||this.displayError()}displayError(){this.isMain()&&_.dispatchEvent(window,"phx:page-loading-start",{to:this.href,kind:"error"}),this.showLoader(),this.setContainerClasses(mi,wr)}pushWithReply(e,t,i,n=function(){}){if(!this.isConnected())return;let[r,[o]]=e?e():[null,[]],a=function(){};return o&&o.getAttribute(this.binding(br))!==null&&(a=this.liveSocket.withPageLoading({kind:"element",target:o})),typeof i.cid!="number"&&delete i.cid,this.liveSocket.wrapPush(this,{timeout:!0},()=>this.channel.push(t,i,Fo).receive("ok",m=>{let b=null;r!==null&&this.undoRefs(r),m.diff&&(b=this.applyDiff("update",m.diff,({diff:A,events:C})=>{this.update(A,C)})),m.redirect&&this.onRedirect(m.redirect),m.live_patch&&this.onLivePatch(m.live_patch),m.live_redirect&&this.onLiveRedirect(m.live_redirect),a(),n(m,b)}))}undoRefs(e){_.all(this.el,`[${Qe}="${e}"]`,t=>{let i=t.getAttribute(vi);t.removeAttribute(Qe),t.getAttribute(nn)!==null&&(t.readOnly=!1,t.removeAttribute(nn)),i!==null&&(t.disabled=i==="true",t.removeAttribute(vi)),pr.forEach(o=>_.removeClass(t,o));let n=t.getAttribute(bi);n!==null&&(t.innerText=n,t.removeAttribute(bi));let r=_.private(t,Qe);if(r){let o=this.triggerBeforeUpdateHook(t,r);Ci.patchEl(t,r,this.liveSocket.getActiveElement()),o&&o.__updated(),_.deletePrivate(t,Qe)}})}putRef(e,t){let i=this.ref++,n=this.binding(rn);return e.forEach(r=>{r.classList.add(`phx-${t}-loading`),r.setAttribute(Qe,i);let o=r.getAttribute(n);o!==null&&(r.getAttribute(bi)||r.setAttribute(bi,r.innerText),r.innerText=o)}),[i,e]}componentID(e){let t=e.getAttribute&&e.getAttribute($e);return t?parseInt(t):null}targetComponentID(e,t){return e.getAttribute(this.binding("target"))?this.closestComponentID(t):null}closestComponentID(e){return e?nt(e.closest(`[${$e}]`),t=>this.ownsElement(t)&&this.componentID(t)):null}pushHookEvent(e,t,i,n){if(!this.isConnected())return this.log("hook",()=>["unable to push hook event. LiveView not connected",t,i]),!1;let[r,o]=this.putRef([],"hook");return this.pushWithReply(()=>[r,o],"event",{type:"hook",event:t,value:i,cid:this.closestComponentID(e)},(a,m)=>n(m,r)),r}extractMeta(e,t){let i=this.binding("value-");for(let n=0;n<e.attributes.length;n++){let r=e.attributes[n].name;r.startsWith(i)&&(t[r.replace(i,"")]=e.getAttribute(r))}return e.value!==void 0&&(t.value=e.value,e.tagName==="INPUT"&&Tr.indexOf(e.type)>=0&&!e.checked&&delete t.value),t}pushEvent(e,t,i,n,r){this.pushWithReply(()=>this.putRef([t],e),"event",{type:e,event:n,value:this.extractMeta(t,r),cid:this.targetComponentID(t,i)})}pushKey(e,t,i,n,r){this.pushWithReply(()=>this.putRef([e],i),"event",{type:i,event:n,value:this.extractMeta(e,r),cid:this.targetComponentID(e,t)})}pushFileProgress(e,t,i,n=function(){}){this.liveSocket.withinOwners(e.form,(r,o)=>{r.pushWithReply(null,"progress",{event:e.getAttribute(r.binding(Oo)),ref:e.getAttribute(Ct),entry_ref:t,progress:i,cid:r.targetComponentID(e.form,o)},n)})}pushInput(e,t,i,n,r){let o,a=this.targetComponentID(e.form,t),m=()=>this.putRef([e,e.form],"change"),b=dn(e.form,{_target:n.name});e.files&&e.files.length>0&&Te.trackFiles(e,Array.from(e.files)),o=Te.serializeUploads(e);let A={type:"form",event:i,value:b,uploads:o,cid:a};this.pushWithReply(m,"event",A,C=>{if(_.showError(e,this.liveSocket.binding(Cr)),_.isUploadInput(e)&&e.getAttribute("data-phx-auto-upload")!==null){if(Te.filesAwaitingPreflight(e).length>0){let[T,w]=m();this.uploadFiles(e.form,t,T,a,S=>{r&&r(C),this.triggerAwaitingSubmit(e.form)})}}else r&&r(C)})}triggerAwaitingSubmit(e){let t=this.getScheduledSubmit(e);if(t){let[i,n,r]=t;this.cancelSubmit(e),r()}}getScheduledSubmit(e){return this.formSubmits.find(([t,i])=>t.isSameNode(e))}scheduleSubmit(e,t,i){if(this.getScheduledSubmit(e))return!0;this.formSubmits.push([e,t,i])}cancelSubmit(e){this.formSubmits=this.formSubmits.filter(([t,i,n])=>t.isSameNode(e)?(this.undoRefs(i),!1):!0)}pushFormSubmit(e,t,i,n){let r=C=>!(Qt(C,`${this.binding(sn)}=ignore`,C.form)||Qt(C,"data-phx-update=ignore",C.form)),o=C=>C.hasAttribute(this.binding(rn)),a=C=>C.tagName=="BUTTON",m=C=>["INPUT","TEXTAREA","SELECT"].includes(C.tagName),b=()=>{let C=Array.from(e.elements),T=C.filter(o),w=C.filter(a).filter(r),S=C.filter(m).filter(r);return w.forEach(E=>{E.setAttribute(vi,E.disabled),E.disabled=!0}),S.forEach(E=>{E.setAttribute(nn,E.readOnly),E.readOnly=!0,E.files&&(E.setAttribute(vi,E.disabled),E.disabled=!0)}),e.setAttribute(this.binding(br),""),this.putRef([e].concat(T).concat(w).concat(S),"submit")},A=this.targetComponentID(e,t);if(Te.hasUploadsInProgress(e)){let[C,T]=b();return this.scheduleSubmit(e,C,()=>this.pushFormSubmit(e,t,i,n))}else if(Te.inputsAwaitingPreflight(e).length>0){let[C,T]=b(),w=()=>[C,T];this.uploadFiles(e,t,C,A,S=>{let E=dn(e,{});this.pushWithReply(w,"event",{type:"form",event:i,value:E,cid:A},n)})}else{let C=dn(e);this.pushWithReply(b,"event",{type:"form",event:i,value:C,cid:A},n)}}uploadFiles(e,t,i,n,r){let o=this.joinCount,a=Te.activeFileInputs(e),m=a.length;a.forEach(b=>{let A=new Te(b,this,()=>{m--,m===0&&r()});this.uploaders[b]=A;let C=A.entries().map(w=>w.toPreflightPayload()),T={ref:b.getAttribute(Ct),entries:C,cid:this.targetComponentID(b.form,t)};this.log("upload",()=>["sending preflight request",T]),this.pushWithReply(null,"allow_upload",T,w=>{if(this.log("upload",()=>["got preflight response",w]),w.error){this.undoRefs(i);let[S,E]=w.error;this.log("upload",()=>[`error for entry ${S}`,E])}else{let S=E=>{this.channel.onError(()=>{this.joinCount===o&&E()})};A.initAdapterUpload(w,S,this.liveSocket)}})})}dispatchUploads(e,t){let i=_.findUploadInputs(this.el).filter(n=>n.name===e);i.length===0?Ae(`no live file inputs found matching the name "${e}"`):i.length>1?Ae(`duplicate live file inputs found matching the name "${e}"`):_.dispatchEvent(i[0],mr,{files:t})}pushFormRecovery(e,t){this.liveSocket.withinOwners(e,(i,n)=>{let r=e.elements[0],o=e.getAttribute(this.binding(_r))||e.getAttribute(this.binding("change"));i.pushInput(r,n,o,r,t)})}pushLinkPatch(e,t,i){let n=this.liveSocket.setPendingLink(e),r=t?()=>this.putRef([t],"click"):null;this.pushWithReply(r,"live_patch",{url:e},o=>{o.link_redirect?this.liveSocket.replaceMain(e,null,i,n):(this.liveSocket.commitPendingLink(n)&&(this.href=e),this.applyPendingUpdates(),i&&i(n))}).receive("timeout",()=>this.liveSocket.redirect(window.location.href))}formsForRecovery(e){if(this.joinCount===0)return[];let t=this.binding("change"),i=document.createElement("template");return i.innerHTML=e,_.all(this.el,`form[${t}]`).filter(n=>this.ownsElement(n)).filter(n=>n.elements.length>0).filter(n=>n.getAttribute(this.binding(_r))!=="ignore").filter(n=>i.content.querySelector(`form[${t}="${n.getAttribute(t)}"]`))}maybePushComponentsDestroyed(e){let t=e.filter(i=>_.findComponentNodeList(this.el,i).length===0);t.length>0&&(this.pruningCIDs.push(...t),this.pushWithReply(null,"cids_will_destroy",{cids:t},()=>{this.pruningCIDs=this.pruningCIDs.filter(n=>t.indexOf(n)!==-1);let i=t.filter(n=>_.findComponentNodeList(this.el,n).length===0);i.length>0&&this.pushWithReply(null,"cids_destroyed",{cids:i},n=>{this.rendered.pruneCIDs(n.cids)})}))}ownsElement(e){return e.getAttribute(zt)===this.id||nt(e.closest(jt),t=>t.id)===this.id}submitForm(e,t,i){_.putPrivate(e,xr,!0),this.liveSocket.blurActiveElement(this),this.pushFormSubmit(e,t,i,()=>{this.liveSocket.restorePreviouslyActiveFocus()})}binding(e){return this.liveSocket.binding(e)}},$r=class{constructor(e,t,i={}){if(this.unloaded=!1,!t||t.constructor.name==="Object")throw new Error(`
      a phoenix Socket must be provided as the second argument to the LiveSocket constructor. For example:

          import {Socket} from "phoenix"
          import LiveSocket from "phoenix_live_view"
          let liveSocket = new LiveSocket("/live", Socket, {...})
      `);this.socket=new t(e,i),this.bindingPrefix=i.bindingPrefix||jo,this.opts=i,this.params=un(i.params||{}),this.viewLogger=i.viewLogger,this.metadataCallbacks=i.metadata||{},this.defaults=Object.assign(Kt(Uo),i.defaults||{}),this.activeElement=null,this.prevActive=null,this.silenced=!1,this.main=null,this.linkRef=1,this.roots={},this.href=window.location.href,this.pendingLink=null,this.currentLocation=Kt(window.location),this.hooks=i.hooks||{},this.uploaders=i.uploaders||{},this.loaderTimeout=i.loaderTimeout||Ho,this.localStorage=i.localStorage||window.localStorage,this.sessionStorage=i.sessionStorage||window.sessionStorage,this.boundTopLevelEvents=!1,this.domCallbacks=Object.assign({onNodeAdded:un(),onBeforeElUpdated:un()},i.dom||{}),window.addEventListener("pagehide",n=>{this.unloaded=!0}),this.socket.onOpen(()=>{this.isUnloaded()&&window.location.reload()})}isProfileEnabled(){return this.sessionStorage.getItem(an)==="true"}isDebugEnabled(){return this.sessionStorage.getItem(on)==="true"}enableDebug(){this.sessionStorage.setItem(on,"true")}enableProfiling(){this.sessionStorage.setItem(an,"true")}disableDebug(){this.sessionStorage.removeItem(on)}disableProfiling(){this.sessionStorage.removeItem(an)}enableLatencySim(e){this.enableDebug(),console.log("latency simulator enabled for the duration of this browser session. Call disableLatencySim() to disable"),this.sessionStorage.setItem(ln,e)}disableLatencySim(){this.sessionStorage.removeItem(ln)}getLatencySim(){let e=this.sessionStorage.getItem(ln);return e?parseInt(e):null}getSocket(){return this.socket}connect(){let e=()=>{this.joinRootViews()&&(this.bindTopLevelEvents(),this.socket.connect())};["complete","loaded","interactive"].indexOf(document.readyState)>=0?e():document.addEventListener("DOMContentLoaded",()=>e())}disconnect(e){this.socket.disconnect(e)}triggerDOM(e,t){this.domCallbacks[e](...t)}time(e,t){if(!this.isProfileEnabled()||!console.time)return t();console.time(e);let i=t();return console.timeEnd(e),i}log(e,t,i){if(this.viewLogger){let[n,r]=i();this.viewLogger(e,t,n,r)}else if(this.isDebugEnabled()){let[n,r]=i();Vo(e,t,n,r)}}onChannel(e,t,i){e.on(t,n=>{let r=this.getLatencySim();r?(console.log(`simulating ${r}ms of latency from server to client`),setTimeout(()=>i(n),r)):i(n)})}wrapPush(e,t,i){let n=this.getLatencySim(),r=e.joinCount;if(!n)return t.timeout?i().receive("timeout",()=>{e.joinCount===r&&!e.isDestroyed()&&this.reloadWithJitter(e,()=>{this.log(e,"timeout",()=>["received timeout while communicating with server. Falling back to hard refresh for recovery"])})}):i();console.log(`simulating ${n}ms of latency from client to server`);let o={receives:[],receive(a,m){this.receives.push([a,m])}};return setTimeout(()=>{e.isDestroyed()||o.receives.reduce((a,[m,b])=>a.receive(m,b),i())},n),o}reloadWithJitter(e,t){e.destroy(),this.disconnect();let[i,n]=To,r=Math.floor(Math.random()*(n-i+1))+i,o=mt.updateLocal(this.localStorage,window.location.pathname,dr,0,a=>a+1);t?t():this.log(e,"join",()=>[`encountered ${o} consecutive reloads`]),o>fr&&(this.log(e,"join",()=>[`exceeded ${fr} consecutive reloads. Entering failsafe mode`]),r=xo),setTimeout(()=>{this.hasPendingLink()?window.location=this.pendingLink:window.location.reload()},r)}getHookCallbacks(e){return e&&e.startsWith("Phoenix.")?zo[e.split(".")[1]]:this.hooks[e]}isUnloaded(){return this.unloaded}isConnected(){return this.socket.isConnected()}getBindingPrefix(){return this.bindingPrefix}binding(e){return`${this.getBindingPrefix()}${e}`}channel(e,t){return this.socket.channel(e,t)}joinRootViews(){let e=!1;return _.all(document,`${jt}:not([${zt}])`,t=>{if(!this.getRootById(t.id)){let i=this.newRootView(t);i.setHref(this.getHref()),i.join(),t.getAttribute(Sr)&&(this.main=i)}e=!0}),e}redirect(e,t){this.disconnect(),mt.redirect(e,t)}replaceMain(e,t,i=null,n=this.setPendingLink(e)){let r=this.main.el,o=_.cloneNode(r,"");this.main.showLoader(this.loaderTimeout),this.main.destroy(),this.main=this.newRootView(o,t),this.main.setRedirect(e),this.main.join(a=>{a===1&&this.commitPendingLink(n)&&(r.replaceWith(o),i&&i())})}isPhxView(e){return e.getAttribute&&e.getAttribute(pt)!==null}newRootView(e,t){let i=new Br(e,this,null,t);return this.roots[i.id]=i,i}owner(e,t){let i=nt(e.closest(jt),n=>this.getViewByEl(n));i&&t(i)}withinOwners(e,t){this.owner(e,i=>{let n=e.getAttribute(this.binding("target"));n===null?t(i,e):i.withinTargets(n,t)})}getViewByEl(e){let t=e.getAttribute(gi);return nt(this.getRootById(t),i=>i.getDescendentByEl(e))}getRootById(e){return this.roots[e]}destroyAllViews(){for(let e in this.roots)this.roots[e].destroy(),delete this.roots[e]}destroyViewByEl(e){let t=this.getRootById(e.getAttribute(gi));t&&t.destroyDescendent(e.id)}setActiveElement(e){if(this.activeElement===e)return;this.activeElement=e;let t=()=>{e===this.activeElement&&(this.activeElement=null),e.removeEventListener("mouseup",this),e.removeEventListener("touchend",this)};e.addEventListener("mouseup",t),e.addEventListener("touchend",t)}getActiveElement(){return document.activeElement===document.body?this.activeElement||document.activeElement:document.activeElement||document.body}dropActiveElement(e){this.prevActive&&e.ownsElement(this.prevActive)&&(this.prevActive=null)}restorePreviouslyActiveFocus(){this.prevActive&&this.prevActive!==document.body&&this.prevActive.focus()}blurActiveElement(){this.prevActive=this.getActiveElement(),this.prevActive!==document.body&&this.prevActive.blur()}bindTopLevelEvents(){this.boundTopLevelEvents||(this.boundTopLevelEvents=!0,document.body.addEventListener("click",function(){}),window.addEventListener("pageshow",e=>{e.persisted&&(this.getSocket().disconnect(),this.withPageLoading({to:window.location.href,kind:"redirect"}),window.location.reload())},!0),this.bindNav(),this.bindClicks(),this.bindForms(),this.bind({keyup:"keyup",keydown:"keydown"},(e,t,i,n,r,o,a)=>{let m=n.getAttribute(this.binding(Mo)),b=e.key&&e.key.toLowerCase();m&&m.toLowerCase()!==b||i.pushKey(n,r,t,o,Be({key:e.key},this.eventMeta(t,e,n)))}),this.bind({blur:"focusout",focus:"focusin"},(e,t,i,n,r,o,a)=>{a||i.pushEvent(t,n,r,o,this.eventMeta(t,e,n))}),this.bind({blur:"blur",focus:"focus"},(e,t,i,n,r,o,a)=>{a&&!a!=="window"&&i.pushEvent(t,n,r,o,this.eventMeta(t,e,n))}),window.addEventListener("dragover",e=>e.preventDefault()),window.addEventListener("drop",e=>{e.preventDefault();let t=nt(Qt(e.target,this.binding(gr)),r=>r.getAttribute(this.binding(gr))),i=t&&document.getElementById(t),n=Array.from(e.dataTransfer.files||[]);!i||i.disabled||n.length===0||!(i.files instanceof FileList)||(Te.trackFiles(i,n),i.dispatchEvent(new Event("input",{bubbles:!0})))}),this.on(mr,e=>{let t=e.target;if(!_.isUploadInput(t))return;let i=Array.from(e.detail.files||[]).filter(n=>n instanceof File||n instanceof Blob);Te.trackFiles(t,i),t.dispatchEvent(new Event("input",{bubbles:!0}))}))}eventMeta(e,t,i){let n=this.metadataCallbacks[e];return n?n(t,i):{}}setPendingLink(e){return this.linkRef++,this.pendingLink=e,this.linkRef}commitPendingLink(e){return this.linkRef!==e?!1:(this.href=this.pendingLink,this.pendingLink=null,!0)}getHref(){return this.href}hasPendingLink(){return!!this.pendingLink}bind(e,t){for(let i in e){let n=e[i];this.on(n,r=>{let o=this.binding(i),a=this.binding(`window-${i}`),m=r.target.getAttribute&&r.target.getAttribute(o);m?this.debounce(r.target,r,()=>{this.withinOwners(r.target,(b,A)=>{t(r,i,b,r.target,A,m,null)})}):_.all(document,`[${a}]`,b=>{let A=b.getAttribute(a);this.debounce(b,r,()=>{this.withinOwners(b,(C,T)=>{t(r,i,C,b,T,A,"window")})})})})}}bindClicks(){this.bindClick("click","click",!1),this.bindClick("mousedown","capture-click",!0)}bindClick(e,t,i){let n=this.binding(t);window.addEventListener(e,r=>{if(!this.isConnected())return;let o=null;i?o=r.target.matches(`[${n}]`)?r.target:r.target.querySelector(`[${n}]`):o=Qt(r.target,n);let a=o&&o.getAttribute(n);!a||(o.getAttribute("href")==="#"&&r.preventDefault(),this.debounce(o,r,()=>{this.withinOwners(o,(m,b)=>{m.pushEvent("click",o,b,a,this.eventMeta("click",r,o))})}))},i)}bindNav(){if(!mt.canPushState())return;history.scrollRestoration&&(history.scrollRestoration="manual");let e=null;window.addEventListener("scroll",t=>{clearTimeout(e),e=setTimeout(()=>{mt.updateCurrentState(i=>Object.assign(i,{scroll:window.scrollY}))},100)}),window.addEventListener("popstate",t=>{if(!this.registerNewLocation(window.location))return;let{type:i,id:n,root:r,scroll:o}=t.state||{},a=window.location.href;this.main.isConnected()&&i==="patch"&&n===this.main.id?this.main.pushLinkPatch(a,null):this.replaceMain(a,null,()=>{r&&this.replaceRootHistory(),typeof o=="number"&&setTimeout(()=>{window.scrollTo(0,o)},0)})},!1),window.addEventListener("click",t=>{let i=Qt(t.target,Ki),n=i&&i.getAttribute(Ki),r=t.metaKey||t.ctrlKey||t.button===1;if(!n||!this.isConnected()||!this.main||r)return;let o=i.href,a=i.getAttribute(Eo);if(t.preventDefault(),this.pendingLink!==o)if(n==="patch")this.pushHistoryPatch(o,a,i);else if(n==="redirect")this.historyRedirect(o,a);else throw new Error(`expected ${Ki} to be "patch" or "redirect", got: ${n}`)},!1)}withPageLoading(e,t){_.dispatchEvent(window,"phx:page-loading-start",e);let i=()=>_.dispatchEvent(window,"phx:page-loading-stop",e);return t?t(i):i}pushHistoryPatch(e,t,i){this.withPageLoading({to:e,kind:"patch"},n=>{this.main.pushLinkPatch(e,i,r=>{this.historyPatch(e,t,r),n()})})}historyPatch(e,t,i=this.setPendingLink(e)){!this.commitPendingLink(i)||(mt.pushState(t,{type:"patch",id:this.main.id},e),this.registerNewLocation(window.location))}historyRedirect(e,t,i){let n=window.scrollY;this.withPageLoading({to:e,kind:"redirect"},r=>{this.replaceMain(e,i,()=>{mt.pushState(t,{type:"redirect",id:this.main.id,scroll:n},e),this.registerNewLocation(window.location),r()})})}replaceRootHistory(){mt.pushState("replace",{root:!0,type:"patch",id:this.main.id})}registerNewLocation(e){let{pathname:t,search:i}=this.currentLocation;return t+i===e.pathname+e.search?!1:(this.currentLocation=Kt(e),!0)}bindForms(){let e=0;this.on("submit",t=>{let i=t.target.getAttribute(this.binding("submit"));!i||(t.preventDefault(),t.target.disabled=!0,this.withinOwners(t.target,(n,r)=>n.submitForm(t.target,r,i)))},!1);for(let t of["change","input"])this.on(t,i=>{let n=i.target,r=n.form&&n.form.getAttribute(this.binding("change"));if(!r||n.type==="number"&&n.validity&&n.validity.badInput)return;let o=e;e++;let{at:a,type:m}=_.private(n,"prev-iteration")||{};a===o-1&&t!==m||(_.putPrivate(n,"prev-iteration",{at:o,type:t}),this.debounce(n,i,()=>{this.withinOwners(n.form,(b,A)=>{_.putPrivate(n,Ar,!0),_.isTextualInput(n)||this.setActiveElement(n),b.pushInput(n,A,r,i.target)})}))},!1)}debounce(e,t,i){let n=this.binding(Ro),r=this.binding(Io),o=this.defaults.debounce.toString(),a=this.defaults.throttle.toString();_.debounce(e,t,n,o,r,a,i)}silenceEvents(e){this.silenced=!0,e(),this.silenced=!1}on(e,t){window.addEventListener(e,i=>{this.silenced||t(i)})}};var Vr={phoenix:[242,110,64],elixir:[75,68,115],red:[255,99,132],orange:[255,159,64],yellow:[255,205,86],green:[75,192,192],blue:[54,162,253],purple:[153,102,255],grey:[201,203,207]},Jr=Object.keys(Vr),Wr={at:e=>{let[t,i,n]=Wr.rgb(e);return`rgb(${t}, ${i}, ${n})`},rgb:e=>Vr[Jr[e%Jr.length]]},Yr={at:e=>{let[t,i,n]=Wr.rgb(e);return{stroke:`rgb(${t}, ${i}, ${n})`,fill:`rgb(${t}, ${i}, ${n}, 0.1)`}}};function ca(e,t){let i=null;function n(){i=null,e()}return function(){clearTimeout(i),i=setTimeout(n,t)}}function Ft(e,t,i,n){let r;i=i||0,n=n||t.length-1;let o=n<=2147483647;for(;n-i>1;)r=o?i+n>>1:Tt((i+n)/2),t[r]<e?i=r:n=r;return e-t[i]<=t[n]-e?i:n}function da(e,t,i){let n=ne,r=-ne;for(let o=t;o<=i;o++)e[o]!=null&&(n=ot(n,e[o]),r=ii(r,e[o]));return[n,r]}function Xr(e,t,i,n){let r=t-e,o=zr(r||gt(t)||1),a=Tt(o),m=fn(10,a)*i,b=r==0?m:0,A=pn(pa(e-b,m)),C=pn(Ti(t+b,m));return n&&(r==0?t>0?(A=0,C=t*2):t<0&&(C=0,A=e*2):(C-t<m&&(C+=m),e-A<m&&(A-=m),e>=0&&A<0&&(A=0),t<=0&&C>0&&(C=0))),[A,C]}var st=Math,gt=st.abs,Tt=st.floor,K=st.round,fa=st.ceil,ot=st.min,ii=st.max,fn=st.pow,zr=st.log10,Ai=st.PI,ne=1/0;function Ut(e,t){return K(e/t)*t}function qr(e,t,i){return ot(ii(e,t),i)}function xt(e){return typeof e=="function"?e:()=>e}function Ti(e,t){return fa(e/t)*t}function pa(e,t){return Tt(e/t)*t}function ze(e){return K(e*1e3)/1e3}function pn(e){return K(e*1e6)/1e6}var Gr=Array.isArray;function ma(e){return typeof e=="string"}function Kr(e){return typeof e=="object"&&e!==null}function Bt(e){let t;if(Gr(e))t=e.map(Bt);else if(Kr(e)){t={};for(var i in e)t[i]=Bt(e[i])}else t=e;return t}function xe(e){let t=arguments;for(let i=1;i<t.length;i++){let n=t[i];for(let r in n)Kr(e[r])?xe(e[r],Bt(n[r])):e[r]=Bt(n[r])}return e}var Q="width",re="height",ce="top",Qr="bottom",de="left",Zr="right",es="firstChild",ga="createElement",$t="#000",ts="classList",mn="mousemove",gn="mousedown",xi="mouseup",is="mouseenter",ns="mouseleave",vn="dblclick",rs="resize",ss="scroll",os=requestAnimationFrame,bn=document,_i=window,fe=devicePixelRatio;function vt(e,t){t!=null&&e[ts].add(t)}function va(e,t){e[ts].remove(t)}function q(e,t,i){e.style[t]=i+"px"}function at(e,t,i,n){let r=bn[ga](e);return t!=null&&vt(r,t),i!=null&&i.insertBefore(r,n),r}function qe(e,t){return at("div",e,t)}function Vt(e,t,i){e.style.transform="translate("+t+"px,"+i+"px)"}var as={passive:!0};function Ge(e,t,i){t.addEventListener(e,i,as)}function yn(e,t,i){t.removeEventListener(e,i,as)}var ls=["January","February","March","April","May","June","July","August","September","October","November","December"],us=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function hs(e){return e.slice(0,3)}var ba=us.map(hs),ya=ls.map(hs),ka={MMMM:ls,MMM:ya,WWWW:us,WWW:ba};function ni(e){return(e<10?"0":"")+e}function wa(e){return(e<10?"00":e<100?"0":"")+e}var Jt="getFullYear",_t="getMonth",Ei="getDate",cs="getDay",Et="getHours",Pi="getMinutes",kn="getSeconds",ds="getMilliseconds",Sa={YYYY:e=>e[Jt](),YY:e=>(e[Jt]()+"").slice(2),MMMM:(e,t)=>t.MMMM[e[_t]()],MMM:(e,t)=>t.MMM[e[_t]()],MM:e=>ni(e[_t]()+1),M:e=>e[_t]()+1,DD:e=>ni(e[Ei]()),D:e=>e[Ei](),WWWW:(e,t)=>t.WWWW[e[cs]()],WWW:(e,t)=>t.WWW[e[cs]()],HH:e=>ni(e[Et]()),H:e=>e[Et](),h:e=>{let t=e[Et]();return t==0?12:t>12?t-12:t},AA:e=>e[Et]()>=12?"PM":"AM",aa:e=>e[Et]()>=12?"pm":"am",a:e=>e[Et]()>=12?"p":"a",mm:e=>ni(e[Pi]()),m:e=>e[Pi](),ss:e=>ni(e[kn]()),s:e=>e[kn](),fff:e=>wa(e[ds]())};function fs(e,t){t=t||ka;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,r;for(;r=n.exec(e);)i.push(r[0][0]=="{"?Sa[r[1]]:r[0]);return o=>{let a="";for(let m=0;m<i.length;m++)a+=typeof i[m]=="string"?i[m]:i[m](o,t);return a}}function Ca(e,t){let i;return t=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):(i=new Date(e.toLocaleString("en-US",{timeZone:t})),i.setMilliseconds(e[ds]())),i}function wn(e,t,i){let n=[];for(let r=e;r<t;r++)for(let o=0;o<i.length;o++){let a=i[o]*fn(10,r);n.push(+a.toFixed(gt(r)))}return n}var Sn=[1,2,5],Aa=wn(-12,0,Sn),ps=wn(0,12,Sn),Ta=Aa.concat(ps),xa=1,lt=60,Ve=lt*lt,ve=Ve*24,Pt=ve*30,ut=ve*365,_a=[5e-4].concat(wn(-3,0,Sn),[1,5,10,15,30,lt,lt*5,lt*10,lt*15,lt*30,Ve,Ve*2,Ve*3,Ve*4,Ve*6,Ve*8,Ve*12,ve,ve*2,ve*3,ve*4,ve*5,ve*6,ve*7,ve*8,ve*9,ve*10,ve*15,Pt,Pt*2,Pt*3,Pt*4,Pt*6,ut,ut*2,ut*5,ut*10,ut*25,ut*50,ut*100]);function ms(e,t){return e.map(i=>[i[0],t(i[1]),i[2],t(i[4]?i[1]+i[3]:i[3])])}var gs="{YYYY}",vs=`
`+gs,bs="{M}/{D}",Li=`
`+bs,ys="{aa}",Ea="{h}:{mm}",Cn=Ea+ys,ks=":{ss}",Pa=[[ut,gs,7,"",1],[ve*28,"{MMM}",7,vs,1],[ve,bs,7,vs,1],[Ve,"{h}"+ys,4,Li,1],[lt,Cn,4,Li,1],[xa,ks,2,Li+" "+Cn,1],[.001,ks+".{fff}",2,Li+" "+Cn,1]];function ws(e,t){return(i,n,r,o)=>{let a=t.find(C=>o>=C[0])||t[t.length-1],m=null,b=null,A=null;return n.map((C,T)=>{let w=e(C),S=w[Jt](),E=w[Ei](),W=w[Pi](),te=S!=m,x=E!=b,J=W!=A,ae=a[2]==7&&te||a[2]==4&&x||a[2]==2&&J?a[3]:a[1];return m=S,b=E,A=W,ae(w)})}}function An(e,t,i){return new Date(e,t,i)}function La(e){return(t,i,n,r,o)=>{let a=[],m=r>=Pt&&r<ut,b=e(i),A=b/1e3,C=An(b[Jt](),b[_t](),m?1:b[Ei]()),T=C/1e3;if(m){let w=r/Pt,S=A==T?A:An(C[Jt](),C[_t]()+w,1)/1e3,E=new Date(S*1e3),W=E[Jt](),te=E[_t]();for(let x=0;S<=n;x++){let J=An(W,te+w*x,1),ae=J-e(J/1e3);S=(+J+ae)/1e3,S<=n&&a.push(S)}}else{let w=r>=ve?ve:r,S=Tt(i)-Tt(A),E=T+S+Ti(A-T,w);a.push(E);let W=e(E),te=W[Et]()+W[Pi]()/lt+W[kn]()/Ve,x=r/Ve;for(;;){E=ze(E+r);let J=Tt(pn(te+x))%24,We=e(E).getHours()-J;if(We>1&&(We=-1),E-=We*Ve,E>n)break;te=(te+x)%24;let De=a[a.length-1];ze((E-De)/r)*o>=.7&&a.push(E)}}return a}}function Ss(e,t){return t(e)}var Da="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function Cs(e,t){return(i,n)=>t(e(n))}function Ra(e,t){let i=e.series[t],n=qe();n.style.background=i.stroke||$t;let r=_n(i.width,1),o=(r-1)/-2;return q(n,Q,r),q(n,re,r),q(n,"marginLeft",o),q(n,"marginTop",o),n}var Ia={show:!0,x:!0,y:!0,lock:!1,points:{show:Ra},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,_x:!1,_y:!1},focus:{prox:-1},locked:!1,left:-10,top:-10,idx:null},Tn={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},As=xe({},Tn,{size:10}),xn='12px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Ts="bold "+xn,Ma=1.5,xs={type:"x",show:!0,scale:"x",space:50,gap:5,size:50,labelSize:30,labelFont:Ts,side:2,grid:Tn,ticks:As,font:xn,rotate:0},Oa="Value",Ha="Time",_s={show:!0,scale:"x",min:ne,max:-ne,idxs:[]},Na=new Intl.NumberFormat(navigator.language);function ja(e,t,i,n){return t.map(Na.format)}function Fa(e,t,i,n,r,o){t=o?t:+Ti(t,n).toFixed(12);let a=[];for(let m=t;m<=i;m=+(m+n).toFixed(12))a.push(m);return a}function Ua(e,t){return t}var Es={type:"y",show:!0,scale:"y",space:40,gap:5,size:50,labelSize:30,labelFont:Ts,side:3,grid:Tn,ticks:As,font:xn,rotate:0};function _n(e,t){let i=3+(e||1)*2;return ze(i*t)}function Ba(e,t){let i=_n(e.series[t].width,fe),n=e.bbox.width/i/2,r=e.series[0].idxs;return r[1]-r[0]<=n}var Ps={scale:"y",show:!0,band:!1,spanGaps:!1,alpha:1,points:{show:Ba},values:null,min:ne,max:-ne,idxs:[],path:null,clip:null},En={time:!0,auto:!1,distr:1,min:null,max:null},Ls=xe({},En,{time:!1,auto:!0}),Ds={};function Rs(e){let t=[];return{sub(i){t.push(i)},unsub(i){t=t.filter(n=>n!=i)},pub(i,n,r,o,a,m,b){t.length>1&&t.forEach(A=>{A!=n&&A.pub(i,n,r,o,a,m,b)})}}}function Is(e,t,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((o,a)=>Ms(o,a,t,i))}function Ms(e,t,i,n){return xe({},t==0||e&&e.side%2==0?i:n,e)}function Je(e,t,i,n){let r=(e-t.min)/(t.max-t.min);return n+(1-r)*i}function ht(e,t,i,n){let r=(e-t.min)/(t.max-t.min);return n+r*i}function $a(e,t,i){return[t,i>t?i:i+86400]}function Va(e,t,i){let n=i-t;if(n==0){let r=zr(n||gt(i)||1),o=Tt(r)+1;return[t,Ti(i,fn(10,o))]}else return[t,i]}function Ja(e,t,i){return Xr(t,i,.2,!0)}function Wa(e,t,i,n){let r=i/e;for(var o=0;o<t.length;o++){let a=t[o]*r;if(a>=n)return[t[o],a]}}function Pn(e){return e.button==0}function Os(e){let t;return e=e.replace(/\d+/,i=>t=K(i*fe)),[e,t]}function ri(e,t,i){let n={},r=n.root=qe("uplot");if(e.id!=null&&(r.id=e.id),vt(r,e.class),e.title){let l=qe("title",r);l.textContent=e.title}let o=at("canvas"),a=n.ctx=o.getContext("2d"),m=qe("wrap",r),b=qe("under",m);m.appendChild(o);let A=qe("over",m);e=Bt(e),(e.plugins||[]).forEach(l=>{l.opts&&(e=l.opts(n,e)||e)});let C=!1,T=n.series=Is(e.series||[],_s,Ps,!1),w=n.axes=Is(e.axes||[],xs,Es,!0),S=n.scales=xe({},{x:En,y:Ls},e.scales),E=xe({x:K(Es.size/2),y:K(xs.size/3)},e.gutters),W=e.tzDate||(l=>new Date(l*1e3)),te=e.fmtDate||fs,x=La(W),J=ws(W,ms(Pa,te)),ae=Cs(W,Ss(Da,te)),le={};for(let l in S){let h=S[l];(h.min!=null||h.max!=null)&&(le[l]={min:h.min,max:h.max})}let De=xe({show:!0},e.legend).show,be,Re=[],ee,_e=!1;if(De){be=at("table","legend",r);let l=T[1]?T[1].values:null;if(_e=l!=null,_e){let h=at("tr","labels",be);at("th",null,h),ee=l(n,1,0);for(var ct in ee)at("th",null,h).textContent=ct}else ee={_:0},vt(be,"inline")}function bt(l,h){if(h==0&&_e)return null;let c=[],p=at("tr","series",be,be.childNodes[h]);vt(p,l.class),l.show||vt(p,"off");let v=at("th",null,p),k=qe("ident",v);l.width&&(k.style.borderColor=l.stroke),k.style.backgroundColor=l.fill;let y=qe("text",v);y.textContent=l.label,h>0&&(Ge("click",v,H=>{z.locked||Pn(H)&&kt(T.indexOf(l),{show:!l.show},dt.setSeries)}),F&&Ge(is,v,H=>{z.locked||kt(T.indexOf(l),{focus:!0},dt.setSeries)}));for(var O in ee){let H=at("td",null,p);H.textContent="--",c.push(H)}return c}let z=n.cursor=xe({},Ia,e.cursor);z.points.show=xt(z.points.show);let Ke=n.focus=xe({},e.focus||{alpha:.3},z.focus),F=Ke.prox>=0,M=[null];function U(l,h){if(h>0){let c=z.points.show(n,h);if(c)return vt(c,"cursor-pt"),vt(c,l.class),Vt(c,-10,-10),A.insertBefore(c,M[h]),c}}function Y(l,h){let c=l.scale,p=S[c]=xe({},h==0?En:Ls,S[c]),v=p.time;p.range=xt(p.range||(v?$a:h==0?Va:Ja));let k=l.value;if(l.value=v?ma(k)?Cs(W,Ss(k,te)):k||ae:k||Ua,l.label=l.label||(v?Ha:Oa),h>0){l.width=l.width==null?1:l.width,l.paths=l.paths||ao;let y=_n(l.width,1);l.points=xe({},{size:y,width:ii(1,y*.2)},l.points),l.points.show=xt(l.points.show),l._paths=null}if(De&&Re.splice(h,0,bt(l,h)),z.show){let y=U(l,h);y&&M.splice(h,0,y)}}function Ee(l,h){h=h==null?T.length:h,l=Ms(l,h,_s,Ps),T.splice(h,0,l),Y(T[h],h)}n.addSeries=Ee;function Ie(l){T.splice(l,1),De&&Re.splice(l,1)[0][0].parentNode.remove(),M.length>1&&M.splice(l,1)[0].remove()}n.delSeries=Ie,T.forEach(Y);for(let l in S){let h=S[l];h.from!=null&&(S[l]=xe({},S[h.from],h))}let B=T[0].scale,Ye=S[B].distr;function Oe(l,h){if(l.show){let c=l.side%2,p=S[l.scale];p==null&&(l.scale=c?T[1].scale:B,p=S[l.scale]);let v=p.time;l.space=xt(l.space),l.rotate=xt(l.rotate),l.incrs=xt(l.incrs||(p.distr==2?ps:v?_a:Ta)),l.split=xt(l.split||(v&&p.distr==1?x:Fa));let k=l.values;l.values=v?Gr(k)?ws(W,ms(k,te)):k||J:k||ja,l.font=Os(l.font),l.labelFont=Os(l.labelFont)}}w.forEach(Oe);let g,s=null,u=null,d=T[0].idxs,f=null;function R(l,h){l=l||[],l[0]=l[0]||[],n.data=l,t=l.slice(),f=t[0],g=f.length,Ye==2&&(t[0]=f.map((c,p)=>p)),Fn(),He("setData"),h!==!1&&L()}n.setData=R;function L(){s=d[0]=0,u=d[1]=g-1;let l=Ye==2?s:t[0][s],h=Ye==2?u:t[0][u];Rt(B,l,h)}function P(l,h,c,p){a.strokeStyle=l||$t,a.lineWidth=h,a.lineJoin="round",a.setLineDash(c||[]),a.fillStyle=p||$t}let I,N,D,j,pe,Fe,Z,se,ie,Pe;n.bbox={};function Mn(l,h){n.width=I=D=l,n.height=N=j=h,pe=Fe=0,eo(),to();let c=n.bbox;Z=c[de]=Ut(pe*fe,.5),se=c[ce]=Ut(Fe*fe,.5),ie=c[Q]=Ut(D*fe,.5),Pe=c[re]=Ut(j*fe,.5),q(b,de,pe),q(b,ce,Fe),q(b,Q,D),q(b,re,j),q(A,de,pe),q(A,ce,Fe),q(A,Q,D),q(A,re,j),q(m,Q,I),q(m,re,N),o[Q]=K(I*fe),o[re]=K(N*fe),ui(),C&&Rt(B,S[B].min,S[B].max),C&&He("setSize")}function Zs({width:l,height:h}){Mn(l,h)}n.setSize=Zs;function eo(){let l=!1,h=!1,c=!1,p=!1;w.forEach((v,k)=>{if(v.show){let{side:y,size:O}=v,H=y%2,$=v.labelSize=v.label!=null?v.labelSize||30:0,V=O+$;V>0&&(H?(D-=V,y==3?(pe+=V,p=!0):c=!0):(j-=V,y==0?(Fe+=V,l=!0):h=!0))}}),(l||h)&&(c||(D-=E.x),p||(D-=E.x,pe+=E.x)),(p||c)&&(h||(j-=E.y),l||(j-=E.y,Fe+=E.y))}function to(){let l=pe+D,h=Fe+j,c=pe,p=Fe;function v(k,y){switch(k){case 1:return l+=y,l-y;case 2:return h+=y,h-y;case 3:return c-=y,c+y;case 0:return p-=y,p+y}}w.forEach((k,y)=>{let O=k.side;k._pos=v(O,k.size),k.label!=null&&(k._lpos=v(O,k.labelSize))})}function On(){if(Mt){Bi=!0;return}if(g>0){let l=Bt(S);for(let c in l){let p=l[c],v=le[c];v!=null?(xe(p,v),c==B&&Fn()):c!=B&&(p.min=ne,p.max=-ne)}T.forEach((c,p)=>{let v=c.scale,k=l[v];if(p==0){let y=k.range(n,k.min,k.max);k.min=y[0],k.max=y[1],s=Ft(k.min,t[0]),u=Ft(k.max,t[0]),t[0][s]<k.min&&s++,t[0][u]>k.max&&u--,c.min=f[s],c.max=f[u]}else if(c.show&&le[v]==null){let y=c.min==ne?k.auto?da(t[p],s,u):[0,100]:[c.min,c.max];k.min=ot(k.min,c.min=y[0]),k.max=ii(k.max,c.max=y[1])}c.idxs[0]=s,c.idxs[1]=u});for(let c in l){let p=l[c];if(p.from==null&&p.min!=ne&&le[c]==null){let v=p.range(n,p.min,p.max);p.min=v[0],p.max=v[1]}}for(let c in l){let p=l[c];if(p.from!=null){let v=l[p.from];if(v.min!=ne){let k=p.range(n,v.min,v.max);p.min=k[0],p.max=k[1]}}}let h={};for(let c in l){let p=l[c],v=S[c];(v.min!=p.min||v.max!=p.max)&&(v.min=p.min,v.max=p.max,h[c]=!0)}T.forEach(c=>{h[c.scale]&&(c._paths=null)});for(let c in h)He("setScale",c)}for(let l in le)le[l]=null;z.show&&tt()}function io(l){let h=T[l],c=h.points,p=ze(c.width*fe),v=p%2/2,k=c.width>0,y=(c.size-c.width)/2*fe,O=ze(y*2);a.translate(v,v),a.save(),a.beginPath(),a.rect(Z-O,se-O,ie+O*2,Pe+O*2),a.clip(),a.globalAlpha=h.alpha;let H=new Path2D;for(let $=s;$<=u;$++)if(t[l][$]!=null){let V=K(ht(t[0][$],S[B],ie,Z)),G=K(Je(t[l][$],S[h.scale],Pe,se));H.moveTo(V+y,G),H.arc(V,G,y,0,Ai*2)}P(c.stroke||h.stroke||$t,p,null,c.fill||(k?"#fff":h.stroke||$t)),a.fill(H),k&&a.stroke(H),a.globalAlpha=1,a.restore(),a.translate(-v,-v)}function no(l){let h=qr(s-1,0,g-1),c=qr(u+1,0,g-1);for(;l[h]==null&&h>0;)h--;for(;l[c]==null&&c<g-1;)c++;return[h,c]}let Xe=1;function ro(){T.forEach((l,h)=>{if(h>0&&l.show&&g>0&&l._paths==null){let c=no(t[h]);l._paths=l.paths(n,h,c[0],c[1])}}),T.forEach((l,h)=>{h>0&&l.show&&(l._paths&&so(h),l.points.show(n,h,s,u)&&io(h),He("drawSeries",h))})}function so(l){let h=T[l];if(Xe==1){let{stroke:c,fill:p,clip:v}=h._paths,k=ze(h[Q]*fe),y=k%2/2;P(h.stroke,k,h.dash,h.fill),a.globalAlpha=h.alpha,a.translate(y,y),a.save();let O=Z,H=se,$=ie,V=Pe,G=k*fe/2;h.min==0&&(V+=G),h.max==0&&(H-=G,V+=G),a.beginPath(),a.rect(O,H,$,V),a.clip(),v!=null&&a.clip(v),h.band?(a.fill(c),k&&a.stroke(c)):(k&&a.stroke(c),h.fill!=null&&a.fill(p)),a.restore(),a.translate(-y,-y),a.globalAlpha=1}h.band&&(Xe*=-1)}function oo(l,h,c,p){let v=T[l],k=null;if(h.length>0){if(v.spanGaps){let O=h[0],H=h[h.length-1];h=[],c&&h.push(O),p&&h.push(H)}k=new Path2D;let y=Z;for(let O=0;O<h.length;O++){let H=h[O];k.rect(y,se,H[0]-y,se+Pe),y=H[1]}k.rect(y,se,Z+ie-y,se+Pe)}return k}function Hn(l,h,c){let p=l[l.length-1];p&&p[0]==h?p[1]=c:l.push([h,c])}function ao(l,h,c,p){let v=T[h],k=t[0],y=t[h],O=S[B],H=S[v.scale],$=Xe==1?{stroke:new Path2D,fill:null,clip:null}:T[h-1]._paths,V=$.stroke,G=ze(v[Q]*fe),me=ne,Se=-ne,Ue,it,St=[],Ce=K(ht(k[Xe==1?c:p],O,ie,Z));v.band&&Xe==1&&c==s&&(G&&V.lineTo(-G,K(Je(y[c],H,Pe,se))),O.min<k[0]&&St.push([Z,Ce-1]));for(let ge=Xe==1?c:p;ge>=c&&ge<=p;ge+=Xe){let Le=K(ht(k[ge],O,ie,Z));if(Le==Ce)y[ge]!=null&&(Ue=K(Je(y[ge],H,Pe,se)),me=ot(Ue,me),Se=ii(Ue,Se));else{let Ne=!1;me!=ne?(V.lineTo(Ce,me),V.lineTo(Ce,Se),V.lineTo(Ce,Ue),it=Ce):Ne=!0,y[ge]!=null?(Ue=K(Je(y[ge],H,Pe,se)),V.lineTo(Le,Ue),me=Se=Ue,Le-Ce>1&&y[ge-1]==null&&(Ne=!0)):(me=ne,Se=-ne),Ne&&Hn(St,it,Le),Ce=Le}}if(y[p]==null&&Hn(St,it,Ce),v.band){let ge=G*100,Le,Ne;Xe==-1&&c==s&&(Ne=Z-ge,Le=c),Xe==1&&p==u&&(Ne=Z+ie+ge,Le=p,O.max>k[g-1]&&St.push([Ce,Z+ie])),V.lineTo(Ne,K(Je(y[Le],H,Pe,se)))}if(Xe==1&&($.clip=oo(h,St,y[c]==null,y[p]==null),v.fill!=null)){let ge=$.fill=new Path2D(V),Le=K(Je(0,H,Pe,se));ge.lineTo(Z+ie,Le),ge.lineTo(Z,Le)}return v.band&&(Xe*=-1),$}function Nn(l,h,c,p){let v;if(p<=0)v=[0,0];else{let k=l.space(n,h,c,p),y=l.incrs(n,h,c,p,k);v=Wa(c-h,y,p,k),v.push(v[1]/k)}return v}function jn(l,h,c,p,v,k,y,O){let H=k%2/2;a.translate(H,H),P(y,k,O),a.beginPath();let $,V,G,me,Se=p+(c==0||c==3?-v:v);h==0?(V=p,me=Se):($=p,G=Se),l.forEach((Ue,it)=>{h==0?$=G=Ue:V=me=Ue,a.moveTo($,V),a.lineTo(G,me)}),a.stroke(),a.translate(-H,-H)}function lo(){w.forEach((l,h)=>{if(!l.show)return;let c=S[l.scale];if(c.min==ne)return;let p=l.side,v=p%2,{min:k,max:y}=c,[O,H,$]=Nn(l,k,y,v==0?D:j),V=c.distr==2,G=l.split(n,k,y,O,$,V),me=v==0?ht:Je,Se=v==0?ie:Pe,Ue=v==0?Z:se,it=G.map(ft=>K(me(ft,c,Se,Ue))),St=K(l.gap*fe),Ce=l.ticks,ge=Ce.show?K(Ce.size*fe):0,Le=l.values(n,c.distr==2?G.map(ft=>f[ft]):G,H,c.distr==2?f[G[1]]-f[G[0]]:O),Ne=p==2?l.rotate(n,Le,H)*-Ai/180:0,Kn=K(l._pos*fe),mo=ge+St,go=v==0&&p==0||v==1&&p==3?-1:1,Qn=Kn+mo*go,Ht=v==0?Qn:0,Nt=v==1?Qn:0;a.font=l.font[0],a.fillStyle=l.stroke||$t,a.textAlign=Ne>0?de:Ne<0?Zr:v==0?"center":p==3?Zr:de,a.textBaseline=Ne||v==1?"middle":p==2?ce:Qr;let Zn=l.font[1]*Ma;if(Le.forEach((ft,er)=>{v==0?Nt=it[er]:Ht=it[er],(""+ft).split(/\n/gm).forEach((tr,ir)=>{Ne?(a.save(),a.translate(Nt,Ht+ir*Zn),a.rotate(Ne),a.fillText(tr,0,0),a.restore()):a.fillText(tr,Nt,Ht+ir*Zn)})}),l.label){a.save();let ft=K(l._lpos*fe);v==1?(Nt=Ht=0,a.translate(ft,K(se+Pe/2)),a.rotate((p==3?-Ai:Ai)/2)):(Nt=K(Z+ie/2),Ht=ft),a.font=l.labelFont[0],a.textAlign="center",a.textBaseline=p==2?ce:Qr,a.fillText(l.label,Nt,Ht),a.restore()}Ce.show&&jn(it,v,p,Kn,ge,ze(Ce[Q]*fe),Ce.stroke);let ci=l.grid;ci.show&&jn(it,v,v==0?2:1,v==0?se:Z,v==0?Pe:ie,ze(ci[Q]*fe),ci.stroke,ci.dash)}),He("drawAxes")}function Fn(){T.forEach((l,h)=>{h>0&&(l.min=ne,l.max=-ne,l._paths=null)})}let Dt;function si(){if(Mt){Ui=!0;return}a.clearRect(0,0,o[Q],o[re]),He("drawClear"),lo(),ro(),Dt=!0,He("draw")}n.redraw=l=>{l!==!1?Rt(B,S[B].min,S[B].max):si()};function Fi(l,h){let c=S[l];if(c.from==null){if(l==B&&(c.distr==2&&(h.min=Ft(h.min,t[0]),h.max=Ft(h.max,t[0])),c.time&&w[0].show&&h.max>h.min&&Nn(w[0],h.min,h.max,D)[0]<.001))return;le[l]=h,Dt=!1,On(),!Dt&&si(),Dt=!1}}n.setScale=Fi;let Un,Bn,oi,ai,oe,ue,yt=!1,ye=z.drag,ke=ye.x,we=ye.y;if(z.show){let l="cursor-";z.x&&(oe=z.left,Un=qe(l+"x",A)),z.y&&(ue=z.top,Bn=qe(l+"y",A))}let X=n.select=xe({show:!0,left:0,width:0,top:0,height:0},e.select),he=X.show?qe("select",A):null;function li(l,h){if(X.show){for(let c in l)q(he,c,X[c]=l[c]);h!==!1&&He("setSelect")}}n.setSelect=li;function $n(l,h){let c=T[l],p=De?Re[l][0].parentNode:null;c.show?p&&va(p,"off"):(p&&vt(p,"off"),M.length>1&&Vt(M[l],0,-10))}function Rt(l,h,c){Fi(l,{min:h,max:c})}function kt(l,h,c){let p=T[l];if(h.focus!=null&&ho(l),h.show!=null){if(p.show=h.show,$n(l,h.show),p.band){let v=T[l+1]&&T[l+1].band?l+1:l-1;T[v].show=p.show,$n(v,h.show)}Rt(B,S[B].min,S[B].max)}He("setSeries",l,h),c&&wt.pub("setSeries",n,l,h)}n.setSeries=kt;function Vn(l,h){T[l].alpha=h,Re&&(Re[l][0].parentNode.style.opacity=h)}function uo(l,h){let c=T[l];if(Vn(l,h),c.band){let p=T[l+1].band?l+1:l-1;Vn(p,h)}}let Wt=Array(T.length),Jn=null;function ho(l){l!=Jn&&(T.forEach((h,c)=>{uo(c,l==null||c==0||c==l?1:Ke.alpha)}),Jn=l,si())}De&&F&&Ge(ns,be,l=>{z.locked||(kt(null,{focus:!1},dt.setSeries),tt())});function It(l,h){let c=D;h!=B&&(c=j,l=c-l);let p=l/c,v=S[h],k=v.max-v.min;return v.min+p*k}function Wn(l){let h=It(l,B);return Ft(h,t[0],s,u)}n.valToIdx=l=>Ft(l,t[0]),n.posToIdx=Wn,n.posToVal=It,n.valToPos=(l,h,c)=>h==B?ht(l,S[h],c?ie:D,c?Z:0):Je(l,S[h],c?Pe:j,c?se:0);let Mt=!1,Ui=!1,Bi=!1,$i=!1;function Yn(l){Mt=!0,l(n),Mt=!1,Bi&&On(),$i&&tt(),Ui&&!Dt&&si(),Bi=$i=Ui=Dt=Mt}n.batch=Yn,n.setCursor=l=>{oe=l.left,ue=l.top,tt()};let Vi=0;function tt(l,h){if(Mt){$i=!0;return}Vi=0,z.show&&(z.x&&Vt(Un,K(oe),0),z.y&&Vt(Bn,0,K(ue)));let c,p=s>u;if(oe<0||g==0||p){c=null;for(let v=0;v<T.length;v++)if(v>0&&(Wt[v]=ne,M.length>1&&Vt(M[v],-10,-10)),De){if(v==0&&_e)continue;for(let k=0;k<Re[v].length;k++)Re[v][k][es].nodeValue="--"}F&&kt(null,{focus:!0},dt.setSeries)}else{c=Wn(oe);let v=S[B],k=ze(ht(t[0][c],v,D,0));for(let y=0;y<T.length;y++){let O=T[y];if(y>0&&O.show){let H=t[y][c],$=H==null?-10:ze(Je(H,S[O.scale],j,0));Wt[y]=$>0?gt($-ue):ne,M.length>1&&Vt(M[y],k,$)}else Wt[y]=ne;if(De){if(c==z.idx||y==0&&_e)continue;let H=y==0&&Ye==2?f:t[y],$=_e?O.values(n,y,c):{_:O.value(n,H[c],y,c)},V=0;for(let G in $)Re[y][V++][es].nodeValue=$[G]}}}if(X.show&&yt){let v=gt(oe-oi),k=gt(ue-ai);if(h!=null){let[y,O]=dt.scales,H=h.cursor.drag;if(ke=H._x,we=H._y,y){let $=S[y],V=h.posToVal(h.select[de],y),G=h.posToVal(h.select[de]+h.select[Q],y);X[de]=ht(V,$,D,0),X[Q]=gt(X[de]-ht(G,$,D,0)),q(he,de,X[de]),q(he,Q,X[Q]),O||(q(he,ce,X[ce]=0),q(he,re,X[re]=j))}if(O){let $=S[O],V=h.posToVal(h.select[ce],O),G=h.posToVal(h.select[ce]+h.select[re],O);X[ce]=Je(V,$,j,0),X[re]=gt(X[ce]-Je(G,$,j,0)),q(he,ce,X[ce]),q(he,re,X[re]),y||(q(he,de,X[de]=0),q(he,Q,X[Q]=D))}}else{ke=ye.x&&v>=ye.dist,we=ye.y&&k>=ye.dist;let y=ye.uni;if(y!=null?ke&&we&&(ke=v>=y,we=k>=y,!ke&&!we&&(k>v?we=!0:ke=!0)):ye.x&&ye.y&&(ke||we)&&(ke=we=!0),ke){let O=ot(oi,oe);q(he,de,X[de]=O),q(he,Q,X[Q]=v),we||(q(he,ce,X[ce]=0),q(he,re,X[re]=j))}if(we){let O=ot(ai,ue);q(he,ce,X[ce]=O),q(he,re,X[re]=k),ke||(q(he,de,X[de]=0),q(he,Q,X[Q]=D))}!ke&&!we&&(q(he,re,X[re]=0),q(he,Q,X[Q]=0))}}if(z.idx=c,z.left=oe,z.top=ue,ye._x=ke,ye._y=we,l!=null&&(wt.pub(mn,n,oe,ue,D,j,c),F)){let v=ot.apply(null,Wt),k=null;v<=Ke.prox&&Wt.some((y,O)=>{if(y==v)return k=O}),kt(k,{focus:!0},dt.setSeries)}C&&He("setCursor")}let Ji=null;function ui(){Ji=A.getBoundingClientRect()}function Xn(l,h,c,p,v,k,y){z.locked||(Wi(l,h,c,p,v,k,y,!1,l!=null),l!=null?Vi==0&&(Vi=os(tt)):tt(null,h))}function Wi(l,h,c,p,v,k,y,O,H){if(l!=null)c=l.clientX-Ji.left,p=l.clientY-Ji.top;else{if(c<0||p<0){oe=-10,ue=-10;return}let[$,V]=dt.scales;$!=null?c=ht(h.posToVal(c,$),S[$],D,0):c=D*(c/v),V!=null?p=Je(h.posToVal(p,V),S[V],j,0):p=j*(p/k)}H&&((c<=1||c>=D-1)&&(c=Ut(c,D)),(p<=1||p>=j-1)&&(p=Ut(p,j))),O?(oi=c,ai=p):(oe=c,ue=p)}function zn(){li({width:0,height:0},!1)}function qn(l,h,c,p,v,k,y){(h!=null||Pn(l))&&(yt=!0,ke=we=ye._x=ye._y=!1,Wi(l,h,c,p,v,k,y,!0,!1),l!=null&&(Ge(xi,bn,Yi),wt.pub(gn,n,oi,ai,D,j,null)))}function Yi(l,h,c,p,v,k,y){if(h!=null||Pn(l)){yt=ye._x=ye._y=!1,Wi(l,h,c,p,v,k,y,!1,!0);let O=X[Q]>0||X[re]>0;O&&li(X),ye.setScale&&O?(Yn(()=>{if(ke&&Rt(B,It(X[de],B),It(X[de]+X[Q],B)),we)for(let H in S){let $=S[H];H!=B&&$.from==null&&Rt(H,It(X[ce]+X[re],H),It(X[ce],H))}}),zn()):z.lock&&(z.locked=!z.locked,z.locked||tt())}l!=null&&(yn(xi,bn,Yi),wt.pub(xi,n,oe,ue,D,j,null))}function co(l,h,c,p,v,k,y){if(!z.locked){let O=yt;if(yt){let H=!0,$=!0,V=10;if(ke&&we&&(H=oe<=V||oe>=D-V,$=ue<=V||ue>=j-V),ke&&H){let G=oe,me=D-oe,Se=ot(G,me);Se==G&&(oe=0),Se==me&&(oe=D)}if(we&&$){let G=ue,me=j-ue,Se=ot(G,me);Se==G&&(ue=0),Se==me&&(ue=j)}tt(1),yt=!1}oe=-10,ue=-10,tt(1),O&&(yt=O)}}function Gn(l,h,c,p,v,k,y){L(),zn(),l!=null&&wt.pub(vn,n,oe,ue,D,j,null)}let Ot={};Ot[gn]=qn,Ot[mn]=Xn,Ot[xi]=Yi,Ot[vn]=Gn,Ot.setSeries=(l,h,c,p)=>{kt(c,p)};let Yt;z.show&&(Ge(gn,A,qn),Ge(mn,A,Xn),Ge(is,A,ui),Ge(ns,A,l=>{os(co)}),Ge(vn,A,Gn),Yt=ca(ui,100),Ge(rs,_i,Yt),Ge(ss,_i,Yt),n.syncRect=ui);let hi=n.hooks=e.hooks||{};function He(l,h,c){l in hi&&hi[l].forEach(p=>{p.call(null,n,h,c)})}(e.plugins||[]).forEach(l=>{for(let h in l.hooks)hi[h]=(hi[h]||[]).concat(l.hooks[h])});let dt=xe({key:null,setSeries:!1,scales:[B,null]},z.sync),Xi=dt.key,wt=Xi!=null?Ds[Xi]=Ds[Xi]||Rs():Rs();wt.sub(n);function fo(l,h,c,p,v,k,y){Ot[l](null,h,c,p,v,k,y)}n.pub=fo;function po(){wt.unsub(n),yn(rs,_i,Yt),yn(ss,_i,Yt),r.remove(),He("destroy")}n.destroy=po;function zi(){Mn(e[Q],e[re]),He("init",e,t),R(t||e.data,!1),le[B]?Fi(B,le[B]):L(),li(X,!1),C=!0,He("ready")}return i?i instanceof HTMLElement?(i.appendChild(r),zi()):i(n,zi):zi(),n}ri.assign=xe;ri.rangeNum=Xr;ri.fmtDate=fs,ri.tzDate=Ca;var Ln=ri;var Ya=e=>e.unit?{value:(t,i)=>i==null?"--":i.toFixed(3)+` ${e.unit}`}:{},Hs=e=>({value:"{YYYY}-{MM}-{DD} {HH}:{mm}:{ss}"}),Xa=e=>e.unit?{values:(t,i,n)=>i.map(r=>+r.toFixed(2)+` ${e.unit}`)}:{},Ns=e=>({space:55,values:[[3600*24*365,"{YYYY}",7,"{YYYY}"],[3600*24*28,"{MMM}",7,`{MMM}
{YYYY}`],[3600*24,"{MM}-{DD}",7,`{MM}-{DD}
{YYYY}`],[3600,"{HH}:{mm}",4,`{HH}:{mm}
{YYYY}-{MM}-{DD}`],[60,"{HH}:{mm}",4,`{HH}:{mm}
{YYYY}-{MM}-{DD}`],[1,"{ss}",2,`{HH}:{mm}:{ss}
{YYYY}-{MM}-{DD}`]]}),js=e=>Be({show:!0,size:70,space:15},Xa(e)),Di={width:100,height:300};function za(e,t){let i=!1;return()=>{i||(requestAnimationFrame(e),i=!0,setTimeout(()=>{i=!1},t))}}var Ri=(e,t=0)=>sr(Be(Be({},Yr.at(t)),Ya(e)),{label:e.label,spanGaps:!0,points:{show:!1}}),Fs=e=>e.slice(0).map(({data:t})=>t);function qa({y:e,z:t},i){this.datasets[0].data.push(t);let n=this.datasets[1].data[this.datasets[1].data.length-1]||0,r=i.call(this,e,n);this.datasets[1].data.push(r)}var Dn=e=>e.reduceRight((t,i)=>i!=null&&t==null?i:t,null);function Ga({x:e,y:t,z:i},n){let r=this.datasets.findIndex(({key:o})=>e===o);r===-1&&(r=this.datasets.push({key:e,data:Array(this.datasets[0].data.length).fill(null)})-1,this.chart.addSeries(Ri({label:e,unit:this.options.unit},r-1),r)),this.datasets=this.datasets.map((o,a)=>(a===0?o.data.push(i):a===r?o.data.push(n.call(this,t,Dn(o.data)||0)):o.data.push(null),o))}var Us=({pruneThreshold:e=1e3})=>e,Ii=class{static __projections(){return{counter:(t,i)=>i+1,last_value:t=>t,sum:(t,i)=>i+t}}static getConfig(t){return{class:t.kind,title:t.title,width:t.width,height:t.height,series:[Be({},Hs()),Ri(t,0)],scales:{x:{min:t.now-60,max:t.now},y:{min:0,max:1}},axes:[Ns(),js(t)]}}static initialData(){return[[],[]]}constructor(t,i){this.__callback=this.constructor.__projections()[i.metric],this.chart=t,this.datasets=[{key:"|x|",data:[]}],this.options=i,this.pruneThreshold=Us(i),i.tagged?(this.chart.delSeries(1),this.__handler=Ga):(this.datasets.push({key:i.label,data:[]}),this.__handler=qa)}handleMeasurements(t){let i=this.datasets[0].data.length;i>=this.pruneThreshold&&(this.datasets=this.datasets.map(o=>{var a=o,{data:n}=a,r=or(a,["data"]);return Be({data:n.slice(-Math.floor(i/2))},r)})),t.forEach(n=>this.__handler.call(this,n,this.__callback)),this.chart.setData(Fs(this.datasets))}},Mi=class{constructor(t,i){let n=this.constructor.getConfig(t);n.series[1].values=this.__seriesValues.bind(this),this.datasets=[{key:"|x|",data:[]}],this.chart=new Ln(n,this.constructor.initialData(t),i),this.pruneThreshold=Us(t),this.options=t,t.tagged?(this.chart.delSeries(1),this.__handler=this.handleTaggedMeasurement.bind(this)):(this.datasets.push(this.constructor.newDataset(t.label)),this.__handler=this.handleMeasurement.bind(this))}handleMeasurements(t){this.__maybePruneDatasets(),t.forEach(i=>this.__handler(i)),this.chart.setData(Fs(this.datasets))}handleTaggedMeasurement(t){let i=this.findOrCreateSeries(t.x);this.handleMeasurement(t,i)}handleMeasurement(t,i=1){let{z:n}=t;this.datasets=this.datasets.map((r,o)=>(r.key==="|x|"?r.data.push(n):o===i?this.pushToDataset(r,t):this.pushToDataset(r,null),r))}findOrCreateSeries(t){let i=this.datasets.findIndex(({key:n})=>t===n);if(i===-1){i=this.datasets.push(this.constructor.newDataset(t,this.datasets[0].data.length))-1;let n=Be({values:this.__seriesValues.bind(this)},Ri({label:t},i-1));this.chart.addSeries(n,i)}return i}pushToDataset(t,i){if(i===null){t.data.push(null),t.agg.avg.push(null),t.agg.max.push(null),t.agg.min.push(null);return}let{y:n}=i;return t.agg.count++,t.agg.total+=n,t.data.push(n),(t.last.min===null||n<t.last.min)&&(t.last.min=n),t.agg.min.push(t.last.min),(t.last.max===null||n>t.last.max)&&(t.last.max=n),t.agg.max.push(t.last.max),t.agg.avg.push(t.agg.total/t.agg.count),t}__maybePruneDatasets(){let t=this.datasets[0].data.length;if(t>=this.pruneThreshold){let i=-Math.floor(t/2);this.datasets=this.datasets.map(({key:n,data:r,agg:o})=>{let a=r.slice(i);if(!o)return{key:n,data:a};let{avg:m,count:b,max:A,min:C,total:T}=o,w=C.slice(i),S=A.slice(i);return{key:n,data:a,agg:{avg:m.slice(i),count:b,min:w,max:S,total:T},last:{min:Dn(w),max:Dn(S)}}})}}__seriesValues(t,i,n){let r=this.datasets[i];if(r&&r.data&&r.data[n]){let{agg:{avg:o,max:a,min:m},data:b}=r;return{Value:b[n].toFixed(3),Min:m[n].toFixed(3),Max:a[n].toFixed(3),Avg:o[n].toFixed(3)}}else return{Value:"--",Min:"--",Max:"--",Avg:"--"}}static initialData(){return[[],[]]}static getConfig(t){return{class:t.kind,title:t.title,width:t.width,height:t.height,series:[Be({},Hs()),Ri(t,0)],scales:{x:{min:t.now-60,max:t.now},y:{min:0,max:1}},axes:[Ns(),js(t)]}}static newDataset(t,i=0){let n=i>0?Array(i).fill(null):[];return{key:t,data:[...n],agg:{avg:[...n],count:0,max:[...n],min:[...n],total:0},last:{max:null,min:null}}}},Bs={counter:Ii,last_value:Ii,sum:Ii,summary:Mi},$s=class{constructor(t,i){if(i.metric){if(i.metric&&!Bs[i.metric])throw new TypeError(`No metric defined for type ${i.metric}`)}else throw new TypeError("No metric type was provided");let n=Bs[i.metric];n===Mi?(this.metric=new Mi(i,t),this.uplotChart=this.metric.chart):(this.uplotChart=new Ln(n.getConfig(i),n.initialData(i),t),this.metric=new n(this.uplotChart,i));let r=typeof i.refreshInterval!="undefined";this._isBufferingData=r,this._buffer=[],this._timer=r?setInterval(this._flushToChart.bind(this),+i.refreshInterval):null}clearTimers(){clearInterval(this._timer)}resize(t){this.uplotChart.setSize({width:Math.max(t.width,Di.width),height:Di.height})}pushData(t){if(!t.length)return;(this._isBufferingData?this._pushToBuffer:this._pushToChart).call(this,t)}_pushToBuffer(t){this._buffer=this._buffer.concat(t)}_pushToChart(t){this.metric.handleMeasurements(t)}_flushToChart(){let t=this._flushBuffer();!t.length||this._pushToChart(t)}_flushBuffer(){if(this._buffer&&!this._buffer.length)return[];let t=this._buffer;return this._buffer=[],t.reduce((i,n)=>i.concat(n),[])}},Ka={mounted(){let e=this.el.parentElement.querySelector(".chart"),t=e.getBoundingClientRect(),i=Object.assign({},e.dataset,{tagged:e.dataset.tags&&e.dataset.tags!==""||!1,width:Math.max(t.width,Di.width),height:Di.height,now:new Date/1e3,refreshInterval:1e3});this.chart=new $s(e,i),window.addEventListener("resize",za(()=>{let n=e.getBoundingClientRect();this.chart.resize(n)}))},updated(){let e=Array.from(this.el.children||[]).map(({dataset:{x:t,y:i,z:n}})=>({x:t,y:+i,z:+n/1e6}));e.length>0&&this.chart.pushData(e)},destroyed(){this.chart.clearTimers()}},Vs=Ka;var Qa=e=>{let t=`${e.key}=${e.value};samesite=strict;path=/`;e.domain&&(t+=`;domain=${e.domain}`),document.cookie=t},Za=e=>{let t="Thu, 01 Jan 1970 00:00:00 GMT";document.cookie=`${e.key}=; expires=${t}`},el=e=>e.el.getAttribute("data-cookie-enabled")==="true",tl=e=>({key:e.el.getAttribute("data-cookie-key"),value:e.el.getAttribute("data-cookie-value"),domain:e.el.getAttribute("data-cookie-domain")}),il={updated(){let e=tl(this);Za(e),el(this)&&Qa(e)}},Js=il;var nl=e=>{if(!navigator.clipboard)e.select(),e.setSelectionRange(0,99999),document.execCommand("copy");else{let t=e.value;navigator.clipboard.writeText(t)}},rl={mounted(){this.el.querySelector(".btn-primary").addEventListener("click",e=>{let t=this.el.querySelector("textarea");nl(t);let i=this.el.querySelector(".copy-indicator");i.setAttribute("data-enabled","false"),i.offsetWidth,i.setAttribute("data-enabled","true")})}},Ws=rl;var sl={updated(){if(this.el.querySelector(".logger-autoscroll-checkbox").checked){let e=this.el.querySelector("#logger-messages");e.scrollTop=e.scrollHeight}}},Ys=sl;var Xs=".progress-bar, .color-bar-legend-entry",Oi,zs=e=>{e.querySelectorAll(Xs).forEach(t=>{if(Oi){let i=t.getAttribute("data-name")!==Oi;t.setAttribute("data-muted",i)}else t.removeAttribute("data-muted")})},ol={mounted(){this.el.setAttribute("data-highlight-enabled","true"),this.el.querySelectorAll(Xs).forEach(e=>e.addEventListener("click",t=>{let i=t.currentTarget.getAttribute("data-name");Oi=i===Oi?null:i,zs(this.el)}))},updated(){this.el.setAttribute("data-highlight-enabled","true"),zs(this.el)}},qs=ol;var Gs="_refresh_data";function Ks(e,t){let i=JSON.stringify(e),n=ul(i);ll(Gs,n,t,15768e4)}function Hi(){let e=al(Gs);if(e){let t=hl(e);return JSON.parse(t)}else return null}function al(e){let t=document.cookie.split("; ").find(i=>i.startsWith(`${e}=`));return t?t.replace(`${e}=`,""):null}function ll(e,t,i,n){let r=`${e}=${t};max-age=${n};path=${i}`;document.cookie=r}function ul(e){return btoa(unescape(encodeURIComponent(e)))}function hl(e){return decodeURIComponent(escape(atob(e)))}var cl={updated(){let e=Hi()||{};e[this.el.dataset.page]=this.el.value,Ks(e,this.el.dataset.dashboardMountPath)}},Qs=cl;var dl={PhxChartComponent:Vs,PhxRequestLoggerCookie:Js,PhxRequestLoggerQueryParameter:Ws,PhxRequestLoggerMessages:Ys,PhxColorBarHighlight:qs,PhxRememberRefresh:Qs},fl=document.querySelector("html").getAttribute("phx-socket")||"/live",pl=document.querySelector("meta[name='csrf-token']").getAttribute("content"),Rn=new $r(fl,Ni.Socket,{hooks:dl,params:e=>({_csrf_token:pl,refresh_data:Hi()})}),Lt=Rn.socket,ml=Lt.onConnError,In=!0;Lt.onOpen(()=>{In=!1});Lt.onConnError=(...e)=>{In?(In=!1,Lt.disconnect(null,3e3),Lt.transport=Ni.LongPoll,Lt.connect()):ml.apply(Lt,e)};ji.default.config({barColors:{0:"#29d"},shadowColor:"rgba(0, 0, 0, .3)"});window.addEventListener("phx:page-loading-start",e=>ji.default.show());window.addEventListener("phx:page-loading-stop",e=>ji.default.hide());Rn.connect();window.liveSocket=Rn;})();
/**
 * @license MIT
 * topbar 1.0.0, 2021-01-06
 * http://buunguyen.github.io/topbar
 * Copyright (c) 2021 Buu Nguyen
 */
