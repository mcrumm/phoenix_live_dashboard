(()=>{var vo=Object.create;var di=Object.defineProperty,bo=Object.defineProperties,yo=Object.getOwnPropertyDescriptor,ko=Object.getOwnPropertyDescriptors,wo=Object.getOwnPropertyNames,fi=Object.getOwnPropertySymbols,So=Object.getPrototypeOf,Xi=Object.prototype.hasOwnProperty,nr=Object.prototype.propertyIsEnumerable;var rr=(e,t,i)=>t in e?di(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,$e=(e,t)=>{for(var i in t||(t={}))Xi.call(t,i)&&rr(e,i,t[i]);if(fi)for(var i of fi(t))nr.call(t,i)&&rr(e,i,t[i]);return e},sr=(e,t)=>bo(e,ko(t)),Co=e=>di(e,"__esModule",{value:!0});var or=(e,t)=>{var i={};for(var n in e)Xi.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(e!=null&&fi)for(var n of fi(e))t.indexOf(n)<0&&nr.call(e,n)&&(i[n]=e[n]);return i};var lr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Ao=(e,t,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of wo(t))!Xi.call(e,n)&&n!=="default"&&di(e,n,{get:()=>t[n],enumerable:!(i=yo(t,n))||i.enumerable});return e},ar=e=>Ao(Co(di(e!=null?vo(So(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var ur=lr((Xt,zi)=>{(function(e,t){typeof Xt=="object"&&typeof zi=="object"?zi.exports=t():typeof define=="function"&&define.amd?define([],t):typeof Xt=="object"?Xt.Phoenix=t():e.Phoenix=t()})(Xt,function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(n,r,o){i.o(n,r)||Object.defineProperty(n,r,{enumerable:!0,get:o})},i.r=function(n){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},i.t=function(n,r){if(1&r&&(n=i(n)),8&r||4&r&&typeof n=="object"&&n&&n.__esModule)return n;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:n}),2&r&&typeof n!="string")for(var l in n)i.d(o,l,function(g){return n[g]}.bind(null,l));return o},i.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return i.d(r,"a",r),r},i.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},i.p="",i(i.s=0)}([function(e,t,i){(function(n){e.exports=n.Phoenix=i(2)}).call(this,i(1))},function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(n){typeof window=="object"&&(i=window)}e.exports=i},function(e,t,i){"use strict";function n(b){return function(s){if(Array.isArray(s))return g(s)}(b)||function(s){if(typeof Symbol!="undefined"&&Symbol.iterator in Object(s))return Array.from(s)}(b)||l(b)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function r(b){return(r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(b)}function o(b,s){return function(u){if(Array.isArray(u))return u}(b)||function(u,d){if(!(typeof Symbol=="undefined"||!(Symbol.iterator in Object(u)))){var f=[],R=!0,L=!1,E=void 0;try{for(var M,j=u[Symbol.iterator]();!(R=(M=j.next()).done)&&(f.push(M.value),!d||f.length!==d);R=!0);}catch(D){L=!0,E=D}finally{try{R||j.return==null||j.return()}finally{if(L)throw E}}return f}}(b,s)||l(b,s)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function l(b,s){if(b){if(typeof b=="string")return g(b,s);var u=Object.prototype.toString.call(b).slice(8,-1);return u==="Object"&&b.constructor&&(u=b.constructor.name),u==="Map"||u==="Set"?Array.from(u):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?g(b,s):void 0}}function g(b,s){(s==null||s>b.length)&&(s=b.length);for(var u=0,d=new Array(s);u<s;u++)d[u]=b[u];return d}function k(b,s){if(!(b instanceof s))throw new TypeError("Cannot call a class as a function")}function T(b,s){for(var u=0;u<s.length;u++){var d=s[u];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(b,d.key,d)}}function C(b,s,u){return s&&T(b.prototype,s),u&&T(b,u),b}i.r(t),i.d(t,"Channel",function(){return $}),i.d(t,"Serializer",function(){return Y}),i.d(t,"Socket",function(){return Le}),i.d(t,"LongPoll",function(){return Me}),i.d(t,"Ajax",function(){return V}),i.d(t,"Presence",function(){return Ye});var x=typeof self!="undefined"?self:null,v=typeof window!="undefined"?window:null,m=x||v||void 0,A=0,H=1,q=2,_=3,I="closed",Z="errored",Q="joined",ge="joining",re="leaving",ke="phx_close",Ie="phx_error",ne="phx_join",Ee="phx_reply",ct="phx_leave",bt=[ke,Ie,ne,Ee,ct],z="longpoll",Ge="websocket",B=function(b){return typeof b=="function"?b:function(){return b}},O=function(){function b(s,u,d,f){k(this,b),this.channel=s,this.event=u,this.payload=d||function(){return{}},this.receivedResp=null,this.timeout=f,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}return C(b,[{key:"resend",value:function(s){this.timeout=s,this.reset(),this.send()}},{key:"send",value:function(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}},{key:"receive",value:function(s,u){return this.hasReceived(s)&&u(this.receivedResp.response),this.recHooks.push({status:s,callback:u}),this}},{key:"reset",value:function(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}},{key:"matchReceive",value:function(s){var u=s.status,d=s.response;s.ref,this.recHooks.filter(function(f){return f.status===u}).forEach(function(f){return f.callback(d)})}},{key:"cancelRefEvent",value:function(){this.refEvent&&this.channel.off(this.refEvent)}},{key:"cancelTimeout",value:function(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}},{key:"startTimeout",value:function(){var s=this;this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,function(u){s.cancelRefEvent(),s.cancelTimeout(),s.receivedResp=u,s.matchReceive(u)}),this.timeoutTimer=setTimeout(function(){s.trigger("timeout",{})},this.timeout)}},{key:"hasReceived",value:function(s){return this.receivedResp&&this.receivedResp.status===s}},{key:"trigger",value:function(s,u){this.channel.trigger(this.refEvent,{status:s,response:u})}}]),b}(),$=function(){function b(s,u,d){var f=this;k(this,b),this.state=I,this.topic=s,this.params=B(u||{}),this.socket=d,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new O(this,ne,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new He(function(){f.socket.isConnected()&&f.rejoin()},this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError(function(){return f.rejoinTimer.reset()})),this.stateChangeRefs.push(this.socket.onOpen(function(){f.rejoinTimer.reset(),f.isErrored()&&f.rejoin()})),this.joinPush.receive("ok",function(){f.state=Q,f.rejoinTimer.reset(),f.pushBuffer.forEach(function(R){return R.send()}),f.pushBuffer=[]}),this.joinPush.receive("error",function(){f.state=Z,f.socket.isConnected()&&f.rejoinTimer.scheduleTimeout()}),this.onClose(function(){f.rejoinTimer.reset(),f.socket.hasLogger()&&f.socket.log("channel","close ".concat(f.topic," ").concat(f.joinRef())),f.state=I,f.socket.remove(f)}),this.onError(function(R){f.socket.hasLogger()&&f.socket.log("channel","error ".concat(f.topic),R),f.isJoining()&&f.joinPush.reset(),f.state=Z,f.socket.isConnected()&&f.rejoinTimer.scheduleTimeout()}),this.joinPush.receive("timeout",function(){f.socket.hasLogger()&&f.socket.log("channel","timeout ".concat(f.topic," (").concat(f.joinRef(),")"),f.joinPush.timeout),new O(f,ct,B({}),f.timeout).send(),f.state=Z,f.joinPush.reset(),f.socket.isConnected()&&f.rejoinTimer.scheduleTimeout()}),this.on(Ee,function(R,L){f.trigger(f.replyEventName(L),R)})}return C(b,[{key:"join",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.timeout;if(this.joinedOnce)throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=s,this.joinedOnce=!0,this.rejoin(),this.joinPush}},{key:"onClose",value:function(s){this.on(ke,s)}},{key:"onError",value:function(s){return this.on(Ie,function(u){return s(u)})}},{key:"on",value:function(s,u){var d=this.bindingRef++;return this.bindings.push({event:s,ref:d,callback:u}),d}},{key:"off",value:function(s,u){this.bindings=this.bindings.filter(function(d){return!(d.event===s&&(u===void 0||u===d.ref))})}},{key:"canPush",value:function(){return this.socket.isConnected()&&this.isJoined()}},{key:"push",value:function(s,u){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.timeout;if(u=u||{},!this.joinedOnce)throw new Error("tried to push '".concat(s,"' to '").concat(this.topic,"' before joining. Use channel.join() before pushing events"));var f=new O(this,s,function(){return u},d);return this.canPush()?f.send():(f.startTimeout(),this.pushBuffer.push(f)),f}},{key:"leave",value:function(){var s=this,u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.timeout;this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=re;var d=function(){s.socket.hasLogger()&&s.socket.log("channel","leave ".concat(s.topic)),s.trigger(ke,"leave")},f=new O(this,ct,B({}),u);return f.receive("ok",function(){return d()}).receive("timeout",function(){return d()}),f.send(),this.canPush()||f.trigger("ok",{}),f}},{key:"onMessage",value:function(s,u,d){return u}},{key:"isLifecycleEvent",value:function(s){return bt.indexOf(s)>=0}},{key:"isMember",value:function(s,u,d,f){return this.topic===s&&(!f||f===this.joinRef()||!this.isLifecycleEvent(u)||(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:s,event:u,payload:d,joinRef:f}),!1))}},{key:"joinRef",value:function(){return this.joinPush.ref}},{key:"rejoin",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.timeout;this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=ge,this.joinPush.resend(s))}},{key:"trigger",value:function(s,u,d,f){var R=this.onMessage(s,u,d,f);if(u&&!R)throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");for(var L=this.bindings.filter(function(M){return M.event===s}),E=0;E<L.length;E++)L[E].callback(R,d,f||this.joinRef())}},{key:"replyEventName",value:function(s){return"chan_reply_".concat(s)}},{key:"isClosed",value:function(){return this.state===I}},{key:"isErrored",value:function(){return this.state===Z}},{key:"isJoined",value:function(){return this.state===Q}},{key:"isJoining",value:function(){return this.state===ge}},{key:"isLeaving",value:function(){return this.state===re}}]),b}(),Y={HEADER_LENGTH:1,META_LENGTH:4,KINDS:{push:0,reply:1,broadcast:2},encode:function(b,s){if(b.payload.constructor===ArrayBuffer)return s(this.binaryEncode(b));var u=[b.join_ref,b.ref,b.topic,b.event,b.payload];return s(JSON.stringify(u))},decode:function(b,s){if(b.constructor===ArrayBuffer)return s(this.binaryDecode(b));var u=o(JSON.parse(b),5);return s({join_ref:u[0],ref:u[1],topic:u[2],event:u[3],payload:u[4]})},binaryEncode:function(b){var s=b.join_ref,u=b.ref,d=b.event,f=b.topic,R=b.payload,L=this.META_LENGTH+s.length+u.length+f.length+d.length,E=new ArrayBuffer(this.HEADER_LENGTH+L),M=new DataView(E),j=0;M.setUint8(j++,this.KINDS.push),M.setUint8(j++,s.length),M.setUint8(j++,u.length),M.setUint8(j++,f.length),M.setUint8(j++,d.length),Array.from(s,function(F){return M.setUint8(j++,F.charCodeAt(0))}),Array.from(u,function(F){return M.setUint8(j++,F.charCodeAt(0))}),Array.from(f,function(F){return M.setUint8(j++,F.charCodeAt(0))}),Array.from(d,function(F){return M.setUint8(j++,F.charCodeAt(0))});var D=new Uint8Array(E.byteLength+R.byteLength);return D.set(new Uint8Array(E),0),D.set(new Uint8Array(R),E.byteLength),D.buffer},binaryDecode:function(b){var s=new DataView(b),u=s.getUint8(0),d=new TextDecoder;switch(u){case this.KINDS.push:return this.decodePush(b,s,d);case this.KINDS.reply:return this.decodeReply(b,s,d);case this.KINDS.broadcast:return this.decodeBroadcast(b,s,d)}},decodePush:function(b,s,u){var d=s.getUint8(1),f=s.getUint8(2),R=s.getUint8(3),L=this.HEADER_LENGTH+this.META_LENGTH-1,E=u.decode(b.slice(L,L+d));L+=d;var M=u.decode(b.slice(L,L+f));L+=f;var j=u.decode(b.slice(L,L+R));return L+=R,{join_ref:E,ref:null,topic:M,event:j,payload:b.slice(L,b.byteLength)}},decodeReply:function(b,s,u){var d=s.getUint8(1),f=s.getUint8(2),R=s.getUint8(3),L=s.getUint8(4),E=this.HEADER_LENGTH+this.META_LENGTH,M=u.decode(b.slice(E,E+d));E+=d;var j=u.decode(b.slice(E,E+f));E+=f;var D=u.decode(b.slice(E,E+R));E+=R;var F=u.decode(b.slice(E,E+L));E+=L;var me=b.slice(E,b.byteLength);return{join_ref:M,ref:j,topic:D,event:Ee,payload:{status:F,response:me}}},decodeBroadcast:function(b,s,u){var d=s.getUint8(1),f=s.getUint8(2),R=this.HEADER_LENGTH+2,L=u.decode(b.slice(R,R+d));R+=d;var E=u.decode(b.slice(R,R+f));return R+=f,{join_ref:null,ref:null,topic:L,event:E,payload:b.slice(R,b.byteLength)}}},Le=function(){function b(s){var u=this,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};k(this,b),this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=d.timeout||1e4,this.transport=d.transport||m.WebSocket||Me,this.defaultEncoder=Y.encode.bind(Y),this.defaultDecoder=Y.decode.bind(Y),this.closeWasClean=!1,this.unloaded=!1,this.binaryType=d.binaryType||"arraybuffer",this.transport!==Me?(this.encode=d.encode||this.defaultEncoder,this.decode=d.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder),v&&v.addEventListener&&v.addEventListener("beforeunload",function(f){u.conn&&(u.unloaded=!0,u.abnormalClose("unloaded"))}),this.heartbeatIntervalMs=d.heartbeatIntervalMs||3e4,this.rejoinAfterMs=function(f){return d.rejoinAfterMs?d.rejoinAfterMs(f):[1e3,2e3,5e3][f-1]||1e4},this.reconnectAfterMs=function(f){return u.unloaded?100:d.reconnectAfterMs?d.reconnectAfterMs(f):[10,50,100,150,200,250,500,1e3,2e3][f-1]||5e3},this.logger=d.logger||null,this.longpollerTimeout=d.longpollerTimeout||2e4,this.params=B(d.params||{}),this.endPoint="".concat(s,"/").concat(Ge),this.vsn=d.vsn||"2.0.0",this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new He(function(){u.teardown(function(){return u.connect()})},this.reconnectAfterMs)}return C(b,[{key:"protocol",value:function(){return location.protocol.match(/^https/)?"wss":"ws"}},{key:"endPointURL",value:function(){var s=V.appendParams(V.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return s.charAt(0)!=="/"?s:s.charAt(1)==="/"?"".concat(this.protocol(),":").concat(s):"".concat(this.protocol(),"://").concat(location.host).concat(s)}},{key:"disconnect",value:function(s,u,d){this.closeWasClean=!0,this.reconnectTimer.reset(),this.teardown(s,u,d)}},{key:"connect",value:function(s){var u=this;s&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=B(s)),this.conn||(this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=function(){return u.onConnOpen()},this.conn.onerror=function(d){return u.onConnError(d)},this.conn.onmessage=function(d){return u.onConnMessage(d)},this.conn.onclose=function(d){return u.onConnClose(d)})}},{key:"log",value:function(s,u,d){this.logger(s,u,d)}},{key:"hasLogger",value:function(){return this.logger!==null}},{key:"onOpen",value:function(s){var u=this.makeRef();return this.stateChangeCallbacks.open.push([u,s]),u}},{key:"onClose",value:function(s){var u=this.makeRef();return this.stateChangeCallbacks.close.push([u,s]),u}},{key:"onError",value:function(s){var u=this.makeRef();return this.stateChangeCallbacks.error.push([u,s]),u}},{key:"onMessage",value:function(s){var u=this.makeRef();return this.stateChangeCallbacks.message.push([u,s]),u}},{key:"onConnOpen",value:function(){this.hasLogger()&&this.log("transport","connected to ".concat(this.endPointURL())),this.unloaded=!1,this.closeWasClean=!1,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach(function(s){return(0,o(s,2)[1])()})}},{key:"heartbeatTimeout",value:function(){this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.abnormalClose("heartbeat timeout"))}},{key:"resetHeartbeat",value:function(){var s=this;this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,clearTimeout(this.heartbeatTimer),setTimeout(function(){return s.sendHeartbeat()},this.heartbeatIntervalMs))}},{key:"teardown",value:function(s,u,d){var f=this;if(!this.conn)return s&&s();this.waitForBufferDone(function(){f.conn&&(u?f.conn.close(u,d||""):f.conn.close()),f.waitForSocketClosed(function(){f.conn&&(f.conn.onclose=function(){},f.conn=null),s&&s()})})}},{key:"waitForBufferDone",value:function(s){var u=this,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;d!==5&&this.conn&&this.conn.bufferedAmount?setTimeout(function(){u.waitForBufferDone(s,d+1)},150*d):s()}},{key:"waitForSocketClosed",value:function(s){var u=this,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;d!==5&&this.conn&&this.conn.readyState!==_?setTimeout(function(){u.waitForSocketClosed(s,d+1)},150*d):s()}},{key:"onConnClose",value:function(s){this.hasLogger()&&this.log("transport","close",s),this.triggerChanError(),clearTimeout(this.heartbeatTimer),this.closeWasClean||this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(function(u){return(0,o(u,2)[1])(s)})}},{key:"onConnError",value:function(s){this.hasLogger()&&this.log("transport",s),this.triggerChanError(),this.stateChangeCallbacks.error.forEach(function(u){return(0,o(u,2)[1])(s)})}},{key:"triggerChanError",value:function(){this.channels.forEach(function(s){s.isErrored()||s.isLeaving()||s.isClosed()||s.trigger(Ie)})}},{key:"connectionState",value:function(){switch(this.conn&&this.conn.readyState){case A:return"connecting";case H:return"open";case q:return"closing";default:return"closed"}}},{key:"isConnected",value:function(){return this.connectionState()==="open"}},{key:"remove",value:function(s){this.off(s.stateChangeRefs),this.channels=this.channels.filter(function(u){return u.joinRef()!==s.joinRef()})}},{key:"off",value:function(s){for(var u in this.stateChangeCallbacks)this.stateChangeCallbacks[u]=this.stateChangeCallbacks[u].filter(function(d){var f=o(d,1)[0];return s.indexOf(f)===-1})}},{key:"channel",value:function(s){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=new $(s,u,this);return this.channels.push(d),d}},{key:"push",value:function(s){var u=this;if(this.hasLogger()){var d=s.topic,f=s.event,R=s.payload,L=s.ref,E=s.join_ref;this.log("push","".concat(d," ").concat(f," (").concat(E,", ").concat(L,")"),R)}this.isConnected()?this.encode(s,function(M){return u.conn.send(M)}):this.sendBuffer.push(function(){return u.encode(s,function(M){return u.conn.send(M)})})}},{key:"makeRef",value:function(){var s=this.ref+1;return s===this.ref?this.ref=0:this.ref=s,this.ref.toString()}},{key:"sendHeartbeat",value:function(){var s=this;this.pendingHeartbeatRef&&!this.isConnected()||(this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatTimer=setTimeout(function(){return s.heartbeatTimeout()},this.heartbeatIntervalMs))}},{key:"abnormalClose",value:function(s){this.closeWasClean=!1,this.isConnected()&&this.conn.close(1e3,s)}},{key:"flushSendBuffer",value:function(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(function(s){return s()}),this.sendBuffer=[])}},{key:"onConnMessage",value:function(s){var u=this;this.decode(s.data,function(d){var f=d.topic,R=d.event,L=d.payload,E=d.ref,M=d.join_ref;E&&E===u.pendingHeartbeatRef&&(clearTimeout(u.heartbeatTimer),u.pendingHeartbeatRef=null,setTimeout(function(){return u.sendHeartbeat()},u.heartbeatIntervalMs)),u.hasLogger()&&u.log("receive","".concat(L.status||""," ").concat(f," ").concat(R," ").concat(E&&"("+E+")"||""),L);for(var j=0;j<u.channels.length;j++){var D=u.channels[j];D.isMember(f,R,L,M)&&D.trigger(R,L,E,M)}for(var F=0;F<u.stateChangeCallbacks.message.length;F++)(0,o(u.stateChangeCallbacks.message[F],2)[1])(d)})}},{key:"leaveOpenTopic",value:function(s){var u=this.channels.find(function(d){return d.topic===s&&(d.isJoined()||d.isJoining())});u&&(this.hasLogger()&&this.log("transport",'leaving duplicate topic "'.concat(s,'"')),u.leave())}}]),b}(),Me=function(){function b(s){k(this,b),this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(s),this.readyState=A,this.poll()}return C(b,[{key:"normalizeEndpoint",value:function(s){return s.replace("ws://","http://").replace("wss://","https://").replace(new RegExp("(.*)/"+Ge),"$1/"+z)}},{key:"endpointURL",value:function(){return V.appendParams(this.pollEndpoint,{token:this.token})}},{key:"closeAndRetry",value:function(){this.close(),this.readyState=A}},{key:"ontimeout",value:function(){this.onerror("timeout"),this.closeAndRetry()}},{key:"poll",value:function(){var s=this;this.readyState!==H&&this.readyState!==A||V.request("GET",this.endpointURL(),"application/json",null,this.timeout,this.ontimeout.bind(this),function(u){if(u){var d=u.status,f=u.token,R=u.messages;s.token=f}else d=0;switch(d){case 200:R.forEach(function(L){setTimeout(function(){s.onmessage({data:L})},0)}),s.poll();break;case 204:s.poll();break;case 410:s.readyState=H,s.onopen(),s.poll();break;case 403:s.onerror(),s.close();break;case 0:case 500:s.onerror(),s.closeAndRetry();break;default:throw new Error("unhandled poll status ".concat(d))}})}},{key:"send",value:function(s){var u=this;V.request("POST",this.endpointURL(),"application/json",s,this.timeout,this.onerror.bind(this,"timeout"),function(d){d&&d.status===200||(u.onerror(d&&d.status),u.closeAndRetry())})}},{key:"close",value:function(s,u){this.readyState=_,this.onclose()}}]),b}(),V=function(){function b(){k(this,b)}return C(b,null,[{key:"request",value:function(s,u,d,f,R,L,E){if(m.XDomainRequest){var M=new XDomainRequest;this.xdomainRequest(M,s,u,f,R,L,E)}else{var j=new m.XMLHttpRequest;this.xhrRequest(j,s,u,d,f,R,L,E)}}},{key:"xdomainRequest",value:function(s,u,d,f,R,L,E){var M=this;s.timeout=R,s.open(u,d),s.onload=function(){var j=M.parseJSON(s.responseText);E&&E(j)},L&&(s.ontimeout=L),s.onprogress=function(){},s.send(f)}},{key:"xhrRequest",value:function(s,u,d,f,R,L,E,M){var j=this;s.open(u,d,!0),s.timeout=L,s.setRequestHeader("Content-Type",f),s.onerror=function(){M&&M(null)},s.onreadystatechange=function(){if(s.readyState===j.states.complete&&M){var D=j.parseJSON(s.responseText);M(D)}},E&&(s.ontimeout=E),s.send(R)}},{key:"parseJSON",value:function(s){if(!s||s==="")return null;try{return JSON.parse(s)}catch(u){return console&&console.log("failed to parse JSON response",s),null}}},{key:"serialize",value:function(s,u){var d=[];for(var f in s)if(s.hasOwnProperty(f)){var R=u?"".concat(u,"[").concat(f,"]"):f,L=s[f];r(L)==="object"?d.push(this.serialize(L,R)):d.push(encodeURIComponent(R)+"="+encodeURIComponent(L))}return d.join("&")}},{key:"appendParams",value:function(s,u){if(Object.keys(u).length===0)return s;var d=s.match(/\?/)?"&":"?";return"".concat(s).concat(d).concat(this.serialize(u))}}]),b}();V.states={complete:4};var Ye=function(){function b(s){var u=this,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};k(this,b);var f=d.events||{state:"presence_state",diff:"presence_diff"};this.state={},this.pendingDiffs=[],this.channel=s,this.joinRef=null,this.caller={onJoin:function(){},onLeave:function(){},onSync:function(){}},this.channel.on(f.state,function(R){var L=u.caller,E=L.onJoin,M=L.onLeave,j=L.onSync;u.joinRef=u.channel.joinRef(),u.state=b.syncState(u.state,R,E,M),u.pendingDiffs.forEach(function(D){u.state=b.syncDiff(u.state,D,E,M)}),u.pendingDiffs=[],j()}),this.channel.on(f.diff,function(R){var L=u.caller,E=L.onJoin,M=L.onLeave,j=L.onSync;u.inPendingSyncState()?u.pendingDiffs.push(R):(u.state=b.syncDiff(u.state,R,E,M),j())})}return C(b,[{key:"onJoin",value:function(s){this.caller.onJoin=s}},{key:"onLeave",value:function(s){this.caller.onLeave=s}},{key:"onSync",value:function(s){this.caller.onSync=s}},{key:"list",value:function(s){return b.list(this.state,s)}},{key:"inPendingSyncState",value:function(){return!this.joinRef||this.joinRef!==this.channel.joinRef()}}],[{key:"syncState",value:function(s,u,d,f){var R=this,L=this.clone(s),E={},M={};return this.map(L,function(j,D){u[j]||(M[j]=D)}),this.map(u,function(j,D){var F=L[j];if(F){var me=D.metas.map(function(se){return se.phx_ref}),Fe=F.metas.map(function(se){return se.phx_ref}),ie=D.metas.filter(function(se){return Fe.indexOf(se.phx_ref)<0}),ae=F.metas.filter(function(se){return me.indexOf(se.phx_ref)<0});ie.length>0&&(E[j]=D,E[j].metas=ie),ae.length>0&&(M[j]=R.clone(F),M[j].metas=ae)}else E[j]=D}),this.syncDiff(L,{joins:E,leaves:M},d,f)}},{key:"syncDiff",value:function(s,u,d,f){var R=u.joins,L=u.leaves,E=this.clone(s);return d||(d=function(){}),f||(f=function(){}),this.map(R,function(M,j){var D=E[M];if(E[M]=j,D){var F,me=E[M].metas.map(function(ie){return ie.phx_ref}),Fe=D.metas.filter(function(ie){return me.indexOf(ie.phx_ref)<0});(F=E[M].metas).unshift.apply(F,n(Fe))}d(M,D,j)}),this.map(L,function(M,j){var D=E[M];if(D){var F=j.metas.map(function(me){return me.phx_ref});D.metas=D.metas.filter(function(me){return F.indexOf(me.phx_ref)<0}),f(M,D,j),D.metas.length===0&&delete E[M]}}),E}},{key:"list",value:function(s,u){return u||(u=function(d,f){return f}),this.map(s,function(d,f){return u(d,f)})}},{key:"map",value:function(s,u){return Object.getOwnPropertyNames(s).map(function(d){return u(d,s[d])})}},{key:"clone",value:function(s){return JSON.parse(JSON.stringify(s))}}]),b}(),He=function(){function b(s,u){k(this,b),this.callback=s,this.timerCalc=u,this.timer=null,this.tries=0}return C(b,[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:"scheduleTimeout",value:function(){var s=this;clearTimeout(this.timer),this.timer=setTimeout(function(){s.tries=s.tries+1,s.callback()},this.timerCalc(this.tries+1))}}]),b}()}])})});var cr=lr((qi,hr)=>{(function(e,t){typeof define=="function"&&define.amd?define(t):typeof qi=="object"?hr.exports=t():e.NProgress=t()})(qi,function(){var e={};e.version="0.2.0";var t=e.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};e.configure=function(v){var m,A;for(m in v)A=v[m],A!==void 0&&v.hasOwnProperty(m)&&(t[m]=A);return this},e.status=null,e.set=function(v){var m=e.isStarted();v=i(v,t.minimum,1),e.status=v===1?null:v;var A=e.render(!m),H=A.querySelector(t.barSelector),q=t.speed,_=t.easing;return A.offsetWidth,o(function(I){t.positionUsing===""&&(t.positionUsing=e.getPositioningCSS()),l(H,r(v,q,_)),v===1?(l(A,{transition:"none",opacity:1}),A.offsetWidth,setTimeout(function(){l(A,{transition:"all "+q+"ms linear",opacity:0}),setTimeout(function(){e.remove(),I()},q)},q)):setTimeout(I,q)}),this},e.isStarted=function(){return typeof e.status=="number"},e.start=function(){e.status||e.set(0);var v=function(){setTimeout(function(){!e.status||(e.trickle(),v())},t.trickleSpeed)};return t.trickle&&v(),this},e.done=function(v){return!v&&!e.status?this:e.inc(.3+.5*Math.random()).set(1)},e.inc=function(v){var m=e.status;return m?(typeof v!="number"&&(v=(1-m)*i(Math.random()*m,.1,.95)),m=i(m+v,0,.994),e.set(m)):e.start()},e.trickle=function(){return e.inc(Math.random()*t.trickleRate)},function(){var v=0,m=0;e.promise=function(A){return!A||A.state()==="resolved"?this:(m===0&&e.start(),v++,m++,A.always(function(){m--,m===0?(v=0,e.done()):e.set((v-m)/v)}),this)}}(),e.render=function(v){if(e.isRendered())return document.getElementById("nprogress");k(document.documentElement,"nprogress-busy");var m=document.createElement("div");m.id="nprogress",m.innerHTML=t.template;var A=m.querySelector(t.barSelector),H=v?"-100":n(e.status||0),q=document.querySelector(t.parent),_;return l(A,{transition:"all 0 linear",transform:"translate3d("+H+"%,0,0)"}),t.showSpinner||(_=m.querySelector(t.spinnerSelector),_&&x(_)),q!=document.body&&k(q,"nprogress-custom-parent"),q.appendChild(m),m},e.remove=function(){T(document.documentElement,"nprogress-busy"),T(document.querySelector(t.parent),"nprogress-custom-parent");var v=document.getElementById("nprogress");v&&x(v)},e.isRendered=function(){return!!document.getElementById("nprogress")},e.getPositioningCSS=function(){var v=document.body.style,m="WebkitTransform"in v?"Webkit":"MozTransform"in v?"Moz":"msTransform"in v?"ms":"OTransform"in v?"O":"";return m+"Perspective"in v?"translate3d":m+"Transform"in v?"translate":"margin"};function i(v,m,A){return v<m?m:v>A?A:v}function n(v){return(-1+v)*100}function r(v,m,A){var H;return t.positionUsing==="translate3d"?H={transform:"translate3d("+n(v)+"%,0,0)"}:t.positionUsing==="translate"?H={transform:"translate("+n(v)+"%,0)"}:H={"margin-left":n(v)+"%"},H.transition="all "+m+"ms "+A,H}var o=function(){var v=[];function m(){var A=v.shift();A&&A(m)}return function(A){v.push(A),v.length==1&&m()}}(),l=function(){var v=["Webkit","O","Moz","ms"],m={};function A(I){return I.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(Z,Q){return Q.toUpperCase()})}function H(I){var Z=document.body.style;if(I in Z)return I;for(var Q=v.length,ge=I.charAt(0).toUpperCase()+I.slice(1),re;Q--;)if(re=v[Q]+ge,re in Z)return re;return I}function q(I){return I=A(I),m[I]||(m[I]=H(I))}function _(I,Z,Q){Z=q(Z),I.style[Z]=Q}return function(I,Z){var Q=arguments,ge,re;if(Q.length==2)for(ge in Z)re=Z[ge],re!==void 0&&Z.hasOwnProperty(ge)&&_(I,ge,re);else _(I,Q[1],Q[2])}}();function g(v,m){var A=typeof v=="string"?v:C(v);return A.indexOf(" "+m+" ")>=0}function k(v,m){var A=C(v),H=A+m;g(A,m)||(v.className=H.substring(1))}function T(v,m){var A=C(v),H;!g(v,m)||(H=A.replace(" "+m+" "," "),v.className=H.substring(1,H.length-1))}function C(v){return(" "+(v.className||"")+" ").replace(/\s+/gi," ")}function x(v){v&&v.parentNode&&v.parentNode.removeChild(v)}return e})});"use strict";(function(){var e=t();function t(){if(typeof window.CustomEvent=="function")return window.CustomEvent;function r(o,l){l=l||{bubbles:!1,cancelable:!1,detail:void 0};var g=document.createEvent("CustomEvent");return g.initCustomEvent(o,l.bubbles,l.cancelable,l.detail),g}return r.prototype=window.Event.prototype,r}function i(r,o){var l=document.createElement("input");return l.type="hidden",l.name=r,l.value=o,l}function n(r,o){var l=r.getAttribute("data-to"),g=i("_method",r.getAttribute("data-method")),k=i("_csrf_token",r.getAttribute("data-csrf")),T=document.createElement("form"),C=r.getAttribute("target");T.method=r.getAttribute("data-method")==="get"?"get":"post",T.action=l,T.style.display="hidden",C?T.target=C:o&&(T.target="_blank"),T.appendChild(k),T.appendChild(g),document.body.appendChild(T),T.submit()}window.addEventListener("click",function(r){for(var o=r.target;o&&o.getAttribute;){var l=new e("phoenix.link.click",{bubbles:!0,cancelable:!0});if(!o.dispatchEvent(l))return r.preventDefault(),r.stopImmediatePropagation(),!1;if(o.getAttribute("data-method"))return n(o,r.metaKey||r.shiftKey),r.preventDefault(),!1;o=o.parentNode}},!1),window.addEventListener("phoenix.link.click",function(r){var o=r.target.getAttribute("data-confirm");o&&!window.confirm(o)&&r.preventDefault()},!1)})();var Hi=ar(ur()),Dn=ar(cr());var dr="consecutive-reloads",fr=10,To=[1e3,3e3],_o=3e4,pr=["phx-click-loading","phx-change-loading","phx-submit-loading","phx-keydown-loading","phx-keyup-loading","phx-blur-loading","phx-focus-loading"],Ve="data-phx-component",Ki="data-phx-link",xo="track-static",Po="data-phx-link-state",Qe="data-phx-ref",gr="track-uploads",Ct="data-phx-upload-ref",Gi="data-phx-preflighted-refs",Eo="data-phx-done-refs",mr="drop-target",Qi="data-phx-active-refs",Zi="phx:live-file:updated",en="data-phx-skip",vr="data-phx-remove",br="page-loading",yr="phx-connected",pi="phx-disconnected",kr="phx-no-feedback",wr="phx-error",zt="data-phx-parent-id",Sr="data-phx-main",gi="data-phx-root-id",Lo="trigger-action",Cr="feedback-for",Ar="phx-has-focused",Do=["text","textarea","number","email","password","search","tel","url","date","time"],Tr=["checkbox","radio"],_r="phx-has-submitted",pt="data-phx-session",Ut=`[${pt}]`,qt="data-phx-static",tn="data-phx-readonly",mi="data-phx-disabled",nn="disable-with",vi="data-phx-disable-with-restore",bi="hook",Ro="debounce",Io="throttle",rn="update",Mo="key",Ze="phxPrivate",xr="auto-recover",sn="phx:live-socket:debug",on="phx:live-socket:profiling",ln="phx:live-socket:latency-sim",Oo="progress",Ho=1,No=200,Uo="phx-",jo=3e4,Kt="debounce-trigger",yi="throttled",Pr="debounce-prev-key",Fo={debounce:300,throttle:300},Er="d",et="s",je="c",Lr="e",Dr="r",Rr="t",Bo=class{constructor(e,t,i){this.liveSocket=i,this.entry=e,this.offset=0,this.chunkSize=t,this.chunkTimer=null,this.uploadChannel=i.channel(`lvu:${e.ref}`,{token:e.metadata()})}error(e){clearTimeout(this.chunkTimer),this.uploadChannel.leave(),this.entry.error(e)}upload(){this.uploadChannel.onError(e=>this.error(e)),this.uploadChannel.join().receive("ok",e=>this.readNextChunk()).receive("error",e=>this.error(e))}isDone(){return this.offset>=this.entry.file.size}readNextChunk(){let e=new window.FileReader,t=this.entry.file.slice(this.offset,this.chunkSize+this.offset);e.onload=i=>{if(i.target.error===null)this.offset+=i.target.result.byteLength,this.pushChunk(i.target.result);else return _e("Read error: "+i.target.error)},e.readAsArrayBuffer(t)}pushChunk(e){!this.uploadChannel.isJoined()||this.uploadChannel.push("chunk",e).receive("ok",()=>{this.entry.progress(this.offset/this.entry.file.size*100),this.isDone()||(this.chunkTimer=setTimeout(()=>this.readNextChunk(),this.liveSocket.getLatencySim()||0))})}},_e=(e,t)=>console.error&&console.error(e,t);function $o(){let e=new Set,t=document.querySelectorAll("*[id]");for(let i=0,n=t.length;i<n;i++)e.has(t[i].id)?console.error(`Multiple IDs detected: ${t[i].id}. Ensure unique element ids.`):e.add(t[i].id)}var Vo=(e,t,i,n)=>{e.liveSocket.isDebugEnabled()&&console.log(`${e.id} ${t}: ${i} - `,n)},an=e=>typeof e=="function"?e:function(){return e},Gt=e=>JSON.parse(JSON.stringify(e)),Qt=(e,t,i)=>{do{if(e.matches(`[${t}]`))return e;e=e.parentElement||e.parentNode}while(e!==null&&e.nodeType===1&&!(i&&i.isSameNode(e)||e.matches(Ut)));return null},Zt=e=>e!==null&&typeof e=="object"&&!(e instanceof Array),Wo=(e,t)=>JSON.stringify(e)===JSON.stringify(t),Ir=e=>{for(let t in e)return!1;return!0},nt=(e,t)=>e&&t(e),Jo=function(e,t,i,n){e.forEach(r=>{new Bo(r,i.config.chunk_size,n).upload()})},Mr={canPushState(){return typeof history.pushState!="undefined"},dropLocal(e,t,i){return e.removeItem(this.localKey(t,i))},updateLocal(e,t,i,n,r){let o=this.getLocal(e,t,i),l=this.localKey(t,i),g=o===null?n:r(o);return e.setItem(l,JSON.stringify(g)),g},getLocal(e,t,i){return JSON.parse(e.getItem(this.localKey(t,i)))},updateCurrentState(e){!this.canPushState()||history.replaceState(e(history.state||{}),"",window.location.href)},pushState(e,t,i){if(this.canPushState()){if(i!==window.location.href){if(t.type=="redirect"&&t.scroll){let r=history.state||{};r.scroll=t.scroll,history.replaceState(r,"",window.location.href)}delete t.scroll,history[e+"State"](t,"",i||null);let n=this.getHashTargetEl(window.location.hash);n?n.scrollIntoView():t.type==="redirect"&&window.scroll(0,0)}}else this.redirect(i)},setCookie(e,t){document.cookie=`${e}=${t}`},getCookie(e){return document.cookie.replace(new RegExp(`(?:(?:^|.*;s*)${e}s*=s*([^;]*).*$)|^.*$`),"$1")},redirect(e,t){t&&Mr.setCookie("__phoenix_flash__",t+"; max-age=60000; path=/"),window.location=e},localKey(e,t){return`${e}-${t}`},getHashTargetEl(e){let t=e.toString().substring(1);if(t!=="")return document.getElementById(t)||document.querySelector(`a[name="${t}"]`)}},gt=Mr,rt={byId(e){return document.getElementById(e)||_e(`no id found for ${e}`)},removeClass(e,t){e.classList.remove(t),e.classList.length===0&&e.removeAttribute("class")},all(e,t,i){if(!e)return[];let n=Array.from(e.querySelectorAll(t));return i?n.forEach(i):n},childNodeLength(e){let t=document.createElement("template");return t.innerHTML=e,t.content.childElementCount},isUploadInput(e){return e.type==="file"&&e.getAttribute(Ct)!==null},findUploadInputs(e){return this.all(e,`input[type="file"][${Ct}]`)},findComponentNodeList(e,t){return this.filterWithinSameLiveView(this.all(e,`[${Ve}="${t}"]`),e)},isPhxDestroyed(e){return!!(e.id&&rt.private(e,"destroyed"))},markPhxChildDestroyed(e){e.setAttribute(pt,""),this.putPrivate(e,"destroyed",!0)},findPhxChildrenInFragment(e,t){let i=document.createElement("template");return i.innerHTML=e,this.findPhxChildren(i.content,t)},isIgnored(e,t){return(e.getAttribute(t)||e.getAttribute("data-phx-update"))==="ignore"},isPhxUpdate(e,t,i){return e.getAttribute&&i.indexOf(e.getAttribute(t))>=0},findPhxChildren(e,t){return this.all(e,`${Ut}[${zt}="${t}"]`)},findParentCIDs(e,t){let i=new Set(t);return t.reduce((n,r)=>{let o=`[${Ve}="${r}"] [${Ve}]`;return this.filterWithinSameLiveView(this.all(e,o),e).map(l=>parseInt(l.getAttribute(Ve))).forEach(l=>n.delete(l)),n},i)},filterWithinSameLiveView(e,t){return t.querySelector(Ut)?e.filter(i=>this.withinSameLiveView(i,t)):e},withinSameLiveView(e,t){for(;e=e.parentNode;){if(e.isSameNode(t))return!0;if(e.getAttribute(pt)!==null)return!1}},private(e,t){return e[Ze]&&e[Ze][t]},deletePrivate(e,t){e[Ze]&&delete e[Ze][t]},putPrivate(e,t,i){e[Ze]||(e[Ze]={}),e[Ze][t]=i},copyPrivates(e,t){t[Ze]&&(e[Ze]=Gt(t[Ze]))},putTitle(e){let t=document.querySelector("title"),{prefix:i,suffix:n}=t.dataset;document.title=`${i||""}${e}${n||""}`},debounce(e,t,i,n,r,o,l){let g=e.getAttribute(i),k=e.getAttribute(r);g===""&&(g=n),k===""&&(k=o);let T=g||k;switch(T){case null:return l();case"blur":this.once(e,"debounce-blur")&&e.addEventListener("blur",()=>l());return;default:let C=parseInt(T),x=()=>k?this.deletePrivate(e,yi):l(),v=this.incCycle(e,Kt,x);if(isNaN(C))return _e(`invalid throttle/debounce value: ${T}`);if(k){let A=!1;if(t.type==="keydown"){let H=this.private(e,Pr);this.putPrivate(e,Pr,t.key),A=H!==t.key}if(!A&&this.private(e,yi))return!1;l(),this.putPrivate(e,yi,!0),setTimeout(()=>this.triggerCycle(e,Kt),C)}else setTimeout(()=>this.triggerCycle(e,Kt,v),C);let m=e.form;m&&this.once(m,"bind-debounce")&&m.addEventListener("submit",()=>{Array.from(new FormData(m).entries(),([A])=>{let H=m.querySelector(`[name="${A}"]`);this.incCycle(H,Kt),this.deletePrivate(H,yi)})}),this.once(e,"bind-debounce")&&e.addEventListener("blur",()=>this.triggerCycle(e,Kt))}},triggerCycle(e,t,i){let[n,r]=this.private(e,t);i||(i=n),i===n&&(this.incCycle(e,t),r())},once(e,t){return this.private(e,t)===!0?!1:(this.putPrivate(e,t,!0),!0)},incCycle(e,t,i=function(){}){let[n]=this.private(e,t)||[0,i];return n++,this.putPrivate(e,t,[n,i]),n},discardError(e,t,i){let n=t.getAttribute&&t.getAttribute(i),r=n&&e.querySelector(`[id="${n}"], [name="${n}"]`);!r||this.private(r,Ar)||this.private(r.form,_r)||t.classList.add(kr)},showError(e,t){(e.id||e.name)&&this.all(e.form,`[${t}="${e.id}"], [${t}="${e.name}"]`,i=>{this.removeClass(i,kr)})},isPhxChild(e){return e.getAttribute&&e.getAttribute(zt)},dispatchEvent(e,t,i={}){let n=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:i});e.dispatchEvent(n)},cloneNode(e,t){if(typeof t=="undefined")return e.cloneNode(!0);{let i=e.cloneNode(!1);return i.innerHTML=t,i}},mergeAttrs(e,t,i={}){let n=i.exclude||[],r=i.isIgnored,o=t.attributes;for(let g=o.length-1;g>=0;g--){let k=o[g].name;n.indexOf(k)<0&&e.setAttribute(k,t.getAttribute(k))}let l=e.attributes;for(let g=l.length-1;g>=0;g--){let k=l[g].name;r?k.startsWith("data-")&&!t.hasAttribute(k)&&e.removeAttribute(k):t.hasAttribute(k)||e.removeAttribute(k)}},mergeFocusedInput(e,t){e instanceof HTMLSelectElement||rt.mergeAttrs(e,t,{except:["value"]}),t.readOnly?e.setAttribute("readonly",!0):e.removeAttribute("readonly")},hasSelectionRange(e){return e.setSelectionRange&&(e.type==="text"||e.type==="textarea")},restoreFocus(e,t,i){if(!rt.isTextualInput(e))return;let n=e.matches(":focus");e.readOnly&&e.blur(),n||e.focus(),this.hasSelectionRange(e)&&e.setSelectionRange(t,i)},isFormInput(e){return/^(?:input|select|textarea)$/i.test(e.tagName)&&e.type!=="button"},syncAttrsToProps(e){e instanceof HTMLInputElement&&Tr.indexOf(e.type.toLocaleLowerCase())>=0&&(e.checked=e.getAttribute("checked")!==null)},syncPropsToAttrs(e){if(e instanceof HTMLSelectElement){let t=e.options.item(e.selectedIndex);t&&t.getAttribute("selected")===null&&t.setAttribute("selected","")}},isTextualInput(e){return Do.indexOf(e.type)>=0},isNowTriggerFormExternal(e,t){return e.getAttribute&&e.getAttribute(t)!==null},syncPendingRef(e,t,i){let n=e.getAttribute(Qe);return n===null?!0:rt.isFormInput(e)||e.getAttribute(i)!==null?(rt.isUploadInput(e)&&rt.mergeAttrs(e,t,{isIgnored:!0}),rt.putPrivate(e,Qe,t),!1):(pr.forEach(r=>{e.classList.contains(r)&&t.classList.add(r)}),t.setAttribute(Qe,n),!0)},cleanChildNodes(e,t){if(rt.isPhxUpdate(e,t,["append","prepend"])){let i=[];e.childNodes.forEach(n=>{n.id||(n.nodeType===Node.TEXT_NODE&&n.nodeValue.trim()===""||_e(`only HTML element tags with an id are allowed inside containers with phx-update.

removing illegal node: "${(n.outerHTML||n.nodeValue).trim()}"

`),i.push(n))}),i.forEach(n=>n.remove())}},replaceRootContainer(e,t,i){let n=new Set(["id",pt,qt,Sr]);if(e.tagName.toLowerCase()===t.toLowerCase())return Array.from(e.attributes).filter(r=>!n.has(r.name.toLowerCase())).forEach(r=>e.removeAttribute(r.name)),Object.keys(i).filter(r=>!n.has(r.toLowerCase())).forEach(r=>e.setAttribute(r,i[r])),e;{let r=document.createElement(t);return Object.keys(i).forEach(o=>r.setAttribute(o,i[o])),n.forEach(o=>r.setAttribute(o,e.getAttribute(o))),r.innerHTML=e.innerHTML,e.replaceWith(r),r}}},P=rt,un=class{static isActive(e,t){let i=t._phxRef===void 0,r=e.getAttribute(Qi).split(",").indexOf(xe.genFileRef(t))>=0;return t.size>0&&(i||r)}static isPreflighted(e,t){return e.getAttribute(Gi).split(",").indexOf(xe.genFileRef(t))>=0&&this.isActive(e,t)}constructor(e,t,i){this.ref=xe.genFileRef(t),this.fileEl=e,this.file=t,this.view=i,this.meta=null,this._isCancelled=!1,this._isDone=!1,this._progress=0,this._lastProgressSent=-1,this._onDone=function(){},this._onElUpdated=this.onElUpdated.bind(this),this.fileEl.addEventListener(Zi,this._onElUpdated)}metadata(){return this.meta}progress(e){this._progress=Math.floor(e),this._progress>this._lastProgressSent&&(this._progress>=100?(this._progress=100,this._lastProgressSent=100,this._isDone=!0,this.view.pushFileProgress(this.fileEl,this.ref,100,()=>{xe.untrackFile(this.fileEl,this.file),this._onDone()})):(this._lastProgressSent=this._progress,this.view.pushFileProgress(this.fileEl,this.ref,this._progress)))}cancel(){this._isCancelled=!0,this._isDone=!0,this._onDone()}isDone(){return this._isDone}error(e="failed"){this.view.pushFileProgress(this.fileEl,this.ref,{error:e}),xe.clearFiles(this.fileEl)}onDone(e){this._onDone=()=>{this.fileEl.removeEventListener(Zi,this._onElUpdated),e()}}onElUpdated(){this.fileEl.getAttribute(Qi).split(",").indexOf(this.ref)===-1&&this.cancel()}toPreflightPayload(){return{last_modified:this.file.lastModified,name:this.file.name,size:this.file.size,type:this.file.type,ref:this.ref}}uploader(e){if(this.meta.uploader){let t=e[this.meta.uploader]||_e(`no uploader configured for ${this.meta.uploader}`);return{name:this.meta.uploader,callback:t}}else return{name:"channel",callback:Jo}}zipPostFlight(e){this.meta=e.entries[this.ref],this.meta||_e(`no preflight upload response returned with ref ${this.ref}`,{input:this.fileEl,response:e})}},Yo=0,xe=class{static genFileRef(e){let t=e._phxRef;return t!==void 0?t:(e._phxRef=(Yo++).toString(),e._phxRef)}static getEntryDataURL(e,t,i){let n=this.activeFiles(e).find(r=>this.genFileRef(r)===t);i(URL.createObjectURL(n))}static hasUploadsInProgress(e){let t=0;return P.findUploadInputs(e).forEach(i=>{i.getAttribute(Gi)!==i.getAttribute(Eo)&&t++}),t>0}static serializeUploads(e){let t=this.activeFiles(e),i={};return t.forEach(n=>{let r={path:e.name},o=e.getAttribute(Ct);i[o]=i[o]||[],r.ref=this.genFileRef(n),r.name=n.name||r.ref,r.type=n.type,r.size=n.size,i[o].push(r)}),i}static clearFiles(e){e.value=null,e.removeAttribute(Ct),P.putPrivate(e,"files",[])}static untrackFile(e,t){P.putPrivate(e,"files",P.private(e,"files").filter(i=>!Object.is(i,t)))}static trackFiles(e,t){if(e.getAttribute("multiple")!==null){let i=t.filter(n=>!this.activeFiles(e).find(r=>Object.is(r,n)));P.putPrivate(e,"files",this.activeFiles(e).concat(i)),e.value=null}else P.putPrivate(e,"files",t)}static activeFileInputs(e){let t=P.findUploadInputs(e);return Array.from(t).filter(i=>i.files&&this.activeFiles(i).length>0)}static activeFiles(e){return(P.private(e,"files")||[]).filter(t=>un.isActive(e,t))}static inputsAwaitingPreflight(e){let t=P.findUploadInputs(e);return Array.from(t).filter(i=>this.filesAwaitingPreflight(i).length>0)}static filesAwaitingPreflight(e){return this.activeFiles(e).filter(t=>!un.isPreflighted(e,t))}constructor(e,t,i){this.view=t,this.onComplete=i,this._entries=Array.from(xe.filesAwaitingPreflight(e)||[]).map(n=>new un(e,n,t)),this.numEntriesInProgress=this._entries.length}entries(){return this._entries}initAdapterUpload(e,t,i){this._entries=this._entries.map(r=>(r.zipPostFlight(e),r.onDone(()=>{this.numEntriesInProgress--,this.numEntriesInProgress===0&&this.onComplete()}),r));let n=this._entries.reduce((r,o)=>{let{name:l,callback:g}=o.uploader(i.uploaders);return r[l]=r[l]||{callback:g,entries:[]},r[l].entries.push(o),r},{});for(let r in n){let{callback:o,entries:l}=n[r];o(l,t,e,i)}}},Xo={LiveFileUpload:{activeRefs(){return this.el.getAttribute(Qi)},preflightedRefs(){return this.el.getAttribute(Gi)},mounted(){this.preflightedWas=this.preflightedRefs()},updated(){let e=this.preflightedRefs();this.preflightedWas!==e&&(this.preflightedWas=e,e===""&&this.__view.cancelSubmit(this.el.form)),this.activeRefs()===""&&(this.el.value=null),this.el.dispatchEvent(new CustomEvent(Zi))}},LiveImgPreview:{mounted(){this.ref=this.el.getAttribute("data-phx-entry-ref"),this.inputEl=document.getElementById(this.el.getAttribute(Ct)),xe.getEntryDataURL(this.inputEl,this.ref,e=>{this.url=e,this.el.src=e})},destroyed(){URL.revokeObjectURL(this.url)}}},zo=Xo,qo=class{constructor(e,t,i){let n=new Set,r=new Set([...t.children].map(l=>l.id)),o=[];Array.from(e.children).forEach(l=>{if(l.id&&(n.add(l.id),r.has(l.id))){let g=l.previousElementSibling&&l.previousElementSibling.id;o.push({elementId:l.id,previousElementId:g})}}),this.containerId=t.id,this.updateType=i,this.elementsToModify=o,this.elementIdsToAdd=[...r].filter(l=>!n.has(l))}perform(){let e=P.byId(this.containerId);this.elementsToModify.forEach(t=>{t.previousElementId?nt(document.getElementById(t.previousElementId),i=>{nt(document.getElementById(t.elementId),n=>{n.previousElementSibling&&n.previousElementSibling.id==i.id||i.insertAdjacentElement("afterend",n)})}):nt(document.getElementById(t.elementId),i=>{i.previousElementSibling==null||e.insertAdjacentElement("afterbegin",i)})}),this.updateType=="prepend"&&this.elementIdsToAdd.reverse().forEach(t=>{nt(document.getElementById(t),i=>e.insertAdjacentElement("afterbegin",i))})}},Or=11;function Ko(e,t){var i=t.attributes,n,r,o,l,g;if(!(t.nodeType===Or||e.nodeType===Or)){for(var k=i.length-1;k>=0;k--)n=i[k],r=n.name,o=n.namespaceURI,l=n.value,o?(r=n.localName||r,g=e.getAttributeNS(o,r),g!==l&&(n.prefix==="xmlns"&&(r=n.name),e.setAttributeNS(o,r,l))):(g=e.getAttribute(r),g!==l&&e.setAttribute(r,l));for(var T=e.attributes,C=T.length-1;C>=0;C--)n=T[C],r=n.name,o=n.namespaceURI,o?(r=n.localName||r,t.hasAttributeNS(o,r)||e.removeAttributeNS(o,r)):t.hasAttribute(r)||e.removeAttribute(r)}}var ki,Go="http://www.w3.org/1999/xhtml",Oe=typeof document=="undefined"?void 0:document,Qo=!!Oe&&"content"in Oe.createElement("template"),Zo=!!Oe&&Oe.createRange&&"createContextualFragment"in Oe.createRange();function el(e){var t=Oe.createElement("template");return t.innerHTML=e,t.content.childNodes[0]}function tl(e){ki||(ki=Oe.createRange(),ki.selectNode(Oe.body));var t=ki.createContextualFragment(e);return t.childNodes[0]}function il(e){var t=Oe.createElement("body");return t.innerHTML=e,t.childNodes[0]}function nl(e){return e=e.trim(),Qo?el(e):Zo?tl(e):il(e)}function wi(e,t){var i=e.nodeName,n=t.nodeName,r,o;return i===n?!0:(r=i.charCodeAt(0),o=n.charCodeAt(0),r<=90&&o>=97?i===n.toUpperCase():o<=90&&r>=97?n===i.toUpperCase():!1)}function rl(e,t){return!t||t===Go?Oe.createElement(e):Oe.createElementNS(t,e)}function sl(e,t){for(var i=e.firstChild;i;){var n=i.nextSibling;t.appendChild(i),i=n}return t}function hn(e,t,i){e[i]!==t[i]&&(e[i]=t[i],e[i]?e.setAttribute(i,""):e.removeAttribute(i))}var Hr={OPTION:function(e,t){var i=e.parentNode;if(i){var n=i.nodeName.toUpperCase();n==="OPTGROUP"&&(i=i.parentNode,n=i&&i.nodeName.toUpperCase()),n==="SELECT"&&!i.hasAttribute("multiple")&&(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),i.selectedIndex=-1)}hn(e,t,"selected")},INPUT:function(e,t){hn(e,t,"checked"),hn(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var i=t.value;e.value!==i&&(e.value=i);var n=e.firstChild;if(n){var r=n.nodeValue;if(r==i||!i&&r==e.placeholder)return;n.nodeValue=i}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var i=-1,n=0,r=e.firstChild,o,l;r;)if(l=r.nodeName&&r.nodeName.toUpperCase(),l==="OPTGROUP")o=r,r=o.firstChild;else{if(l==="OPTION"){if(r.hasAttribute("selected")){i=n;break}n++}r=r.nextSibling,!r&&o&&(r=o.nextSibling,o=null)}e.selectedIndex=i}}},ei=1,ol=11,Nr=3,Ur=8;function At(){}function ll(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}function al(e){return function(i,n,r){if(r||(r={}),typeof n=="string")if(i.nodeName==="#document"||i.nodeName==="HTML"||i.nodeName==="BODY"){var o=n;n=Oe.createElement("html"),n.innerHTML=o}else n=nl(n);var l=r.getNodeKey||ll,g=r.onBeforeNodeAdded||At,k=r.onNodeAdded||At,T=r.onBeforeElUpdated||At,C=r.onElUpdated||At,x=r.onBeforeNodeDiscarded||At,v=r.onNodeDiscarded||At,m=r.onBeforeElChildrenUpdated||At,A=r.childrenOnly===!0,H=Object.create(null),q=[];function _(B){q.push(B)}function I(B,O){if(B.nodeType===ei)for(var $=B.firstChild;$;){var Y=void 0;O&&(Y=l($))?_(Y):(v($),$.firstChild&&I($,O)),$=$.nextSibling}}function Z(B,O,$){x(B)!==!1&&(O&&O.removeChild(B),v(B),I(B,$))}function Q(B){if(B.nodeType===ei||B.nodeType===ol)for(var O=B.firstChild;O;){var $=l(O);$&&(H[$]=O),Q(O),O=O.nextSibling}}Q(i);function ge(B){k(B);for(var O=B.firstChild;O;){var $=O.nextSibling,Y=l(O);if(Y){var Le=H[Y];Le&&wi(O,Le)?(O.parentNode.replaceChild(Le,O),ke(Le,O)):ge(O)}else ge(O);O=$}}function re(B,O,$){for(;O;){var Y=O.nextSibling;($=l(O))?_($):Z(O,B,!0),O=Y}}function ke(B,O,$){var Y=l(O);Y&&delete H[Y],!(!$&&(T(B,O)===!1||(e(B,O),C(B),m(B,O)===!1)))&&(B.nodeName!=="TEXTAREA"?Ie(B,O):Hr.TEXTAREA(B,O))}function Ie(B,O){var $=O.firstChild,Y=B.firstChild,Le,Me,V,Ye,He;e:for(;$;){for(Ye=$.nextSibling,Le=l($);Y;){if(V=Y.nextSibling,$.isSameNode&&$.isSameNode(Y)){$=Ye,Y=V;continue e}Me=l(Y);var b=Y.nodeType,s=void 0;if(b===$.nodeType&&(b===ei?(Le?Le!==Me&&((He=H[Le])?V===He?s=!1:(B.insertBefore(He,Y),Me?_(Me):Z(Y,B,!0),Y=He):s=!1):Me&&(s=!1),s=s!==!1&&wi(Y,$),s&&ke(Y,$)):(b===Nr||b==Ur)&&(s=!0,Y.nodeValue!==$.nodeValue&&(Y.nodeValue=$.nodeValue))),s){$=Ye,Y=V;continue e}Me?_(Me):Z(Y,B,!0),Y=V}if(Le&&(He=H[Le])&&wi(He,$))B.appendChild(He),ke(He,$);else{var u=g($);u!==!1&&(u&&($=u),$.actualize&&($=$.actualize(B.ownerDocument||Oe)),B.appendChild($),ge($))}$=Ye,Y=V}re(B,Y,Me);var d=Hr[B.nodeName];d&&d(B,O)}var ne=i,Ee=ne.nodeType,ct=n.nodeType;if(!A){if(Ee===ei)ct===ei?wi(i,n)||(v(i),ne=sl(i,rl(n.nodeName,n.namespaceURI))):ne=n;else if(Ee===Nr||Ee===Ur){if(ct===Ee)return ne.nodeValue!==n.nodeValue&&(ne.nodeValue=n.nodeValue),ne;ne=n}}if(ne===n)v(i);else{if(n.isSameNode&&n.isSameNode(ne))return;if(ke(ne,n,A),q)for(var bt=0,z=q.length;bt<z;bt++){var Ge=H[q[bt]];Ge&&Z(Ge,Ge.parentNode,!1)}}return!A&&ne!==i&&i.parentNode&&(ne.actualize&&(ne=ne.actualize(i.ownerDocument||Oe)),i.parentNode.replaceChild(ne,i)),ne}}var ul=al(Ko),jr=ul,Si=class{static patchEl(e,t,i){jr(e,t,{childrenOnly:!1,onBeforeElUpdated:(n,r)=>{if(i&&i.isSameNode(n)&&P.isFormInput(n))return P.mergeFocusedInput(n,r),!1}})}constructor(e,t,i,n,r){this.view=e,this.liveSocket=e.liveSocket,this.container=t,this.id=i,this.rootID=e.root.id,this.html=n,this.targetCID=r,this.cidPatch=typeof this.targetCID=="number",this.callbacks={beforeadded:[],beforeupdated:[],beforephxChildAdded:[],afteradded:[],afterupdated:[],afterdiscarded:[],afterphxChildAdded:[]}}before(e,t){this.callbacks[`before${e}`].push(t)}after(e,t){this.callbacks[`after${e}`].push(t)}trackBefore(e,...t){this.callbacks[`before${e}`].forEach(i=>i(...t))}trackAfter(e,...t){this.callbacks[`after${e}`].forEach(i=>i(...t))}markPrunableContentForRemoval(){P.all(this.container,"[phx-update=append] > *, [phx-update=prepend] > *",e=>{e.setAttribute(vr,"")})}perform(){let{view:e,liveSocket:t,container:i,html:n}=this,r=this.isCIDPatch()?this.targetCIDContainer(n):i;if(this.isCIDPatch()&&!r)return;let o=t.getActiveElement(),{selectionStart:l,selectionEnd:g}=o&&P.hasSelectionRange(o)?o:{},k=t.binding(rn),T=t.binding(Cr),C=t.binding(nn),x=t.binding(Lo),v=[],m=[],A=[],H=null,q=t.time("premorph container prep",()=>this.buildDiffHTML(i,n,k,r));return this.trackBefore("added",i),this.trackBefore("updated",i,i),t.time("morphdom",()=>{jr(r,q,{childrenOnly:r.getAttribute(Ve)===null,getNodeKey:_=>P.isPhxDestroyed(_)?null:_.id,onBeforeNodeAdded:_=>(this.trackBefore("added",_),_),onNodeAdded:_=>{P.isNowTriggerFormExternal(_,x)&&(H=_),P.discardError(r,_,T),P.isPhxChild(_)&&e.ownsElement(_)&&this.trackAfter("phxChildAdded",_),v.push(_)},onNodeDiscarded:_=>{P.isPhxChild(_)&&t.destroyViewByEl(_),this.trackAfter("discarded",_)},onBeforeNodeDiscarded:_=>_.getAttribute&&_.getAttribute(vr)!==null?!0:!(_.parentNode!==null&&P.isPhxUpdate(_.parentNode,k,["append","prepend"])&&_.id||this.skipCIDSibling(_)),onElUpdated:_=>{P.isNowTriggerFormExternal(_,x)&&(H=_),m.push(_)},onBeforeElUpdated:(_,I)=>{if(P.cleanChildNodes(I,k),this.skipCIDSibling(I))return!1;if(P.isIgnored(_,k))return this.trackBefore("updated",_,I),P.mergeAttrs(_,I,{isIgnored:!0}),m.push(_),!1;if(_.type==="number"&&_.validity&&_.validity.badInput)return!1;if(!P.syncPendingRef(_,I,C))return P.isUploadInput(_)&&(this.trackBefore("updated",_,I),m.push(_)),!1;if(P.isPhxChild(I)){let Q=_.getAttribute(pt);return P.mergeAttrs(_,I,{exclude:[qt]}),Q!==""&&_.setAttribute(pt,Q),_.setAttribute(gi,this.rootID),!1}return P.copyPrivates(I,_),P.discardError(r,I,T),P.syncPropsToAttrs(I),o&&_.isSameNode(o)&&P.isFormInput(_)&&!this.forceFocusedSelectUpdate(_,I)?(this.trackBefore("updated",_,I),P.mergeFocusedInput(_,I),P.syncAttrsToProps(_),m.push(_),!1):(P.isPhxUpdate(I,k,["append","prepend"])&&A.push(new qo(_,I,I.getAttribute(k))),P.syncAttrsToProps(I),this.trackBefore("updated",_,I),!0)}})}),t.isDebugEnabled()&&$o(),A.length>0&&t.time("post-morph append/prepend restoration",()=>{A.forEach(_=>_.perform())}),t.silenceEvents(()=>P.restoreFocus(o,l,g)),P.dispatchEvent(document,"phx:update"),v.forEach(_=>this.trackAfter("added",_)),m.forEach(_=>this.trackAfter("updated",_)),H&&(t.disconnect(),H.submit()),!0}forceFocusedSelectUpdate(e,t){let i=["select","select-one","select-multiple"].find(n=>n===e.type);return e.multiple===!0||i&&e.innerHTML!=t.innerHTML}isCIDPatch(){return this.cidPatch}skipCIDSibling(e){return e.nodeType===Node.ELEMENT_NODE&&e.getAttribute(en)!==null}targetCIDContainer(e){if(!this.isCIDPatch())return;let[t,...i]=P.findComponentNodeList(this.container,this.targetCID);return i.length===0&&P.childNodeLength(e)===1?t:t&&t.parentNode}buildDiffHTML(e,t,i,n){let r=this.isCIDPatch(),o=r&&n.getAttribute(Ve)===this.targetCID.toString();if(!r||o)return t;{let l=null,g=document.createElement("template");l=P.cloneNode(n);let[k,...T]=P.findComponentNodeList(l,this.targetCID);return g.innerHTML=t,T.forEach(C=>C.remove()),Array.from(l.childNodes).forEach(C=>{C.id&&C.nodeType===Node.ELEMENT_NODE&&C.getAttribute(Ve)!==this.targetCID.toString()&&(C.setAttribute(en,""),C.innerHTML="")}),Array.from(g.content.childNodes).forEach(C=>l.insertBefore(C,k)),k.remove(),l.outerHTML}}},Fr=class{static extract(e){let{[Dr]:t,[Lr]:i,[Rr]:n}=e;return delete e[Dr],delete e[Lr],delete e[Rr],{diff:e,title:n,reply:t||null,events:i||[]}}constructor(e,t){this.viewId=e,this.rendered={},this.mergeDiff(t)}parentViewId(){return this.viewId}toString(e){return this.recursiveToString(this.rendered,this.rendered[je],e)}recursiveToString(e,t=e[je],i){i=i?new Set(i):null;let n={buffer:"",components:t,onlyCids:i};return this.toOutputBuffer(e,n),n.buffer}componentCIDs(e){return Object.keys(e[je]||{}).map(t=>parseInt(t))}isComponentOnlyDiff(e){return e[je]?Object.keys(e).length===1:!1}getComponent(e,t){return e[je][t]}mergeDiff(e){let t=e[je],i={};if(delete e[je],this.rendered=this.mutableMerge(this.rendered,e),this.rendered[je]=this.rendered[je]||{},t){let r=this.rendered[je];for(let o in t)t[o]=this.cachedFindComponent(o,t[o],r,t,i);for(var n in t)r[n]=t[n];e[je]=t}}cachedFindComponent(e,t,i,n,r){if(r[e])return r[e];{let o,l,g=t[et];if(typeof g=="number"){let k;g>0?k=this.cachedFindComponent(g,n[g],i,n,r):k=i[-g],l=k[et],o=this.cloneMerge(k,t),o[et]=l}else o=t[et]!==void 0?t:this.cloneMerge(i[e]||{},t);return r[e]=o,o}}mutableMerge(e,t){return t[et]!==void 0?t:(this.doMutableMerge(e,t),e)}doMutableMerge(e,t){for(let i in t){let n=t[i],r=e[i];Zt(n)&&n[et]===void 0&&Zt(r)?this.doMutableMerge(r,n):e[i]=n}}cloneMerge(e,t){let i=$e($e({},e),t);for(let n in i){let r=t[n],o=e[n];Zt(r)&&r[et]===void 0&&Zt(o)&&(i[n]=this.cloneMerge(o,r))}return i}componentToString(e){return this.recursiveCIDToString(this.rendered[je],e)}pruneCIDs(e){e.forEach(t=>delete this.rendered[je][t])}get(){return this.rendered}isNewFingerprint(e={}){return!!e[et]}toOutputBuffer(e,t){if(e[Er])return this.comprehensionToBuffer(e,t);let{[et]:i}=e;t.buffer+=i[0];for(let n=1;n<i.length;n++)this.dynamicToBuffer(e[n-1],t),t.buffer+=i[n]}comprehensionToBuffer(e,t){let{[Er]:i,[et]:n}=e;for(let r=0;r<i.length;r++){let o=i[r];t.buffer+=n[0];for(let l=1;l<n.length;l++)this.dynamicToBuffer(o[l-1],t),t.buffer+=n[l]}}dynamicToBuffer(e,t){typeof e=="number"?t.buffer+=this.recursiveCIDToString(t.components,e,t.onlyCids):Zt(e)?this.toOutputBuffer(e,t):t.buffer+=e}recursiveCIDToString(e,t,i){let n=e[t]||_e(`no component for CID ${t}`,e),r=document.createElement("template");r.innerHTML=this.recursiveToString(n,e,i);let o=r.content,l=i&&!i.has(t),[g,k]=Array.from(o.childNodes).reduce(([T,C],x,v)=>x.nodeType===Node.ELEMENT_NODE?x.getAttribute(Ve)?[T,!0]:(x.setAttribute(Ve,t),x.id||(x.id=`${this.parentViewId()}-${t}-${v}`),l&&(x.setAttribute(en,""),x.innerHTML=""),[!0,C]):x.nodeValue.trim()!==""?(_e(`only HTML element tags are allowed at the root of components.

got: "${x.nodeValue.trim()}"

within:
`,r.innerHTML.trim()),x.replaceWith(this.createSpan(x.nodeValue,t)),[!0,C]):(x.remove(),[T,C]),[!1,!1]);return!g&&!k?(_e(`expected at least one HTML element tag inside a component, but the component is empty:
`,r.innerHTML.trim()),this.createSpan("",t).outerHTML):(!g&&k&&_e("expected at least one HTML element tag directly inside a component, but only subcomponents were found. A component must render at least one HTML tag directly inside itself.",r.innerHTML.trim()),r.innerHTML)}createSpan(e,t){let i=document.createElement("span");return i.innerText=e,i.setAttribute(Ve,t),i}},hl=1,ti=class{static makeID(){return hl++}static elementID(e){return e.phxHookId}constructor(e,t,i){this.__view=e,this.__liveSocket=e.liveSocket,this.__callbacks=i,this.__listeners=new Set,this.__isDisconnected=!1,this.el=t,this.el.phxHookId=this.constructor.makeID();for(let n in this.__callbacks)this[n]=this.__callbacks[n]}__mounted(){this.mounted&&this.mounted()}__updated(){this.updated&&this.updated()}__beforeUpdate(){this.beforeUpdate&&this.beforeUpdate()}__destroyed(){this.destroyed&&this.destroyed()}__reconnected(){this.__isDisconnected&&(this.__isDisconnected=!1,this.reconnected&&this.reconnected())}__disconnected(){this.__isDisconnected=!0,this.disconnected&&this.disconnected()}pushEvent(e,t={},i=function(){}){return this.__view.pushHookEvent(null,e,t,i)}pushEventTo(e,t,i={},n=function(){}){return this.__view.withinTargets(e,(r,o)=>r.pushHookEvent(o,t,i,n))}handleEvent(e,t){let i=(n,r)=>r?e:t(n.detail);return window.addEventListener(`phx:hook:${e}`,i),this.__listeners.add(i),i}removeHandleEvent(e){let t=e(null,!0);window.removeEventListener(`phx:hook:${t}`,e),this.__listeners.delete(e)}upload(e,t){return this.__view.dispatchUploads(e,t)}uploadTo(e,t,i){return this.__view.withinTargets(e,n=>n.dispatchUploads(t,i))}__cleanup__(){this.__listeners.forEach(e=>this.removeHandleEvent(e))}},cn=(e,t={})=>{let i=new FormData(e),n=[];i.forEach((o,l,g)=>{o instanceof File&&n.push(l)}),n.forEach(o=>i.delete(o));let r=new URLSearchParams;for(let[o,l]of i.entries())r.append(o,l);for(let o in t)r.append(o,t[o]);return r.toString()},Br=class{constructor(e,t,i,n){this.liveSocket=t,this.flash=n,this.parent=i,this.root=i?i.root:this,this.el=e,this.id=this.el.id,this.ref=0,this.childJoins=0,this.loaderTimer=null,this.pendingDiffs=[],this.pruningCIDs=[],this.redirect=!1,this.href=null,this.joinCount=this.parent?this.parent.joinCount-1:0,this.joinPending=!0,this.destroyed=!1,this.joinCallback=function(){},this.stopCallback=function(){},this.pendingJoinOps=this.parent?null:[],this.viewHooks={},this.uploaders={},this.formSubmits=[],this.children=this.parent?null:{},this.root.children[this.id]={},this.channel=this.liveSocket.channel(`lv:${this.id}`,()=>({redirect:this.redirect?this.href:void 0,url:this.redirect?void 0:this.href||void 0,params:this.connectParams(),session:this.getSession(),static:this.getStatic(),flash:this.flash})),this.showLoader(this.liveSocket.loaderTimeout),this.bindChannel()}setHref(e){this.href=e}setRedirect(e){this.redirect=!0,this.href=e}isMain(){return this.liveSocket.main===this}connectParams(){let e=this.liveSocket.params(this.el),t=P.all(document,`[${this.binding(xo)}]`).map(i=>i.src||i.href).filter(i=>typeof i=="string");return t.length>0&&(e._track_static=t),e._mounts=this.joinCount,e}isConnected(){return this.channel.canPush()}getSession(){return this.el.getAttribute(pt)}getStatic(){let e=this.el.getAttribute(qt);return e===""?null:e}destroy(e=function(){}){this.destroyAllChildren(),this.destroyed=!0,delete this.root.children[this.id],this.parent&&delete this.root.children[this.parent.id][this.id],clearTimeout(this.loaderTimer);let t=()=>{e();for(let i in this.viewHooks)this.destroyHook(this.viewHooks[i])};P.markPhxChildDestroyed(this.el),this.log("destroyed",()=>["the child has been removed from the parent"]),this.channel.leave().receive("ok",t).receive("error",t).receive("timeout",t)}setContainerClasses(...e){this.el.classList.remove(yr,pi,wr),this.el.classList.add(...e)}isLoading(){return this.el.classList.contains(pi)}showLoader(e){if(clearTimeout(this.loaderTimer),e)this.loaderTimer=setTimeout(()=>this.showLoader(),e);else{for(let t in this.viewHooks)this.viewHooks[t].__disconnected();this.setContainerClasses(pi)}}hideLoader(){clearTimeout(this.loaderTimer),this.setContainerClasses(yr)}triggerReconnected(){for(let e in this.viewHooks)this.viewHooks[e].__reconnected()}log(e,t){this.liveSocket.log(this,e,t)}withinTargets(e,t){if(e instanceof HTMLElement)return this.liveSocket.owner(e,i=>t(i,e));if(/^(0|[1-9]\d*)$/.test(e)){let i=P.findComponentNodeList(this.el,e);i.length===0?_e(`no component found matching phx-target of ${e}`):t(this,i[0])}else{let i=Array.from(document.querySelectorAll(e));i.length===0&&_e(`nothing found matching the phx-target selector "${e}"`),i.forEach(n=>this.liveSocket.owner(n,r=>t(r,n)))}}applyDiff(e,t,i){this.log(e,()=>["",Gt(t)]);let{diff:n,reply:r,events:o,title:l}=Fr.extract(t);return l&&P.putTitle(l),i({diff:n,reply:r,events:o}),r}onJoin(e){let{rendered:t,container:i}=e;if(i){let[n,r]=i;this.el=P.replaceRootContainer(this.el,n,r)}this.childJoins=0,this.joinPending=!0,this.flash=null,gt.dropLocal(this.liveSocket.localStorage,window.location.pathname,dr),this.applyDiff("mount",t,({diff:n,events:r})=>{this.rendered=new Fr(this.id,n);let o=this.renderContainer(null,"join");this.dropPendingRefs();let l=this.formsForRecovery(o);this.joinCount++,l.length>0?l.forEach((g,k)=>{this.pushFormRecovery(g,T=>{k===l.length-1&&this.onJoinComplete(T,o,r)})}):this.onJoinComplete(e,o,r)})}dropPendingRefs(){P.all(this.el,`[${Qe}]`,e=>e.removeAttribute(Qe))}onJoinComplete({live_patch:e},t,i){if(this.joinCount>1||this.parent&&!this.parent.isJoinPending())return this.applyJoinPatch(e,t,i);P.findPhxChildrenInFragment(t,this.id).filter(r=>{let o=r.id&&this.el.querySelector(`[id="${r.id}"]`),l=o&&o.getAttribute(qt);return l&&r.setAttribute(qt,l),this.joinChild(r)}).length===0?this.parent?(this.root.pendingJoinOps.push([this,()=>this.applyJoinPatch(e,t,i)]),this.parent.ackJoin(this)):(this.onAllChildJoinsComplete(),this.applyJoinPatch(e,t,i)):this.root.pendingJoinOps.push([this,()=>this.applyJoinPatch(e,t,i)])}attachTrueDocEl(){this.el=P.byId(this.id),this.el.setAttribute(gi,this.root.id)}dispatchEvents(e){e.forEach(([t,i])=>{window.dispatchEvent(new CustomEvent(`phx:hook:${t}`,{detail:i}))})}applyJoinPatch(e,t,i){this.attachTrueDocEl();let n=new Si(this,this.el,this.id,t,null);if(n.markPrunableContentForRemoval(),this.performPatch(n,!1),this.joinNewChildren(),P.all(this.el,`[${this.binding(bi)}], [data-phx-${bi}]`,r=>{let o=this.addHook(r);o&&o.__mounted()}),this.joinPending=!1,this.dispatchEvents(i),this.applyPendingUpdates(),e){let{kind:r,to:o}=e;this.liveSocket.historyPatch(o,r)}this.hideLoader(),this.joinCount>1&&this.triggerReconnected(),this.stopCallback()}triggerBeforeUpdateHook(e,t){this.liveSocket.triggerDOM("onBeforeElUpdated",[e,t]);let i=this.getHook(e),n=i&&P.isIgnored(e,this.binding(rn));if(i&&!e.isEqualNode(t)&&!(n&&Wo(e.dataset,t.dataset)))return i.__beforeUpdate(),i}performPatch(e,t){let i=[],n=!1,r=new Set;return e.after("added",o=>{this.liveSocket.triggerDOM("onNodeAdded",[o]);let l=this.addHook(o);l&&l.__mounted()}),e.after("phxChildAdded",o=>n=!0),e.before("updated",(o,l)=>{this.triggerBeforeUpdateHook(o,l)&&r.add(o.id)}),e.after("updated",o=>{r.has(o.id)&&this.getHook(o).__updated()}),e.after("discarded",o=>{let l=this.componentID(o);typeof l=="number"&&i.indexOf(l)===-1&&i.push(l);let g=this.getHook(o);g&&this.destroyHook(g)}),e.perform(),t&&this.maybePushComponentsDestroyed(i),n}joinNewChildren(){P.findPhxChildren(this.el,this.id).forEach(e=>this.joinChild(e))}getChildById(e){return this.root.children[this.id][e]}getDescendentByEl(e){return e.id===this.id?this:this.children[e.getAttribute(zt)][e.id]}destroyDescendent(e){for(let t in this.root.children)for(let i in this.root.children[t])if(i===e)return this.root.children[t][i].destroy()}joinChild(e){if(!this.getChildById(e.id)){let i=new Br(e,this.liveSocket,this);return this.root.children[this.id][i.id]=i,i.join(),this.childJoins++,!0}}isJoinPending(){return this.joinPending}ackJoin(e){this.childJoins--,this.childJoins===0&&(this.parent?this.parent.ackJoin(this):this.onAllChildJoinsComplete())}onAllChildJoinsComplete(){this.joinCallback(),this.pendingJoinOps.forEach(([e,t])=>{e.isDestroyed()||t()}),this.pendingJoinOps=[]}update(e,t){if(this.isJoinPending()||this.liveSocket.hasPendingLink())return this.pendingDiffs.push({diff:e,events:t});this.rendered.mergeDiff(e);let i=!1;this.rendered.isComponentOnlyDiff(e)?this.liveSocket.time("component patch complete",()=>{P.findParentCIDs(this.el,this.rendered.componentCIDs(e)).forEach(r=>{this.componentPatch(this.rendered.getComponent(e,r),r)&&(i=!0)})}):Ir(e)||this.liveSocket.time("full patch complete",()=>{let n=this.renderContainer(e,"update"),r=new Si(this,this.el,this.id,n,null);i=this.performPatch(r,!0)}),this.dispatchEvents(t),i&&this.joinNewChildren()}renderContainer(e,t){return this.liveSocket.time(`toString diff (${t})`,()=>{let i=this.el.tagName,n=e?this.rendered.componentCIDs(e).concat(this.pruningCIDs):null,r=this.rendered.toString(n);return`<${i}>${r}</${i}>`})}componentPatch(e,t){if(Ir(e))return!1;let i=this.rendered.componentToString(t),n=new Si(this,this.el,this.id,i,t);return this.performPatch(n,!0)}getHook(e){return this.viewHooks[ti.elementID(e)]}addHook(e){if(ti.elementID(e)||!e.getAttribute)return;let t=e.getAttribute(`data-phx-${bi}`)||e.getAttribute(this.binding(bi));if(t&&!this.ownsElement(e))return;let i=this.liveSocket.getHookCallbacks(t);if(i){e.id||_e(`no DOM ID for hook "${t}". Hooks require a unique ID on each element.`,e);let n=new ti(this,e,i);return this.viewHooks[ti.elementID(n.el)]=n,n}else t!==null&&_e(`unknown hook found for "${t}"`,e)}destroyHook(e){e.__destroyed(),e.__cleanup__(),delete this.viewHooks[ti.elementID(e.el)]}applyPendingUpdates(){this.pendingDiffs.forEach(({diff:e,events:t})=>this.update(e,t)),this.pendingDiffs=[]}onChannel(e,t){this.liveSocket.onChannel(this.channel,e,i=>{this.isJoinPending()?this.root.pendingJoinOps.push([this,()=>t(i)]):t(i)})}bindChannel(){this.liveSocket.onChannel(this.channel,"diff",e=>{this.applyDiff("update",e,({diff:t,events:i})=>this.update(t,i))}),this.onChannel("redirect",({to:e,flash:t})=>this.onRedirect({to:e,flash:t})),this.onChannel("live_patch",e=>this.onLivePatch(e)),this.onChannel("live_redirect",e=>this.onLiveRedirect(e)),this.channel.onError(e=>this.onError(e)),this.channel.onClose(e=>this.onClose(e))}destroyAllChildren(){for(let e in this.root.children[this.id])this.getChildById(e).destroy()}onLiveRedirect(e){let{to:t,kind:i,flash:n}=e,r=this.expandURL(t);this.liveSocket.historyRedirect(r,i,n)}onLivePatch(e){let{to:t,kind:i}=e;this.href=this.expandURL(t),this.liveSocket.historyPatch(t,i)}expandURL(e){return e.startsWith("/")?`${window.location.protocol}//${window.location.host}${e}`:e}onRedirect({to:e,flash:t}){this.liveSocket.redirect(e,t)}isDestroyed(){return this.destroyed}join(e){this.parent||(this.stopCallback=this.liveSocket.withPageLoading({to:this.href,kind:"initial"})),this.joinCallback=()=>e&&e(this.joinCount),this.liveSocket.wrapPush(this,{timeout:!1},()=>this.channel.join().receive("ok",t=>!this.isDestroyed()&&this.onJoin(t)).receive("error",t=>!this.isDestroyed()&&this.onJoinError(t)).receive("timeout",()=>!this.isDestroyed()&&this.onJoinError({reason:"timeout"})))}onJoinError(e){return e.reason==="unauthorized"||e.reason==="stale"?(this.log("error",()=>["unauthorized live_redirect. Falling back to page request",e]),this.onRedirect({to:this.href})):((e.redirect||e.live_redirect)&&(this.joinPending=!1,this.channel.leave()),e.redirect?this.onRedirect(e.redirect):e.live_redirect?this.onLiveRedirect(e.live_redirect):(this.log("error",()=>["unable to join",e]),this.liveSocket.reloadWithJitter(this)))}onClose(e){if(!this.isDestroyed()){if(this.isJoinPending()&&document.visibilityState!=="hidden"||this.liveSocket.hasPendingLink()&&e!=="leave")return this.liveSocket.reloadWithJitter(this);this.destroyAllChildren(),this.liveSocket.dropActiveElement(this),document.activeElement&&document.activeElement.blur(),this.liveSocket.isUnloaded()&&this.showLoader(No)}}onError(e){this.onClose(e),this.log("error",()=>["view crashed",e]),this.liveSocket.isUnloaded()||this.displayError()}displayError(){this.isMain()&&P.dispatchEvent(window,"phx:page-loading-start",{to:this.href,kind:"error"}),this.showLoader(),this.setContainerClasses(pi,wr)}pushWithReply(e,t,i,n=function(){}){if(!this.isConnected())return;let[r,[o]]=e?e():[null,[]],l=function(){};return o&&o.getAttribute(this.binding(br))!==null&&(l=this.liveSocket.withPageLoading({kind:"element",target:o})),typeof i.cid!="number"&&delete i.cid,this.liveSocket.wrapPush(this,{timeout:!0},()=>this.channel.push(t,i,jo).receive("ok",g=>{let k=null;r!==null&&this.undoRefs(r),g.diff&&(k=this.applyDiff("update",g.diff,({diff:T,events:C})=>{this.update(T,C)})),g.redirect&&this.onRedirect(g.redirect),g.live_patch&&this.onLivePatch(g.live_patch),g.live_redirect&&this.onLiveRedirect(g.live_redirect),l(),n(g,k)}))}undoRefs(e){P.all(this.el,`[${Qe}="${e}"]`,t=>{let i=t.getAttribute(mi);t.removeAttribute(Qe),t.getAttribute(tn)!==null&&(t.readOnly=!1,t.removeAttribute(tn)),i!==null&&(t.disabled=i==="true",t.removeAttribute(mi)),pr.forEach(o=>P.removeClass(t,o));let n=t.getAttribute(vi);n!==null&&(t.innerText=n,t.removeAttribute(vi));let r=P.private(t,Qe);if(r){let o=this.triggerBeforeUpdateHook(t,r);Si.patchEl(t,r,this.liveSocket.getActiveElement()),o&&o.__updated(),P.deletePrivate(t,Qe)}})}putRef(e,t){let i=this.ref++,n=this.binding(nn);return e.forEach(r=>{r.classList.add(`phx-${t}-loading`),r.setAttribute(Qe,i);let o=r.getAttribute(n);o!==null&&(r.getAttribute(vi)||r.setAttribute(vi,r.innerText),r.innerText=o)}),[i,e]}componentID(e){let t=e.getAttribute&&e.getAttribute(Ve);return t?parseInt(t):null}targetComponentID(e,t){return e.getAttribute(this.binding("target"))?this.closestComponentID(t):null}closestComponentID(e){return e?nt(e.closest(`[${Ve}]`),t=>this.ownsElement(t)&&this.componentID(t)):null}pushHookEvent(e,t,i,n){if(!this.isConnected())return this.log("hook",()=>["unable to push hook event. LiveView not connected",t,i]),!1;let[r,o]=this.putRef([],"hook");return this.pushWithReply(()=>[r,o],"event",{type:"hook",event:t,value:i,cid:this.closestComponentID(e)},(l,g)=>n(g,r)),r}extractMeta(e,t){let i=this.binding("value-");for(let n=0;n<e.attributes.length;n++){let r=e.attributes[n].name;r.startsWith(i)&&(t[r.replace(i,"")]=e.getAttribute(r))}return e.value!==void 0&&(t.value=e.value,e.tagName==="INPUT"&&Tr.indexOf(e.type)>=0&&!e.checked&&delete t.value),t}pushEvent(e,t,i,n,r){this.pushWithReply(()=>this.putRef([t],e),"event",{type:e,event:n,value:this.extractMeta(t,r),cid:this.targetComponentID(t,i)})}pushKey(e,t,i,n,r){this.pushWithReply(()=>this.putRef([e],i),"event",{type:i,event:n,value:this.extractMeta(e,r),cid:this.targetComponentID(e,t)})}pushFileProgress(e,t,i,n=function(){}){this.liveSocket.withinOwners(e.form,(r,o)=>{r.pushWithReply(null,"progress",{event:e.getAttribute(r.binding(Oo)),ref:e.getAttribute(Ct),entry_ref:t,progress:i,cid:r.targetComponentID(e.form,o)},n)})}pushInput(e,t,i,n,r){let o,l=this.targetComponentID(e.form,t),g=()=>this.putRef([e,e.form],"change"),k=cn(e.form,{_target:n.name});e.files&&e.files.length>0&&xe.trackFiles(e,Array.from(e.files)),o=xe.serializeUploads(e);let T={type:"form",event:i,value:k,uploads:o,cid:l};this.pushWithReply(g,"event",T,C=>{if(P.showError(e,this.liveSocket.binding(Cr)),P.isUploadInput(e)&&e.getAttribute("data-phx-auto-upload")!==null){if(xe.filesAwaitingPreflight(e).length>0){let[x,v]=g();this.uploadFiles(e.form,t,x,l,m=>{r&&r(C),this.triggerAwaitingSubmit(e.form)})}}else r&&r(C)})}triggerAwaitingSubmit(e){let t=this.getScheduledSubmit(e);if(t){let[i,n,r]=t;this.cancelSubmit(e),r()}}getScheduledSubmit(e){return this.formSubmits.find(([t,i])=>t.isSameNode(e))}scheduleSubmit(e,t,i){if(this.getScheduledSubmit(e))return!0;this.formSubmits.push([e,t,i])}cancelSubmit(e){this.formSubmits=this.formSubmits.filter(([t,i,n])=>t.isSameNode(e)?(this.undoRefs(i),!1):!0)}pushFormSubmit(e,t,i,n){let r=C=>!(Qt(C,`${this.binding(rn)}=ignore`,C.form)||Qt(C,"data-phx-update=ignore",C.form)),o=C=>C.hasAttribute(this.binding(nn)),l=C=>C.tagName=="BUTTON",g=C=>["INPUT","TEXTAREA","SELECT"].includes(C.tagName),k=()=>{let C=Array.from(e.elements),x=C.filter(o),v=C.filter(l).filter(r),m=C.filter(g).filter(r);return v.forEach(A=>{A.setAttribute(mi,A.disabled),A.disabled=!0}),m.forEach(A=>{A.setAttribute(tn,A.readOnly),A.readOnly=!0,A.files&&(A.setAttribute(mi,A.disabled),A.disabled=!0)}),e.setAttribute(this.binding(br),""),this.putRef([e].concat(x).concat(v).concat(m),"submit")},T=this.targetComponentID(e,t);if(xe.hasUploadsInProgress(e)){let[C,x]=k();return this.scheduleSubmit(e,C,()=>this.pushFormSubmit(e,t,i,n))}else if(xe.inputsAwaitingPreflight(e).length>0){let[C,x]=k(),v=()=>[C,x];this.uploadFiles(e,t,C,T,m=>{let A=cn(e,{});this.pushWithReply(v,"event",{type:"form",event:i,value:A,cid:T},n)})}else{let C=cn(e);this.pushWithReply(k,"event",{type:"form",event:i,value:C,cid:T},n)}}uploadFiles(e,t,i,n,r){let o=this.joinCount,l=xe.activeFileInputs(e),g=l.length;l.forEach(k=>{let T=new xe(k,this,()=>{g--,g===0&&r()});this.uploaders[k]=T;let C=T.entries().map(v=>v.toPreflightPayload()),x={ref:k.getAttribute(Ct),entries:C,cid:this.targetComponentID(k.form,t)};this.log("upload",()=>["sending preflight request",x]),this.pushWithReply(null,"allow_upload",x,v=>{if(this.log("upload",()=>["got preflight response",v]),v.error){this.undoRefs(i);let[m,A]=v.error;this.log("upload",()=>[`error for entry ${m}`,A])}else{let m=A=>{this.channel.onError(()=>{this.joinCount===o&&A()})};T.initAdapterUpload(v,m,this.liveSocket)}})})}dispatchUploads(e,t){let i=P.findUploadInputs(this.el).filter(n=>n.name===e);i.length===0?_e(`no live file inputs found matching the name "${e}"`):i.length>1?_e(`duplicate live file inputs found matching the name "${e}"`):P.dispatchEvent(i[0],gr,{files:t})}pushFormRecovery(e,t){this.liveSocket.withinOwners(e,(i,n)=>{let r=e.elements[0],o=e.getAttribute(this.binding(xr))||e.getAttribute(this.binding("change"));i.pushInput(r,n,o,r,t)})}pushLinkPatch(e,t,i){let n=this.liveSocket.setPendingLink(e),r=t?()=>this.putRef([t],"click"):null;this.pushWithReply(r,"live_patch",{url:e},o=>{o.link_redirect?this.liveSocket.replaceMain(e,null,i,n):(this.liveSocket.commitPendingLink(n)&&(this.href=e),this.applyPendingUpdates(),i&&i(n))}).receive("timeout",()=>this.liveSocket.redirect(window.location.href))}formsForRecovery(e){if(this.joinCount===0)return[];let t=this.binding("change"),i=document.createElement("template");return i.innerHTML=e,P.all(this.el,`form[${t}]`).filter(n=>this.ownsElement(n)).filter(n=>n.elements.length>0).filter(n=>n.getAttribute(this.binding(xr))!=="ignore").filter(n=>i.content.querySelector(`form[${t}="${n.getAttribute(t)}"]`))}maybePushComponentsDestroyed(e){let t=e.filter(i=>P.findComponentNodeList(this.el,i).length===0);t.length>0&&(this.pruningCIDs.push(...t),this.pushWithReply(null,"cids_will_destroy",{cids:t},()=>{this.pruningCIDs=this.pruningCIDs.filter(n=>t.indexOf(n)!==-1);let i=t.filter(n=>P.findComponentNodeList(this.el,n).length===0);i.length>0&&this.pushWithReply(null,"cids_destroyed",{cids:i},n=>{this.rendered.pruneCIDs(n.cids)})}))}ownsElement(e){return e.getAttribute(zt)===this.id||nt(e.closest(Ut),t=>t.id)===this.id}submitForm(e,t,i){P.putPrivate(e,_r,!0),this.liveSocket.blurActiveElement(this),this.pushFormSubmit(e,t,i,()=>{this.liveSocket.restorePreviouslyActiveFocus()})}binding(e){return this.liveSocket.binding(e)}},$r=class{constructor(e,t,i={}){if(this.unloaded=!1,!t||t.constructor.name==="Object")throw new Error(`
      a phoenix Socket must be provided as the second argument to the LiveSocket constructor. For example:

          import {Socket} from "phoenix"
          import LiveSocket from "phoenix_live_view"
          let liveSocket = new LiveSocket("/live", Socket, {...})
      `);this.socket=new t(e,i),this.bindingPrefix=i.bindingPrefix||Uo,this.opts=i,this.params=an(i.params||{}),this.viewLogger=i.viewLogger,this.metadataCallbacks=i.metadata||{},this.defaults=Object.assign(Gt(Fo),i.defaults||{}),this.activeElement=null,this.prevActive=null,this.silenced=!1,this.main=null,this.linkRef=1,this.roots={},this.href=window.location.href,this.pendingLink=null,this.currentLocation=Gt(window.location),this.hooks=i.hooks||{},this.uploaders=i.uploaders||{},this.loaderTimeout=i.loaderTimeout||Ho,this.localStorage=i.localStorage||window.localStorage,this.sessionStorage=i.sessionStorage||window.sessionStorage,this.boundTopLevelEvents=!1,this.domCallbacks=Object.assign({onNodeAdded:an(),onBeforeElUpdated:an()},i.dom||{}),window.addEventListener("pagehide",n=>{this.unloaded=!0}),this.socket.onOpen(()=>{this.isUnloaded()&&window.location.reload()})}isProfileEnabled(){return this.sessionStorage.getItem(on)==="true"}isDebugEnabled(){return this.sessionStorage.getItem(sn)==="true"}enableDebug(){this.sessionStorage.setItem(sn,"true")}enableProfiling(){this.sessionStorage.setItem(on,"true")}disableDebug(){this.sessionStorage.removeItem(sn)}disableProfiling(){this.sessionStorage.removeItem(on)}enableLatencySim(e){this.enableDebug(),console.log("latency simulator enabled for the duration of this browser session. Call disableLatencySim() to disable"),this.sessionStorage.setItem(ln,e)}disableLatencySim(){this.sessionStorage.removeItem(ln)}getLatencySim(){let e=this.sessionStorage.getItem(ln);return e?parseInt(e):null}getSocket(){return this.socket}connect(){let e=()=>{this.joinRootViews()&&(this.bindTopLevelEvents(),this.socket.connect())};["complete","loaded","interactive"].indexOf(document.readyState)>=0?e():document.addEventListener("DOMContentLoaded",()=>e())}disconnect(e){this.socket.disconnect(e)}triggerDOM(e,t){this.domCallbacks[e](...t)}time(e,t){if(!this.isProfileEnabled()||!console.time)return t();console.time(e);let i=t();return console.timeEnd(e),i}log(e,t,i){if(this.viewLogger){let[n,r]=i();this.viewLogger(e,t,n,r)}else if(this.isDebugEnabled()){let[n,r]=i();Vo(e,t,n,r)}}onChannel(e,t,i){e.on(t,n=>{let r=this.getLatencySim();r?(console.log(`simulating ${r}ms of latency from server to client`),setTimeout(()=>i(n),r)):i(n)})}wrapPush(e,t,i){let n=this.getLatencySim(),r=e.joinCount;if(!n)return t.timeout?i().receive("timeout",()=>{e.joinCount===r&&!e.isDestroyed()&&this.reloadWithJitter(e,()=>{this.log(e,"timeout",()=>["received timeout while communicating with server. Falling back to hard refresh for recovery"])})}):i();console.log(`simulating ${n}ms of latency from client to server`);let o={receives:[],receive(l,g){this.receives.push([l,g])}};return setTimeout(()=>{e.isDestroyed()||o.receives.reduce((l,[g,k])=>l.receive(g,k),i())},n),o}reloadWithJitter(e,t){e.destroy(),this.disconnect();let[i,n]=To,r=Math.floor(Math.random()*(n-i+1))+i,o=gt.updateLocal(this.localStorage,window.location.pathname,dr,0,l=>l+1);t?t():this.log(e,"join",()=>[`encountered ${o} consecutive reloads`]),o>fr&&(this.log(e,"join",()=>[`exceeded ${fr} consecutive reloads. Entering failsafe mode`]),r=_o),setTimeout(()=>{this.hasPendingLink()?window.location=this.pendingLink:window.location.reload()},r)}getHookCallbacks(e){return e&&e.startsWith("Phoenix.")?zo[e.split(".")[1]]:this.hooks[e]}isUnloaded(){return this.unloaded}isConnected(){return this.socket.isConnected()}getBindingPrefix(){return this.bindingPrefix}binding(e){return`${this.getBindingPrefix()}${e}`}channel(e,t){return this.socket.channel(e,t)}joinRootViews(){let e=!1;return P.all(document,`${Ut}:not([${zt}])`,t=>{if(!this.getRootById(t.id)){let i=this.newRootView(t);i.setHref(this.getHref()),i.join(),t.getAttribute(Sr)&&(this.main=i)}e=!0}),e}redirect(e,t){this.disconnect(),gt.redirect(e,t)}replaceMain(e,t,i=null,n=this.setPendingLink(e)){let r=this.main.el,o=P.cloneNode(r,"");this.main.showLoader(this.loaderTimeout),this.main.destroy(),this.main=this.newRootView(o,t),this.main.setRedirect(e),this.main.join(l=>{l===1&&this.commitPendingLink(n)&&(r.replaceWith(o),i&&i())})}isPhxView(e){return e.getAttribute&&e.getAttribute(pt)!==null}newRootView(e,t){let i=new Br(e,this,null,t);return this.roots[i.id]=i,i}owner(e,t){let i=nt(e.closest(Ut),n=>this.getViewByEl(n));i&&t(i)}withinOwners(e,t){this.owner(e,i=>{let n=e.getAttribute(this.binding("target"));n===null?t(i,e):i.withinTargets(n,t)})}getViewByEl(e){let t=e.getAttribute(gi);return nt(this.getRootById(t),i=>i.getDescendentByEl(e))}getRootById(e){return this.roots[e]}destroyAllViews(){for(let e in this.roots)this.roots[e].destroy(),delete this.roots[e]}destroyViewByEl(e){let t=this.getRootById(e.getAttribute(gi));t&&t.destroyDescendent(e.id)}setActiveElement(e){if(this.activeElement===e)return;this.activeElement=e;let t=()=>{e===this.activeElement&&(this.activeElement=null),e.removeEventListener("mouseup",this),e.removeEventListener("touchend",this)};e.addEventListener("mouseup",t),e.addEventListener("touchend",t)}getActiveElement(){return document.activeElement===document.body?this.activeElement||document.activeElement:document.activeElement||document.body}dropActiveElement(e){this.prevActive&&e.ownsElement(this.prevActive)&&(this.prevActive=null)}restorePreviouslyActiveFocus(){this.prevActive&&this.prevActive!==document.body&&this.prevActive.focus()}blurActiveElement(){this.prevActive=this.getActiveElement(),this.prevActive!==document.body&&this.prevActive.blur()}bindTopLevelEvents(){this.boundTopLevelEvents||(this.boundTopLevelEvents=!0,document.body.addEventListener("click",function(){}),window.addEventListener("pageshow",e=>{e.persisted&&(this.getSocket().disconnect(),this.withPageLoading({to:window.location.href,kind:"redirect"}),window.location.reload())},!0),this.bindNav(),this.bindClicks(),this.bindForms(),this.bind({keyup:"keyup",keydown:"keydown"},(e,t,i,n,r,o,l)=>{let g=n.getAttribute(this.binding(Mo)),k=e.key&&e.key.toLowerCase();g&&g.toLowerCase()!==k||i.pushKey(n,r,t,o,$e({key:e.key},this.eventMeta(t,e,n)))}),this.bind({blur:"focusout",focus:"focusin"},(e,t,i,n,r,o,l)=>{l||i.pushEvent(t,n,r,o,this.eventMeta(t,e,n))}),this.bind({blur:"blur",focus:"focus"},(e,t,i,n,r,o,l)=>{l&&!l!=="window"&&i.pushEvent(t,n,r,o,this.eventMeta(t,e,n))}),window.addEventListener("dragover",e=>e.preventDefault()),window.addEventListener("drop",e=>{e.preventDefault();let t=nt(Qt(e.target,this.binding(mr)),r=>r.getAttribute(this.binding(mr))),i=t&&document.getElementById(t),n=Array.from(e.dataTransfer.files||[]);!i||i.disabled||n.length===0||!(i.files instanceof FileList)||(xe.trackFiles(i,n),i.dispatchEvent(new Event("input",{bubbles:!0})))}),this.on(gr,e=>{let t=e.target;if(!P.isUploadInput(t))return;let i=Array.from(e.detail.files||[]).filter(n=>n instanceof File||n instanceof Blob);xe.trackFiles(t,i),t.dispatchEvent(new Event("input",{bubbles:!0}))}))}eventMeta(e,t,i){let n=this.metadataCallbacks[e];return n?n(t,i):{}}setPendingLink(e){return this.linkRef++,this.pendingLink=e,this.linkRef}commitPendingLink(e){return this.linkRef!==e?!1:(this.href=this.pendingLink,this.pendingLink=null,!0)}getHref(){return this.href}hasPendingLink(){return!!this.pendingLink}bind(e,t){for(let i in e){let n=e[i];this.on(n,r=>{let o=this.binding(i),l=this.binding(`window-${i}`),g=r.target.getAttribute&&r.target.getAttribute(o);g?this.debounce(r.target,r,()=>{this.withinOwners(r.target,(k,T)=>{t(r,i,k,r.target,T,g,null)})}):P.all(document,`[${l}]`,k=>{let T=k.getAttribute(l);this.debounce(k,r,()=>{this.withinOwners(k,(C,x)=>{t(r,i,C,k,x,T,"window")})})})})}}bindClicks(){this.bindClick("click","click",!1),this.bindClick("mousedown","capture-click",!0)}bindClick(e,t,i){let n=this.binding(t);window.addEventListener(e,r=>{if(!this.isConnected())return;let o=null;i?o=r.target.matches(`[${n}]`)?r.target:r.target.querySelector(`[${n}]`):o=Qt(r.target,n);let l=o&&o.getAttribute(n);!l||(o.getAttribute("href")==="#"&&r.preventDefault(),this.debounce(o,r,()=>{this.withinOwners(o,(g,k)=>{g.pushEvent("click",o,k,l,this.eventMeta("click",r,o))})}))},i)}bindNav(){if(!gt.canPushState())return;history.scrollRestoration&&(history.scrollRestoration="manual");let e=null;window.addEventListener("scroll",t=>{clearTimeout(e),e=setTimeout(()=>{gt.updateCurrentState(i=>Object.assign(i,{scroll:window.scrollY}))},100)}),window.addEventListener("popstate",t=>{if(!this.registerNewLocation(window.location))return;let{type:i,id:n,root:r,scroll:o}=t.state||{},l=window.location.href;this.main.isConnected()&&i==="patch"&&n===this.main.id?this.main.pushLinkPatch(l,null):this.replaceMain(l,null,()=>{r&&this.replaceRootHistory(),typeof o=="number"&&setTimeout(()=>{window.scrollTo(0,o)},0)})},!1),window.addEventListener("click",t=>{let i=Qt(t.target,Ki),n=i&&i.getAttribute(Ki),r=t.metaKey||t.ctrlKey||t.button===1;if(!n||!this.isConnected()||!this.main||r)return;let o=i.href,l=i.getAttribute(Po);if(t.preventDefault(),this.pendingLink!==o)if(n==="patch")this.pushHistoryPatch(o,l,i);else if(n==="redirect")this.historyRedirect(o,l);else throw new Error(`expected ${Ki} to be "patch" or "redirect", got: ${n}`)},!1)}withPageLoading(e,t){P.dispatchEvent(window,"phx:page-loading-start",e);let i=()=>P.dispatchEvent(window,"phx:page-loading-stop",e);return t?t(i):i}pushHistoryPatch(e,t,i){this.withPageLoading({to:e,kind:"patch"},n=>{this.main.pushLinkPatch(e,i,r=>{this.historyPatch(e,t,r),n()})})}historyPatch(e,t,i=this.setPendingLink(e)){!this.commitPendingLink(i)||(gt.pushState(t,{type:"patch",id:this.main.id},e),this.registerNewLocation(window.location))}historyRedirect(e,t,i){let n=window.scrollY;this.withPageLoading({to:e,kind:"redirect"},r=>{this.replaceMain(e,i,()=>{gt.pushState(t,{type:"redirect",id:this.main.id,scroll:n},e),this.registerNewLocation(window.location),r()})})}replaceRootHistory(){gt.pushState("replace",{root:!0,type:"patch",id:this.main.id})}registerNewLocation(e){let{pathname:t,search:i}=this.currentLocation;return t+i===e.pathname+e.search?!1:(this.currentLocation=Gt(e),!0)}bindForms(){let e=0;this.on("submit",t=>{let i=t.target.getAttribute(this.binding("submit"));!i||(t.preventDefault(),t.target.disabled=!0,this.withinOwners(t.target,(n,r)=>n.submitForm(t.target,r,i)))},!1);for(let t of["change","input"])this.on(t,i=>{let n=i.target,r=n.form&&n.form.getAttribute(this.binding("change"));if(!r||n.type==="number"&&n.validity&&n.validity.badInput)return;let o=e;e++;let{at:l,type:g}=P.private(n,"prev-iteration")||{};l===o-1&&t!==g||(P.putPrivate(n,"prev-iteration",{at:o,type:t}),this.debounce(n,i,()=>{this.withinOwners(n.form,(k,T)=>{P.putPrivate(n,Ar,!0),P.isTextualInput(n)||this.setActiveElement(n),k.pushInput(n,T,r,i.target)})}))},!1)}debounce(e,t,i){let n=this.binding(Ro),r=this.binding(Io),o=this.defaults.debounce.toString(),l=this.defaults.throttle.toString();P.debounce(e,t,n,o,r,l,i)}silenceEvents(e){this.silenced=!0,e(),this.silenced=!1}on(e,t){window.addEventListener(e,i=>{this.silenced||t(i)})}};var Vr={phoenix:[242,110,64],elixir:[75,68,115],red:[255,99,132],orange:[255,159,64],yellow:[255,205,86],green:[75,192,192],blue:[54,162,253],purple:[153,102,255],grey:[201,203,207]},Wr=Object.keys(Vr),Jr={at:e=>{let[t,i,n]=Jr.rgb(e);return`rgb(${t}, ${i}, ${n})`},rgb:e=>Vr[Wr[e%Wr.length]]},Yr={at:e=>{let[t,i,n]=Jr.rgb(e);return{stroke:`rgb(${t}, ${i}, ${n})`,fill:`rgb(${t}, ${i}, ${n}, 0.1)`}}};function cl(e,t){let i=null;function n(){i=null,e()}return function(){clearTimeout(i),i=setTimeout(n,t)}}function jt(e,t,i,n){let r;i=i||0,n=n||t.length-1;let o=n<=2147483647;for(;n-i>1;)r=o?i+n>>1:Tt((i+n)/2),t[r]<e?i=r:n=r;return e-t[i]<=t[n]-e?i:n}function dl(e,t,i){let n=oe,r=-oe;for(let o=t;o<=i;o++)e[o]!=null&&(n=ot(n,e[o]),r=ii(r,e[o]));return[n,r]}function Xr(e,t,i,n){let r=t-e,o=zr(r||mt(t)||1),l=Tt(o),g=dn(10,l)*i,k=r==0?g:0,T=fn(pl(e-k,g)),C=fn(Ai(t+k,g));return n&&(r==0?t>0?(T=0,C=t*2):t<0&&(C=0,T=e*2):(C-t<g&&(C+=g),e-T<g&&(T-=g),e>=0&&T<0&&(T=0),t<=0&&C>0&&(C=0))),[T,C]}var st=Math,mt=st.abs,Tt=st.floor,ee=st.round,fl=st.ceil,ot=st.min,ii=st.max,dn=st.pow,zr=st.log10,Ci=st.PI,oe=1/0;function Ft(e,t){return ee(e/t)*t}function qr(e,t,i){return ot(ii(e,t),i)}function _t(e){return typeof e=="function"?e:()=>e}function Ai(e,t){return fl(e/t)*t}function pl(e,t){return Tt(e/t)*t}function ze(e){return ee(e*1e3)/1e3}function fn(e){return ee(e*1e6)/1e6}var Kr=Array.isArray;function gl(e){return typeof e=="string"}function Gr(e){return typeof e=="object"&&e!==null}function Bt(e){let t;if(Kr(e))t=e.map(Bt);else if(Gr(e)){t={};for(var i in e)t[i]=Bt(e[i])}else t=e;return t}function Pe(e){let t=arguments;for(let i=1;i<t.length;i++){let n=t[i];for(let r in n)Gr(e[r])?Pe(e[r],Bt(n[r])):e[r]=Bt(n[r])}return e}var te="width",le="height",de="top",Qr="bottom",fe="left",Zr="right",es="firstChild",ml="createElement",$t="#000",ts="classList",pn="mousemove",gn="mousedown",Ti="mouseup",is="mouseenter",ns="mouseleave",mn="dblclick",rs="resize",ss="scroll",os=requestAnimationFrame,vn=document,_i=window,pe=devicePixelRatio;function vt(e,t){t!=null&&e[ts].add(t)}function vl(e,t){e[ts].remove(t)}function K(e,t,i){e.style[t]=i+"px"}function lt(e,t,i,n){let r=vn[ml](e);return t!=null&&vt(r,t),i!=null&&i.insertBefore(r,n),r}function qe(e,t){return lt("div",e,t)}function Vt(e,t,i){e.style.transform="translate("+t+"px,"+i+"px)"}var ls={passive:!0};function Ke(e,t,i){t.addEventListener(e,i,ls)}function bn(e,t,i){t.removeEventListener(e,i,ls)}var as=["January","February","March","April","May","June","July","August","September","October","November","December"],us=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function hs(e){return e.slice(0,3)}var bl=us.map(hs),yl=as.map(hs),kl={MMMM:as,MMM:yl,WWWW:us,WWW:bl};function ni(e){return(e<10?"0":"")+e}function wl(e){return(e<10?"00":e<100?"0":"")+e}var Wt="getFullYear",xt="getMonth",xi="getDate",cs="getDay",Pt="getHours",Pi="getMinutes",yn="getSeconds",ds="getMilliseconds",Sl={YYYY:e=>e[Wt](),YY:e=>(e[Wt]()+"").slice(2),MMMM:(e,t)=>t.MMMM[e[xt]()],MMM:(e,t)=>t.MMM[e[xt]()],MM:e=>ni(e[xt]()+1),M:e=>e[xt]()+1,DD:e=>ni(e[xi]()),D:e=>e[xi](),WWWW:(e,t)=>t.WWWW[e[cs]()],WWW:(e,t)=>t.WWW[e[cs]()],HH:e=>ni(e[Pt]()),H:e=>e[Pt](),h:e=>{let t=e[Pt]();return t==0?12:t>12?t-12:t},AA:e=>e[Pt]()>=12?"PM":"AM",aa:e=>e[Pt]()>=12?"pm":"am",a:e=>e[Pt]()>=12?"p":"a",mm:e=>ni(e[Pi]()),m:e=>e[Pi](),ss:e=>ni(e[yn]()),s:e=>e[yn](),fff:e=>wl(e[ds]())};function fs(e,t){t=t||kl;let i=[],n=/\{([a-z]+)\}|[^{]+/gi,r;for(;r=n.exec(e);)i.push(r[0][0]=="{"?Sl[r[1]]:r[0]);return o=>{let l="";for(let g=0;g<i.length;g++)l+=typeof i[g]=="string"?i[g]:i[g](o,t);return l}}function Cl(e,t){let i;return t=="Etc/UTC"?i=new Date(+e+e.getTimezoneOffset()*6e4):(i=new Date(e.toLocaleString("en-US",{timeZone:t})),i.setMilliseconds(e[ds]())),i}function kn(e,t,i){let n=[];for(let r=e;r<t;r++)for(let o=0;o<i.length;o++){let l=i[o]*dn(10,r);n.push(+l.toFixed(mt(r)))}return n}var wn=[1,2,5],Al=kn(-12,0,wn),ps=kn(0,12,wn),Tl=Al.concat(ps),_l=1,at=60,We=at*at,ye=We*24,Et=ye*30,ut=ye*365,xl=[5e-4].concat(kn(-3,0,wn),[1,5,10,15,30,at,at*5,at*10,at*15,at*30,We,We*2,We*3,We*4,We*6,We*8,We*12,ye,ye*2,ye*3,ye*4,ye*5,ye*6,ye*7,ye*8,ye*9,ye*10,ye*15,Et,Et*2,Et*3,Et*4,Et*6,ut,ut*2,ut*5,ut*10,ut*25,ut*50,ut*100]);function gs(e,t){return e.map(i=>[i[0],t(i[1]),i[2],t(i[4]?i[1]+i[3]:i[3])])}var ms="{YYYY}",vs=`
`+ms,bs="{M}/{D}",Ei=`
`+bs,ys="{aa}",Pl="{h}:{mm}",Sn=Pl+ys,ks=":{ss}",El=[[ut,ms,7,"",1],[ye*28,"{MMM}",7,vs,1],[ye,bs,7,vs,1],[We,"{h}"+ys,4,Ei,1],[at,Sn,4,Ei,1],[_l,ks,2,Ei+" "+Sn,1],[.001,ks+".{fff}",2,Ei+" "+Sn,1]];function ws(e,t){return(i,n,r,o)=>{let l=t.find(C=>o>=C[0])||t[t.length-1],g=null,k=null,T=null;return n.map((C,x)=>{let v=e(C),m=v[Wt](),A=v[xi](),H=v[Pi](),q=m!=g,_=A!=k,I=H!=T,Z=l[2]==7&&q||l[2]==4&&_||l[2]==2&&I?l[3]:l[1];return g=m,k=A,T=H,Z(v)})}}function Cn(e,t,i){return new Date(e,t,i)}function Ll(e){return(t,i,n,r,o)=>{let l=[],g=r>=Et&&r<ut,k=e(i),T=k/1e3,C=Cn(k[Wt](),k[xt](),g?1:k[xi]()),x=C/1e3;if(g){let v=r/Et,m=T==x?T:Cn(C[Wt](),C[xt]()+v,1)/1e3,A=new Date(m*1e3),H=A[Wt](),q=A[xt]();for(let _=0;m<=n;_++){let I=Cn(H,q+v*_,1),Z=I-e(I/1e3);m=(+I+Z)/1e3,m<=n&&l.push(m)}}else{let v=r>=ye?ye:r,m=Tt(i)-Tt(T),A=x+m+Ai(T-x,v);l.push(A);let H=e(A),q=H[Pt]()+H[Pi]()/at+H[yn]()/We,_=r/We;for(;;){A=ze(A+r);let I=Tt(fn(q+_))%24,ge=e(A).getHours()-I;if(ge>1&&(ge=-1),A-=ge*We,A>n)break;q=(q+_)%24;let re=l[l.length-1];ze((A-re)/r)*o>=.7&&l.push(A)}}return l}}function Ss(e,t){return t(e)}var Dl="{YYYY}-{MM}-{DD} {h}:{mm}{aa}";function Cs(e,t){return(i,n)=>t(e(n))}function Rl(e,t){let i=e.series[t],n=qe();n.style.background=i.stroke||$t;let r=_n(i.width,1),o=(r-1)/-2;return K(n,te,r),K(n,le,r),K(n,"marginLeft",o),K(n,"marginTop",o),n}var Il={show:!0,x:!0,y:!0,lock:!1,points:{show:Rl},drag:{setScale:!0,x:!0,y:!1,dist:0,uni:null,_x:!1,_y:!1},focus:{prox:-1},locked:!1,left:-10,top:-10,idx:null},An={show:!0,stroke:"rgba(0,0,0,0.07)",width:2},As=Pe({},An,{size:10}),Tn='12px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"',Ts="bold "+Tn,Ml=1.5,_s={type:"x",show:!0,scale:"x",space:50,gap:5,size:50,labelSize:30,labelFont:Ts,side:2,grid:An,ticks:As,font:Tn,rotate:0},Ol="Value",Hl="Time",xs={show:!0,scale:"x",min:oe,max:-oe,idxs:[]},Nl=new Intl.NumberFormat(navigator.language);function Ul(e,t,i,n){return t.map(Nl.format)}function jl(e,t,i,n,r,o){t=o?t:+Ai(t,n).toFixed(12);let l=[];for(let g=t;g<=i;g=+(g+n).toFixed(12))l.push(g);return l}function Fl(e,t){return t}var Ps={type:"y",show:!0,scale:"y",space:40,gap:5,size:50,labelSize:30,labelFont:Ts,side:3,grid:An,ticks:As,font:Tn,rotate:0};function _n(e,t){let i=3+(e||1)*2;return ze(i*t)}function Bl(e,t){let i=_n(e.series[t].width,pe),n=e.bbox.width/i/2,r=e.series[0].idxs;return r[1]-r[0]<=n}var Es={scale:"y",show:!0,band:!1,spanGaps:!1,alpha:1,points:{show:Bl},values:null,min:oe,max:-oe,idxs:[],path:null,clip:null},xn={time:!0,auto:!1,distr:1,min:null,max:null},Ls=Pe({},xn,{time:!1,auto:!0}),Ds={};function Rs(e){let t=[];return{sub(i){t.push(i)},unsub(i){t=t.filter(n=>n!=i)},pub(i,n,r,o,l,g,k){t.length>1&&t.forEach(T=>{T!=n&&T.pub(i,n,r,o,l,g,k)})}}}function Is(e,t,i,n){return(n?[e[0],e[1]].concat(e.slice(2)):[e[0]].concat(e.slice(1))).map((o,l)=>Ms(o,l,t,i))}function Ms(e,t,i,n){return Pe({},t==0||e&&e.side%2==0?i:n,e)}function Je(e,t,i,n){let r=(e-t.min)/(t.max-t.min);return n+(1-r)*i}function ht(e,t,i,n){let r=(e-t.min)/(t.max-t.min);return n+r*i}function $l(e,t,i){return[t,i>t?i:i+86400]}function Vl(e,t,i){let n=i-t;if(n==0){let r=zr(n||mt(i)||1),o=Tt(r)+1;return[t,Ai(i,dn(10,o))]}else return[t,i]}function Wl(e,t,i){return Xr(t,i,.2,!0)}function Jl(e,t,i,n){let r=i/e;for(var o=0;o<t.length;o++){let l=t[o]*r;if(l>=n)return[t[o],l]}}function Pn(e){return e.button==0}function Os(e){let t;return e=e.replace(/\d+/,i=>t=ee(i*pe)),[e,t]}function ri(e,t,i){let n={},r=n.root=qe("uplot");if(e.id!=null&&(r.id=e.id),vt(r,e.class),e.title){let a=qe("title",r);a.textContent=e.title}let o=lt("canvas"),l=n.ctx=o.getContext("2d"),g=qe("wrap",r),k=qe("under",g);g.appendChild(o);let T=qe("over",g);e=Bt(e),(e.plugins||[]).forEach(a=>{a.opts&&(e=a.opts(n,e)||e)});let C=!1,x=n.series=Is(e.series||[],xs,Es,!1),v=n.axes=Is(e.axes||[],_s,Ps,!0),m=n.scales=Pe({},{x:xn,y:Ls},e.scales),A=Pe({x:ee(Ps.size/2),y:ee(_s.size/3)},e.gutters),H=e.tzDate||(a=>new Date(a*1e3)),q=e.fmtDate||fs,_=Ll(H),I=ws(H,gs(El,q)),Z=Cs(H,Ss(Dl,q)),Q={};for(let a in m){let h=m[a];(h.min!=null||h.max!=null)&&(Q[a]={min:h.min,max:h.max})}let re=Pe({show:!0},e.legend).show,ke,Ie=[],ne,Ee=!1;if(re){ke=lt("table","legend",r);let a=x[1]?x[1].values:null;if(Ee=a!=null,Ee){let h=lt("tr","labels",ke);lt("th",null,h),ne=a(n,1,0);for(var ct in ne)lt("th",null,h).textContent=ct}else ne={_:0},vt(ke,"inline")}function bt(a,h){if(h==0&&Ee)return null;let c=[],p=lt("tr","series",ke,ke.childNodes[h]);vt(p,a.class),a.show||vt(p,"off");let y=lt("th",null,p),S=qe("ident",y);a.width&&(S.style.borderColor=a.stroke),S.style.backgroundColor=a.fill;let w=qe("text",y);w.textContent=a.label,h>0&&(Ke("click",y,U=>{z.locked||Pn(U)&&kt(x.indexOf(a),{show:!a.show},dt.setSeries)}),B&&Ke(is,y,U=>{z.locked||kt(x.indexOf(a),{focus:!0},dt.setSeries)}));for(var N in ne){let U=lt("td",null,p);U.textContent="--",c.push(U)}return c}let z=n.cursor=Pe({},Il,e.cursor);z.points.show=_t(z.points.show);let Ge=n.focus=Pe({},e.focus||{alpha:.3},z.focus),B=Ge.prox>=0,O=[null];function $(a,h){if(h>0){let c=z.points.show(n,h);if(c)return vt(c,"cursor-pt"),vt(c,a.class),Vt(c,-10,-10),T.insertBefore(c,O[h]),c}}function Y(a,h){let c=a.scale,p=m[c]=Pe({},h==0?xn:Ls,m[c]),y=p.time;p.range=_t(p.range||(y?$l:h==0?Vl:Wl));let S=a.value;if(a.value=y?gl(S)?Cs(H,Ss(S,q)):S||Z:S||Fl,a.label=a.label||(y?Hl:Ol),h>0){a.width=a.width==null?1:a.width,a.paths=a.paths||lo;let w=_n(a.width,1);a.points=Pe({},{size:w,width:ii(1,w*.2)},a.points),a.points.show=_t(a.points.show),a._paths=null}if(re&&Ie.splice(h,0,bt(a,h)),z.show){let w=$(a,h);w&&O.splice(h,0,w)}}function Le(a,h){h=h==null?x.length:h,a=Ms(a,h,xs,Es),x.splice(h,0,a),Y(x[h],h)}n.addSeries=Le;function Me(a){x.splice(a,1),re&&Ie.splice(a,1)[0][0].parentNode.remove(),O.length>1&&O.splice(a,1)[0].remove()}n.delSeries=Me,x.forEach(Y);for(let a in m){let h=m[a];h.from!=null&&(m[a]=Pe({},m[h.from],h))}let V=x[0].scale,Ye=m[V].distr;function He(a,h){if(a.show){let c=a.side%2,p=m[a.scale];p==null&&(a.scale=c?x[1].scale:V,p=m[a.scale]);let y=p.time;a.space=_t(a.space),a.rotate=_t(a.rotate),a.incrs=_t(a.incrs||(p.distr==2?ps:y?xl:Tl)),a.split=_t(a.split||(y&&p.distr==1?_:jl));let S=a.values;a.values=y?Kr(S)?ws(H,gs(S,q)):S||I:S||Ul,a.font=Os(a.font),a.labelFont=Os(a.labelFont)}}v.forEach(He);let b,s=null,u=null,d=x[0].idxs,f=null;function R(a,h){a=a||[],a[0]=a[0]||[],n.data=a,t=a.slice(),f=t[0],b=f.length,Ye==2&&(t[0]=f.map((c,p)=>p)),jn(),Ne("setData"),h!==!1&&L()}n.setData=R;function L(){s=d[0]=0,u=d[1]=b-1;let a=Ye==2?s:t[0][s],h=Ye==2?u:t[0][u];Rt(V,a,h)}function E(a,h,c,p){l.strokeStyle=a||$t,l.lineWidth=h,l.lineJoin="round",l.setLineDash(c||[]),l.fillStyle=p||$t}let M,j,D,F,me,Fe,ie,ae,se,De;n.bbox={};function Mn(a,h){n.width=M=D=a,n.height=j=F=h,me=Fe=0,eo(),to();let c=n.bbox;ie=c[fe]=Ft(me*pe,.5),ae=c[de]=Ft(Fe*pe,.5),se=c[te]=Ft(D*pe,.5),De=c[le]=Ft(F*pe,.5),K(k,fe,me),K(k,de,Fe),K(k,te,D),K(k,le,F),K(T,fe,me),K(T,de,Fe),K(T,te,D),K(T,le,F),K(g,te,M),K(g,le,j),o[te]=ee(M*pe),o[le]=ee(j*pe),ui(),C&&Rt(V,m[V].min,m[V].max),C&&Ne("setSize")}function Zs({width:a,height:h}){Mn(a,h)}n.setSize=Zs;function eo(){let a=!1,h=!1,c=!1,p=!1;v.forEach((y,S)=>{if(y.show){let{side:w,size:N}=y,U=w%2,W=y.labelSize=y.label!=null?y.labelSize||30:0,J=N+W;J>0&&(U?(D-=J,w==3?(me+=J,p=!0):c=!0):(F-=J,w==0?(Fe+=J,a=!0):h=!0))}}),(a||h)&&(c||(D-=A.x),p||(D-=A.x,me+=A.x)),(p||c)&&(h||(F-=A.y),a||(F-=A.y,Fe+=A.y))}function to(){let a=me+D,h=Fe+F,c=me,p=Fe;function y(S,w){switch(S){case 1:return a+=w,a-w;case 2:return h+=w,h-w;case 3:return c-=w,c+w;case 0:return p-=w,p+w}}v.forEach((S,w)=>{let N=S.side;S._pos=y(N,S.size),S.label!=null&&(S._lpos=y(N,S.labelSize))})}function On(){if(Mt){ji=!0;return}if(b>0){let a=Bt(m);for(let c in a){let p=a[c],y=Q[c];y!=null?(Pe(p,y),c==V&&jn()):c!=V&&(p.min=oe,p.max=-oe)}x.forEach((c,p)=>{let y=c.scale,S=a[y];if(p==0){let w=S.range(n,S.min,S.max);S.min=w[0],S.max=w[1],s=jt(S.min,t[0]),u=jt(S.max,t[0]),t[0][s]<S.min&&s++,t[0][u]>S.max&&u--,c.min=f[s],c.max=f[u]}else if(c.show&&Q[y]==null){let w=c.min==oe?S.auto?dl(t[p],s,u):[0,100]:[c.min,c.max];S.min=ot(S.min,c.min=w[0]),S.max=ii(S.max,c.max=w[1])}c.idxs[0]=s,c.idxs[1]=u});for(let c in a){let p=a[c];if(p.from==null&&p.min!=oe&&Q[c]==null){let y=p.range(n,p.min,p.max);p.min=y[0],p.max=y[1]}}for(let c in a){let p=a[c];if(p.from!=null){let y=a[p.from];if(y.min!=oe){let S=p.range(n,y.min,y.max);p.min=S[0],p.max=S[1]}}}let h={};for(let c in a){let p=a[c],y=m[c];(y.min!=p.min||y.max!=p.max)&&(y.min=p.min,y.max=p.max,h[c]=!0)}x.forEach(c=>{h[c.scale]&&(c._paths=null)});for(let c in h)Ne("setScale",c)}for(let a in Q)Q[a]=null;z.show&&tt()}function io(a){let h=x[a],c=h.points,p=ze(c.width*pe),y=p%2/2,S=c.width>0,w=(c.size-c.width)/2*pe,N=ze(w*2);l.translate(y,y),l.save(),l.beginPath(),l.rect(ie-N,ae-N,se+N*2,De+N*2),l.clip(),l.globalAlpha=h.alpha;let U=new Path2D;for(let W=s;W<=u;W++)if(t[a][W]!=null){let J=ee(ht(t[0][W],m[V],se,ie)),G=ee(Je(t[a][W],m[h.scale],De,ae));U.moveTo(J+w,G),U.arc(J,G,w,0,Ci*2)}E(c.stroke||h.stroke||$t,p,null,c.fill||(S?"#fff":h.stroke||$t)),l.fill(U),S&&l.stroke(U),l.globalAlpha=1,l.restore(),l.translate(-y,-y)}function no(a){let h=qr(s-1,0,b-1),c=qr(u+1,0,b-1);for(;a[h]==null&&h>0;)h--;for(;a[c]==null&&c<b-1;)c++;return[h,c]}let Xe=1;function ro(){x.forEach((a,h)=>{if(h>0&&a.show&&b>0&&a._paths==null){let c=no(t[h]);a._paths=a.paths(n,h,c[0],c[1])}}),x.forEach((a,h)=>{h>0&&a.show&&(a._paths&&so(h),a.points.show(n,h,s,u)&&io(h),Ne("drawSeries",h))})}function so(a){let h=x[a];if(Xe==1){let{stroke:c,fill:p,clip:y}=h._paths,S=ze(h[te]*pe),w=S%2/2;E(h.stroke,S,h.dash,h.fill),l.globalAlpha=h.alpha,l.translate(w,w),l.save();let N=ie,U=ae,W=se,J=De,G=S*pe/2;h.min==0&&(J+=G),h.max==0&&(U-=G,J+=G),l.beginPath(),l.rect(N,U,W,J),l.clip(),y!=null&&l.clip(y),h.band?(l.fill(c),S&&l.stroke(c)):(S&&l.stroke(c),h.fill!=null&&l.fill(p)),l.restore(),l.translate(-w,-w),l.globalAlpha=1}h.band&&(Xe*=-1)}function oo(a,h,c,p){let y=x[a],S=null;if(h.length>0){if(y.spanGaps){let N=h[0],U=h[h.length-1];h=[],c&&h.push(N),p&&h.push(U)}S=new Path2D;let w=ie;for(let N=0;N<h.length;N++){let U=h[N];S.rect(w,ae,U[0]-w,ae+De),w=U[1]}S.rect(w,ae,ie+se-w,ae+De)}return S}function Hn(a,h,c){let p=a[a.length-1];p&&p[0]==h?p[1]=c:a.push([h,c])}function lo(a,h,c,p){let y=x[h],S=t[0],w=t[h],N=m[V],U=m[y.scale],W=Xe==1?{stroke:new Path2D,fill:null,clip:null}:x[h-1]._paths,J=W.stroke,G=ze(y[te]*pe),ve=oe,Ae=-oe,Be,it,St=[],Te=ee(ht(S[Xe==1?c:p],N,se,ie));y.band&&Xe==1&&c==s&&(G&&J.lineTo(-G,ee(Je(w[c],U,De,ae))),N.min<S[0]&&St.push([ie,Te-1]));for(let be=Xe==1?c:p;be>=c&&be<=p;be+=Xe){let Re=ee(ht(S[be],N,se,ie));if(Re==Te)w[be]!=null&&(Be=ee(Je(w[be],U,De,ae)),ve=ot(Be,ve),Ae=ii(Be,Ae));else{let Ue=!1;ve!=oe?(J.lineTo(Te,ve),J.lineTo(Te,Ae),J.lineTo(Te,Be),it=Te):Ue=!0,w[be]!=null?(Be=ee(Je(w[be],U,De,ae)),J.lineTo(Re,Be),ve=Ae=Be,Re-Te>1&&w[be-1]==null&&(Ue=!0)):(ve=oe,Ae=-oe),Ue&&Hn(St,it,Re),Te=Re}}if(w[p]==null&&Hn(St,it,Te),y.band){let be=G*100,Re,Ue;Xe==-1&&c==s&&(Ue=ie-be,Re=c),Xe==1&&p==u&&(Ue=ie+se+be,Re=p,N.max>S[b-1]&&St.push([Te,ie+se])),J.lineTo(Ue,ee(Je(w[Re],U,De,ae)))}if(Xe==1&&(W.clip=oo(h,St,w[c]==null,w[p]==null),y.fill!=null)){let be=W.fill=new Path2D(J),Re=ee(Je(0,U,De,ae));be.lineTo(ie+se,Re),be.lineTo(ie,Re)}return y.band&&(Xe*=-1),W}function Nn(a,h,c,p){let y;if(p<=0)y=[0,0];else{let S=a.space(n,h,c,p),w=a.incrs(n,h,c,p,S);y=Jl(c-h,w,p,S),y.push(y[1]/S)}return y}function Un(a,h,c,p,y,S,w,N){let U=S%2/2;l.translate(U,U),E(w,S,N),l.beginPath();let W,J,G,ve,Ae=p+(c==0||c==3?-y:y);h==0?(J=p,ve=Ae):(W=p,G=Ae),a.forEach((Be,it)=>{h==0?W=G=Be:J=ve=Be,l.moveTo(W,J),l.lineTo(G,ve)}),l.stroke(),l.translate(-U,-U)}function ao(){v.forEach((a,h)=>{if(!a.show)return;let c=m[a.scale];if(c.min==oe)return;let p=a.side,y=p%2,{min:S,max:w}=c,[N,U,W]=Nn(a,S,w,y==0?D:F),J=c.distr==2,G=a.split(n,S,w,N,W,J),ve=y==0?ht:Je,Ae=y==0?se:De,Be=y==0?ie:ae,it=G.map(ft=>ee(ve(ft,c,Ae,Be))),St=ee(a.gap*pe),Te=a.ticks,be=Te.show?ee(Te.size*pe):0,Re=a.values(n,c.distr==2?G.map(ft=>f[ft]):G,U,c.distr==2?f[G[1]]-f[G[0]]:N),Ue=p==2?a.rotate(n,Re,U)*-Ci/180:0,Gn=ee(a._pos*pe),go=be+St,mo=y==0&&p==0||y==1&&p==3?-1:1,Qn=Gn+go*mo,Ht=y==0?Qn:0,Nt=y==1?Qn:0;l.font=a.font[0],l.fillStyle=a.stroke||$t,l.textAlign=Ue>0?fe:Ue<0?Zr:y==0?"center":p==3?Zr:fe,l.textBaseline=Ue||y==1?"middle":p==2?de:Qr;let Zn=a.font[1]*Ml;if(Re.forEach((ft,er)=>{y==0?Nt=it[er]:Ht=it[er],(""+ft).split(/\n/gm).forEach((tr,ir)=>{Ue?(l.save(),l.translate(Nt,Ht+ir*Zn),l.rotate(Ue),l.fillText(tr,0,0),l.restore()):l.fillText(tr,Nt,Ht+ir*Zn)})}),a.label){l.save();let ft=ee(a._lpos*pe);y==1?(Nt=Ht=0,l.translate(ft,ee(ae+De/2)),l.rotate((p==3?-Ci:Ci)/2)):(Nt=ee(ie+se/2),Ht=ft),l.font=a.labelFont[0],l.textAlign="center",l.textBaseline=p==2?de:Qr,l.fillText(a.label,Nt,Ht),l.restore()}Te.show&&Un(it,y,p,Gn,be,ze(Te[te]*pe),Te.stroke);let ci=a.grid;ci.show&&Un(it,y,y==0?2:1,y==0?ae:ie,y==0?De:se,ze(ci[te]*pe),ci.stroke,ci.dash)}),Ne("drawAxes")}function jn(){x.forEach((a,h)=>{h>0&&(a.min=oe,a.max=-oe,a._paths=null)})}let Dt;function si(){if(Mt){Ui=!0;return}l.clearRect(0,0,o[te],o[le]),Ne("drawClear"),ao(),ro(),Dt=!0,Ne("draw")}n.redraw=a=>{a!==!1?Rt(V,m[V].min,m[V].max):si()};function Ni(a,h){let c=m[a];if(c.from==null){if(a==V&&(c.distr==2&&(h.min=jt(h.min,t[0]),h.max=jt(h.max,t[0])),c.time&&v[0].show&&h.max>h.min&&Nn(v[0],h.min,h.max,D)[0]<.001))return;Q[a]=h,Dt=!1,On(),!Dt&&si(),Dt=!1}}n.setScale=Ni;let Fn,Bn,oi,li,ue,he,yt=!1,we=z.drag,Se=we.x,Ce=we.y;if(z.show){let a="cursor-";z.x&&(ue=z.left,Fn=qe(a+"x",T)),z.y&&(he=z.top,Bn=qe(a+"y",T))}let X=n.select=Pe({show:!0,left:0,width:0,top:0,height:0},e.select),ce=X.show?qe("select",T):null;function ai(a,h){if(X.show){for(let c in a)K(ce,c,X[c]=a[c]);h!==!1&&Ne("setSelect")}}n.setSelect=ai;function $n(a,h){let c=x[a],p=re?Ie[a][0].parentNode:null;c.show?p&&vl(p,"off"):(p&&vt(p,"off"),O.length>1&&Vt(O[a],0,-10))}function Rt(a,h,c){Ni(a,{min:h,max:c})}function kt(a,h,c){let p=x[a];if(h.focus!=null&&ho(a),h.show!=null){if(p.show=h.show,$n(a,h.show),p.band){let y=x[a+1]&&x[a+1].band?a+1:a-1;x[y].show=p.show,$n(y,h.show)}Rt(V,m[V].min,m[V].max)}Ne("setSeries",a,h),c&&wt.pub("setSeries",n,a,h)}n.setSeries=kt;function Vn(a,h){x[a].alpha=h,Ie&&(Ie[a][0].parentNode.style.opacity=h)}function uo(a,h){let c=x[a];if(Vn(a,h),c.band){let p=x[a+1].band?a+1:a-1;Vn(p,h)}}let Jt=Array(x.length),Wn=null;function ho(a){a!=Wn&&(x.forEach((h,c)=>{uo(c,a==null||c==0||c==a?1:Ge.alpha)}),Wn=a,si())}re&&B&&Ke(ns,ke,a=>{z.locked||(kt(null,{focus:!1},dt.setSeries),tt())});function It(a,h){let c=D;h!=V&&(c=F,a=c-a);let p=a/c,y=m[h],S=y.max-y.min;return y.min+p*S}function Jn(a){let h=It(a,V);return jt(h,t[0],s,u)}n.valToIdx=a=>jt(a,t[0]),n.posToIdx=Jn,n.posToVal=It,n.valToPos=(a,h,c)=>h==V?ht(a,m[h],c?se:D,c?ie:0):Je(a,m[h],c?De:F,c?ae:0);let Mt=!1,Ui=!1,ji=!1,Fi=!1;function Yn(a){Mt=!0,a(n),Mt=!1,ji&&On(),Fi&&tt(),Ui&&!Dt&&si(),ji=Fi=Ui=Dt=Mt}n.batch=Yn,n.setCursor=a=>{ue=a.left,he=a.top,tt()};let Bi=0;function tt(a,h){if(Mt){Fi=!0;return}Bi=0,z.show&&(z.x&&Vt(Fn,ee(ue),0),z.y&&Vt(Bn,0,ee(he)));let c,p=s>u;if(ue<0||b==0||p){c=null;for(let y=0;y<x.length;y++)if(y>0&&(Jt[y]=oe,O.length>1&&Vt(O[y],-10,-10)),re){if(y==0&&Ee)continue;for(let S=0;S<Ie[y].length;S++)Ie[y][S][es].nodeValue="--"}B&&kt(null,{focus:!0},dt.setSeries)}else{c=Jn(ue);let y=m[V],S=ze(ht(t[0][c],y,D,0));for(let w=0;w<x.length;w++){let N=x[w];if(w>0&&N.show){let U=t[w][c],W=U==null?-10:ze(Je(U,m[N.scale],F,0));Jt[w]=W>0?mt(W-he):oe,O.length>1&&Vt(O[w],S,W)}else Jt[w]=oe;if(re){if(c==z.idx||w==0&&Ee)continue;let U=w==0&&Ye==2?f:t[w],W=Ee?N.values(n,w,c):{_:N.value(n,U[c],w,c)},J=0;for(let G in W)Ie[w][J++][es].nodeValue=W[G]}}}if(X.show&&yt){let y=mt(ue-oi),S=mt(he-li);if(h!=null){let[w,N]=dt.scales,U=h.cursor.drag;if(Se=U._x,Ce=U._y,w){let W=m[w],J=h.posToVal(h.select[fe],w),G=h.posToVal(h.select[fe]+h.select[te],w);X[fe]=ht(J,W,D,0),X[te]=mt(X[fe]-ht(G,W,D,0)),K(ce,fe,X[fe]),K(ce,te,X[te]),N||(K(ce,de,X[de]=0),K(ce,le,X[le]=F))}if(N){let W=m[N],J=h.posToVal(h.select[de],N),G=h.posToVal(h.select[de]+h.select[le],N);X[de]=Je(J,W,F,0),X[le]=mt(X[de]-Je(G,W,F,0)),K(ce,de,X[de]),K(ce,le,X[le]),w||(K(ce,fe,X[fe]=0),K(ce,te,X[te]=D))}}else{Se=we.x&&y>=we.dist,Ce=we.y&&S>=we.dist;let w=we.uni;if(w!=null?Se&&Ce&&(Se=y>=w,Ce=S>=w,!Se&&!Ce&&(S>y?Ce=!0:Se=!0)):we.x&&we.y&&(Se||Ce)&&(Se=Ce=!0),Se){let N=ot(oi,ue);K(ce,fe,X[fe]=N),K(ce,te,X[te]=y),Ce||(K(ce,de,X[de]=0),K(ce,le,X[le]=F))}if(Ce){let N=ot(li,he);K(ce,de,X[de]=N),K(ce,le,X[le]=S),Se||(K(ce,fe,X[fe]=0),K(ce,te,X[te]=D))}!Se&&!Ce&&(K(ce,le,X[le]=0),K(ce,te,X[te]=0))}}if(z.idx=c,z.left=ue,z.top=he,we._x=Se,we._y=Ce,a!=null&&(wt.pub(pn,n,ue,he,D,F,c),B)){let y=ot.apply(null,Jt),S=null;y<=Ge.prox&&Jt.some((w,N)=>{if(w==y)return S=N}),kt(S,{focus:!0},dt.setSeries)}C&&Ne("setCursor")}let $i=null;function ui(){$i=T.getBoundingClientRect()}function Xn(a,h,c,p,y,S,w){z.locked||(Vi(a,h,c,p,y,S,w,!1,a!=null),a!=null?Bi==0&&(Bi=os(tt)):tt(null,h))}function Vi(a,h,c,p,y,S,w,N,U){if(a!=null)c=a.clientX-$i.left,p=a.clientY-$i.top;else{if(c<0||p<0){ue=-10,he=-10;return}let[W,J]=dt.scales;W!=null?c=ht(h.posToVal(c,W),m[W],D,0):c=D*(c/y),J!=null?p=Je(h.posToVal(p,J),m[J],F,0):p=F*(p/S)}U&&((c<=1||c>=D-1)&&(c=Ft(c,D)),(p<=1||p>=F-1)&&(p=Ft(p,F))),N?(oi=c,li=p):(ue=c,he=p)}function zn(){ai({width:0,height:0},!1)}function qn(a,h,c,p,y,S,w){(h!=null||Pn(a))&&(yt=!0,Se=Ce=we._x=we._y=!1,Vi(a,h,c,p,y,S,w,!0,!1),a!=null&&(Ke(Ti,vn,Wi),wt.pub(gn,n,oi,li,D,F,null)))}function Wi(a,h,c,p,y,S,w){if(h!=null||Pn(a)){yt=we._x=we._y=!1,Vi(a,h,c,p,y,S,w,!1,!0);let N=X[te]>0||X[le]>0;N&&ai(X),we.setScale&&N?(Yn(()=>{if(Se&&Rt(V,It(X[fe],V),It(X[fe]+X[te],V)),Ce)for(let U in m){let W=m[U];U!=V&&W.from==null&&Rt(U,It(X[de]+X[le],U),It(X[de],U))}}),zn()):z.lock&&(z.locked=!z.locked,z.locked||tt())}a!=null&&(bn(Ti,vn,Wi),wt.pub(Ti,n,ue,he,D,F,null))}function co(a,h,c,p,y,S,w){if(!z.locked){let N=yt;if(yt){let U=!0,W=!0,J=10;if(Se&&Ce&&(U=ue<=J||ue>=D-J,W=he<=J||he>=F-J),Se&&U){let G=ue,ve=D-ue,Ae=ot(G,ve);Ae==G&&(ue=0),Ae==ve&&(ue=D)}if(Ce&&W){let G=he,ve=F-he,Ae=ot(G,ve);Ae==G&&(he=0),Ae==ve&&(he=F)}tt(1),yt=!1}ue=-10,he=-10,tt(1),N&&(yt=N)}}function Kn(a,h,c,p,y,S,w){L(),zn(),a!=null&&wt.pub(mn,n,ue,he,D,F,null)}let Ot={};Ot[gn]=qn,Ot[pn]=Xn,Ot[Ti]=Wi,Ot[mn]=Kn,Ot.setSeries=(a,h,c,p)=>{kt(c,p)};let Yt;z.show&&(Ke(gn,T,qn),Ke(pn,T,Xn),Ke(is,T,ui),Ke(ns,T,a=>{os(co)}),Ke(mn,T,Kn),Yt=cl(ui,100),Ke(rs,_i,Yt),Ke(ss,_i,Yt),n.syncRect=ui);let hi=n.hooks=e.hooks||{};function Ne(a,h,c){a in hi&&hi[a].forEach(p=>{p.call(null,n,h,c)})}(e.plugins||[]).forEach(a=>{for(let h in a.hooks)hi[h]=(hi[h]||[]).concat(a.hooks[h])});let dt=Pe({key:null,setSeries:!1,scales:[V,null]},z.sync),Ji=dt.key,wt=Ji!=null?Ds[Ji]=Ds[Ji]||Rs():Rs();wt.sub(n);function fo(a,h,c,p,y,S,w){Ot[a](null,h,c,p,y,S,w)}n.pub=fo;function po(){wt.unsub(n),bn(rs,_i,Yt),bn(ss,_i,Yt),r.remove(),Ne("destroy")}n.destroy=po;function Yi(){Mn(e[te],e[le]),Ne("init",e,t),R(t||e.data,!1),Q[V]?Ni(V,Q[V]):L(),ai(X,!1),C=!0,Ne("ready")}return i?i instanceof HTMLElement?(i.appendChild(r),Yi()):i(n,Yi):Yi(),n}ri.assign=Pe;ri.rangeNum=Xr;ri.fmtDate=fs,ri.tzDate=Cl;var En=ri;var Yl=e=>e.unit?{value:(t,i)=>i==null?"--":i.toFixed(3)+` ${e.unit}`}:{},Hs=e=>({value:"{YYYY}-{MM}-{DD} {HH}:{mm}:{ss}"}),Xl=e=>e.unit?{values:(t,i,n)=>i.map(r=>+r.toFixed(2)+` ${e.unit}`)}:{},Ns=e=>({space:55,values:[[3600*24*365,"{YYYY}",7,"{YYYY}"],[3600*24*28,"{MMM}",7,`{MMM}
{YYYY}`],[3600*24,"{MM}-{DD}",7,`{MM}-{DD}
{YYYY}`],[3600,"{HH}:{mm}",4,`{HH}:{mm}
{YYYY}-{MM}-{DD}`],[60,"{HH}:{mm}",4,`{HH}:{mm}
{YYYY}-{MM}-{DD}`],[1,"{ss}",2,`{HH}:{mm}:{ss}
{YYYY}-{MM}-{DD}`]]}),Us=e=>$e({show:!0,size:70,space:15},Xl(e)),Li={width:100,height:300};function zl(e,t){let i=!1;return()=>{i||(requestAnimationFrame(e),i=!0,setTimeout(()=>{i=!1},t))}}var Di=(e,t=0)=>sr($e($e({},Yr.at(t)),Yl(e)),{label:e.label,spanGaps:!0,points:{show:!1}}),js=e=>e.slice(0).map(({data:t})=>t);function ql({y:e,z:t},i){this.datasets[0].data.push(t);let n=this.datasets[1].data[this.datasets[1].data.length-1]||0,r=i.call(this,e,n);this.datasets[1].data.push(r)}var Ln=e=>e.reduceRight((t,i)=>i!=null&&t==null?i:t,null);function Kl({x:e,y:t,z:i},n){let r=this.datasets.findIndex(({key:o})=>e===o);r===-1&&(r=this.datasets.push({key:e,data:Array(this.datasets[0].data.length).fill(null)})-1,this.chart.addSeries(Di({label:e,unit:this.options.unit},r-1),r)),this.datasets=this.datasets.map((o,l)=>(l===0?o.data.push(i):l===r?o.data.push(n.call(this,t,Ln(o.data)||0)):o.data.push(null),o))}var Fs=({pruneThreshold:e=1e3})=>e,Ri=class{static __projections(){return{counter:(t,i)=>i+1,last_value:t=>t,sum:(t,i)=>i+t}}static getConfig(t){return{class:t.kind,title:t.title,width:t.width,height:t.height,series:[$e({},Hs()),Di(t,0)],scales:{x:{min:t.now-60,max:t.now},y:{min:0,max:1}},axes:[Ns(),Us(t)]}}static initialData(){return[[],[]]}constructor(t,i){this.__callback=this.constructor.__projections()[i.metric],this.chart=t,this.datasets=[{key:"|x|",data:[]}],this.options=i,this.pruneThreshold=Fs(i),i.tagged?(this.chart.delSeries(1),this.__handler=Kl):(this.datasets.push({key:i.label,data:[]}),this.__handler=ql)}handleMeasurements(t){let i=this.datasets[0].data.length;i>=this.pruneThreshold&&(this.datasets=this.datasets.map(o=>{var l=o,{data:n}=l,r=or(l,["data"]);return $e({data:n.slice(-Math.floor(i/2))},r)})),t.forEach(n=>this.__handler.call(this,n,this.__callback)),this.chart.setData(js(this.datasets))}},Ii=class{constructor(t,i){let n=this.constructor.getConfig(t);n.series[1].values=this.__seriesValues.bind(this),this.datasets=[{key:"|x|",data:[]}],this.chart=new En(n,this.constructor.initialData(t),i),this.pruneThreshold=Fs(t),this.options=t,t.tagged?(this.chart.delSeries(1),this.__handler=this.handleTaggedMeasurement.bind(this)):(this.datasets.push(this.constructor.newDataset(t.label)),this.__handler=this.handleMeasurement.bind(this))}handleMeasurements(t){this.__maybePruneDatasets(),t.forEach(i=>this.__handler(i)),this.chart.setData(js(this.datasets))}handleTaggedMeasurement(t){let i=this.findOrCreateSeries(t.x);this.handleMeasurement(t,i)}handleMeasurement(t,i=1){let{z:n}=t;this.datasets=this.datasets.map((r,o)=>(r.key==="|x|"?r.data.push(n):o===i?this.pushToDataset(r,t):this.pushToDataset(r,null),r))}findOrCreateSeries(t){let i=this.datasets.findIndex(({key:n})=>t===n);if(i===-1){i=this.datasets.push(this.constructor.newDataset(t,this.datasets[0].data.length))-1;let n=$e({values:this.__seriesValues.bind(this)},Di({label:t},i-1));this.chart.addSeries(n,i)}return i}pushToDataset(t,i){if(i===null){t.data.push(null),t.agg.avg.push(null),t.agg.max.push(null),t.agg.min.push(null);return}let{y:n}=i;return t.agg.count++,t.agg.total+=n,t.data.push(n),(t.last.min===null||n<t.last.min)&&(t.last.min=n),t.agg.min.push(t.last.min),(t.last.max===null||n>t.last.max)&&(t.last.max=n),t.agg.max.push(t.last.max),t.agg.avg.push(t.agg.total/t.agg.count),t}__maybePruneDatasets(){let t=this.datasets[0].data.length;if(t>=this.pruneThreshold){let i=-Math.floor(t/2);this.datasets=this.datasets.map(({key:n,data:r,agg:o})=>{let l=r.slice(i);if(!o)return{key:n,data:l};let{avg:g,count:k,max:T,min:C,total:x}=o,v=C.slice(i),m=T.slice(i);return{key:n,data:l,agg:{avg:g.slice(i),count:k,min:v,max:m,total:x},last:{min:Ln(v),max:Ln(m)}}})}}__seriesValues(t,i,n){let r=this.datasets[i];if(r&&r.data&&r.data[n]){let{agg:{avg:o,max:l,min:g},data:k}=r;return{Value:k[n].toFixed(3),Min:g[n].toFixed(3),Max:l[n].toFixed(3),Avg:o[n].toFixed(3)}}else return{Value:"--",Min:"--",Max:"--",Avg:"--"}}static initialData(){return[[],[]]}static getConfig(t){return{class:t.kind,title:t.title,width:t.width,height:t.height,series:[$e({},Hs()),Di(t,0)],scales:{x:{min:t.now-60,max:t.now},y:{min:0,max:1}},axes:[Ns(),Us(t)]}}static newDataset(t,i=0){let n=i>0?Array(i).fill(null):[];return{key:t,data:[...n],agg:{avg:[...n],count:0,max:[...n],min:[...n],total:0},last:{max:null,min:null}}}},Bs={counter:Ri,last_value:Ri,sum:Ri,summary:Ii},$s=class{constructor(t,i){if(i.metric){if(i.metric&&!Bs[i.metric])throw new TypeError(`No metric defined for type ${i.metric}`)}else throw new TypeError("No metric type was provided");let n=Bs[i.metric];n===Ii?(this.metric=new Ii(i,t),this.uplotChart=this.metric.chart):(this.uplotChart=new En(n.getConfig(i),n.initialData(i),t),this.metric=new n(this.uplotChart,i));let r=typeof i.refreshInterval!="undefined";this._isBufferingData=r,this._buffer=[],this._timer=r?setInterval(this._flushToChart.bind(this),+i.refreshInterval):null}clearTimers(){clearInterval(this._timer)}resize(t){this.uplotChart.setSize({width:Math.max(t.width,Li.width),height:Li.height})}pushData(t){if(!t.length)return;(this._isBufferingData?this._pushToBuffer:this._pushToChart).call(this,t)}_pushToBuffer(t){this._buffer=this._buffer.concat(t)}_pushToChart(t){this.metric.handleMeasurements(t)}_flushToChart(){let t=this._flushBuffer();!t.length||this._pushToChart(t)}_flushBuffer(){if(this._buffer&&!this._buffer.length)return[];let t=this._buffer;return this._buffer=[],t.reduce((i,n)=>i.concat(n),[])}},Gl={mounted(){let e=this.el.parentElement.querySelector(".chart"),t=e.getBoundingClientRect(),i=Object.assign({},e.dataset,{tagged:e.dataset.tags&&e.dataset.tags!==""||!1,width:Math.max(t.width,Li.width),height:Li.height,now:new Date/1e3,refreshInterval:1e3});this.chart=new $s(e,i),window.addEventListener("resize",zl(()=>{let n=e.getBoundingClientRect();this.chart.resize(n)}))},updated(){let e=Array.from(this.el.children||[]).map(({dataset:{x:t,y:i,z:n}})=>({x:t,y:+i,z:+n/1e6}));e.length>0&&this.chart.pushData(e)},destroyed(){this.chart.clearTimers()}},Vs=Gl;var Ql=e=>{let t=`${e.key}=${e.value};samesite=strict;path=/`;e.domain&&(t+=`;domain=${e.domain}`),document.cookie=t},Zl=e=>{let t="Thu, 01 Jan 1970 00:00:00 GMT";document.cookie=`${e.key}=; expires=${t}`},ea=e=>e.el.getAttribute("data-cookie-enabled")==="true",ta=e=>({key:e.el.getAttribute("data-cookie-key"),value:e.el.getAttribute("data-cookie-value"),domain:e.el.getAttribute("data-cookie-domain")}),ia={updated(){let e=ta(this);Zl(e),ea(this)&&Ql(e)}},Ws=ia;var na=e=>{if(!navigator.clipboard)e.select(),e.setSelectionRange(0,99999),document.execCommand("copy");else{let t=e.value;navigator.clipboard.writeText(t)}},ra={mounted(){this.el.querySelector(".btn-primary").addEventListener("click",e=>{let t=this.el.querySelector("textarea");na(t);let i=this.el.querySelector(".copy-indicator");i.setAttribute("data-enabled","false"),i.offsetWidth,i.setAttribute("data-enabled","true")})}},Js=ra;var sa={updated(){if(this.el.querySelector(".logger-autoscroll-checkbox").checked){let e=this.el.querySelector("#logger-messages");e.scrollTop=e.scrollHeight}}},Ys=sa;var Xs=".progress-bar, .color-bar-legend-entry",Mi,zs=e=>{e.querySelectorAll(Xs).forEach(t=>{if(Mi){let i=t.getAttribute("data-name")!==Mi;t.setAttribute("data-muted",i)}else t.removeAttribute("data-muted")})},oa={mounted(){this.el.setAttribute("data-highlight-enabled","true"),this.el.querySelectorAll(Xs).forEach(e=>e.addEventListener("click",t=>{let i=t.currentTarget.getAttribute("data-name");Mi=i===Mi?null:i,zs(this.el)}))},updated(){this.el.setAttribute("data-highlight-enabled","true"),zs(this.el)}},qs=oa;var Ks="_refresh_data";function Gs(e,t){let i=JSON.stringify(e),n=ua(i);aa(Ks,n,t,15768e4)}function Oi(){let e=la(Ks);if(e){let t=ha(e);return JSON.parse(t)}else return null}function la(e){let t=document.cookie.split("; ").find(i=>i.startsWith(`${e}=`));return t?t.replace(`${e}=`,""):null}function aa(e,t,i,n){let r=`${e}=${t};max-age=${n};path=${i}`;document.cookie=r}function ua(e){return btoa(unescape(encodeURIComponent(e)))}function ha(e){return decodeURIComponent(escape(atob(e)))}var ca={updated(){let e=Oi()||{};e[this.el.dataset.page]=this.el.value,Gs(e,this.el.dataset.dashboardMountPath)}},Qs=ca;var da={PhxChartComponent:Vs,PhxRequestLoggerCookie:Ws,PhxRequestLoggerQueryParameter:Js,PhxRequestLoggerMessages:Ys,PhxColorBarHighlight:qs,PhxRememberRefresh:Qs},fa=document.querySelector("html").getAttribute("phx-socket")||"/live",pa=document.querySelector("meta[name='csrf-token']").getAttribute("content"),Rn=new $r(fa,Hi.Socket,{hooks:da,params:e=>({_csrf_token:pa,refresh_data:Oi()})}),Lt=Rn.socket,ga=Lt.onConnError,In=!0;Lt.onOpen(()=>{In=!1});Lt.onConnError=(...e)=>{In?(In=!1,Lt.disconnect(null,3e3),Lt.transport=Hi.LongPoll,Lt.connect()):ga.apply(Lt,e)};window.addEventListener("phx:page-loading-start",e=>Dn.default.start());window.addEventListener("phx:page-loading-stop",e=>Dn.default.done());Rn.connect();window.liveSocket=Rn;})();
/* NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT */
